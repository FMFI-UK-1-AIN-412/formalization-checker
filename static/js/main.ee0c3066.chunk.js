(this["webpackJsonp@fmfi-uk-1-ain-412/formalization-checker"]=this["webpackJsonp@fmfi-uk-1-ain-412/formalization-checker"]||[]).push([[0],{108:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(23),c=a.n(i),o=a(6),s=(a(85),a(8)),l=a(3),u=a(31),d=a(9),m=a.n(d),p=a(13),f=a(25),E=a(24),b=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return function(){var n=Object(p.a)(m.a.mark((function n(r,i){var c,o,s;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={method:t,headers:{"Content-Type":"application/json"}},null!==localStorage.getItem("formalization_checker_token")&&(c.headers.Authorization="Bearer "+localStorage.getItem("formalization_checker_token")),a&&(c.body=JSON.stringify(a)),o=i().backend.url,n.next=6,fetch(o+e,c);case 6:if(!(s=n.sent).ok){n.next=9;break}return n.abrupt("return",s.json());case 9:throw new Error(s.status+" "+s.statusText);case 10:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},v=a(17),h=a(61),g=a(37),x=a(36),y=a(18),j=a(35),k=function(){function e(t,a){Object(y.a)(this,e),this.lhs=t,this.rhs=a}return Object(j.a)(e,[{key:"getFreeVariables",value:function(){return P(this.lhs.getFreeVariables(),this.rhs.getFreeVariables())}}]),e}(),_=function(){function e(t,a){Object(y.a)(this,e),this.originalSymbol=t,this.subf=a}return Object(j.a)(e,[{key:"getFreeVariables",value:function(){var e=this.subf.getFreeVariables();return e.delete(this.originalSymbol),e}}]),e}(),O=function(){function e(t){Object(y.a)(this,e),this.originalSymbol=t}return Object(j.a)(e,[{key:"getFreeVariables",value:function(){return new Set([this.originalSymbol])}}]),e}(),w=function(){function e(t){Object(y.a)(this,e),this.originalSymbol=t}return Object(j.a)(e,[{key:"getFreeVariables",value:function(){return new Set}}]),e}(),z=function(){function e(t,a){Object(y.a)(this,e),this.originalSymbol=t,this.args=a}return Object(j.a)(e,[{key:"getFreeVariables",value:function(){return this.args.reduce((function(e,t){return P(e,t.getFreeVariables())}),new Set)}}]),e}(),S=function(){function e(t,a){Object(y.a)(this,e),this.originalSymbol=t,this.args=a}return Object(j.a)(e,[{key:"getFreeVariables",value:function(){return this.args.reduce((function(e,t){return P(e,t.getFreeVariables())}),new Set)}}]),e}(),N=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return a}(k),F=function(){function e(t){Object(y.a)(this,e),this.subf=t}return Object(j.a)(e,[{key:"getFreeVariables",value:function(){return this.subf.getFreeVariables()}}]),e}(),C=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return a}(k),T=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return a}(k),A=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return a}(k),I=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return a}(k),L=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return a}(_),V=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return a}(_);function P(e,t){return t.forEach((function(t){return e.add(t)})),e}var U,q=function(e){var t,a=new Map,n=Object(u.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;a.has(r.name)||a.set(r.name,r.arity)}}catch(i){n.e(i)}finally{n.f()}return a},G=function(e,t){try{return{array:t(e),error:null}}catch(a){return{array:[],error:a}}},B=function(e,t,a,n){var r=n.expected,i=a.get(e);t.length!==i&&r("".concat(i," argument").concat(1===i?"":"s"," to ").concat(e))},W=function(e,t,a,n,r){var i=new Set([].concat(Object(h.a)(t),Object(h.a)(a.keys()),Object(h.a)(n.keys()))),c={isConstant:function(e){return t.has(e)},isPredicate:function(e){return a.has(e)},isFunction:function(e){return n.has(e)},isVariable:function(e){return!i.has(e)}},o={functionApplication:function(e,t,a){return B(e,t,n,a),new z(e,t)},predicateAtom:function(e,t,n){return B(e,t,a,n),new S(e,t)},variable:function(e,t){return new O(e,e)},constant:function(e,t){return new w(e,e)},equalityAtom:function(e,t,a){return new N(e,t)},negation:function(e,t){return new F(e)},conjunction:function(e,t,a){return new C(e,t)},disjunction:function(e,t,a){return new T(e,t)},implication:function(e,t,a){return new A(e,t)},equivalence:function(e,t,a){return new I(e,t)},existentialQuant:function(e,t,a){return new L(e,t)},universalQuant:function(e,t,a){return new V(e,t)}};try{var s=r(e,c,o).getFreeVariables();if(s.size>0)throw{location:{start:{column:0,line:0,offset:0},end:{column:0,line:0,offset:e.length}},message:"The formula should be closed, but the following\n          variable".concat(1===s.size?" is":"s are"," free:\n          ").concat(Array.from(s).join(", "),".")};return null}catch(l){return l}},R=function(e,t,a){return e?{D:Array.from(new Set(Object.values(e))).sort(),iC:Object.fromEntries(Object.entries(e).filter((function(e){var t=Object(v.a)(e,2),n=t[0];t[1];return a.has(n)}))),iP:t,iF:null}:void 0},D=Object(l.c)("addExercise/addNewExercise",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,r,i,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.dispatch,r=a.getState,i=a.rejectWithValue,c=ze(r())){e.next=4;break}return e.abrupt("return",i("Exercise contains errors."));case 4:return e.prev=4,e.next=7,n(b("/api/exercises","POST",c));case 7:return o=e.sent,e.abrupt("return",o);case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",i(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,a){return e.apply(this,arguments)}}()),M=Object(l.c)("saveExercise",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,r,i,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.dispatch,r=a.getState,i=a.rejectWithValue,c=ze(r())){e.next=4;break}return e.abrupt("return",i("Exercise contains errors."));case 4:return e.prev=4,e.next=7,n(b("/api/exercises/edit","POST",c));case 7:return o=e.sent,e.abrupt("return",o);case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",i(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,a){return e.apply(this,arguments)}}()),K=Object(l.c)("removeExercise",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,r,i,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.dispatch,r=a.getState,i=a.rejectWithValue,c=ze(r())){e.next=4;break}return e.abrupt("return",i("Exercise contains errors."));case 4:return e.prev=4,e.next=7,n(b("/api/exercises/remove","DELETE",c));case 7:return o=e.sent,e.abrupt("return",o);case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",i(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,a){return e.apply(this,arguments)}}()),Q=Object(l.c)("fetchSavedExercise",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.dispatch,a.getState,r=a.rejectWithValue,e.prev=1,e.next=4,n(b("/api/exercises/edit/".concat(t),"GET"));case 4:return i=e.sent,e.abrupt("return",i);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),Y=Object(l.c)("fetchExercise",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.dispatch,r=a.rejectWithValue,e.prev=1,e.next=4,n(b("/api/exercises/".concat(t),"GET"));case 4:return i=e.sent,e.abrupt("return",i);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),H=Object(l.d)({name:"addExercise",initialState:{title:"",description:"",constants:"",predicates:"",functions:"",constraint:"",id:"",propositions:[{proposition:"",proposition_id:"",formalizations:[""],constraints:[""]}],status:"idle",error:null,added:null},reducers:{updateExerciseTitle:function(e,t){e.title=t.payload},updateDescription:function(e,t){e.description=t.payload},updateConstants:function(e,t){e.constants=t.payload},updatePredicates:function(e,t){e.predicates=t.payload},updateFunctions:function(e,t){e.functions=t.payload},updateConstraint:function(e,t){e.constraint=t.payload},updateInformalValue:{reducer:function(e,t){var a=t.payload,n=a.value,r=a.i;e.propositions[r].proposition=n},prepare:function(e,t){return{payload:{value:e,i:t}}}},updateFormalization:{reducer:function(e,t){var a=t.payload,n=a.value,r=a.i,i=a.j;e.propositions[r].formalizations[i]=n},prepare:function(e,t,a){return{payload:{value:e,i:t,j:a}}}},addNewProposition:function(e){e.propositions.push({proposition:"",formalizations:[""],constraints:[""]})},addNewFormalization:function(e,t){var a=t.payload;e.propositions[a].formalizations.push(""),e.propositions[a].constraints.push("")},removeProposition:function(e,t){var a=t.payload;e.propositions.splice(a,1)},removeFormalization:{reducer:function(e,t){var a=t.payload,n=a.i,r=a.j;e.propositions[n].formalizations.splice(r,1),e.propositions[n].constraints.splice(r,1)},prepare:function(e,t){return{payload:{i:e,j:t}}}},updateConstraints:{reducer:function(e,t){var a=t.payload,n=a.value,r=a.i,i=a.j;e.propositions[r].constraints[i]=n},prepare:function(e,t,a){return{payload:{value:e,i:t,j:a}}}},changeStatus:{reducer:function(e,t){e.added=null,e.status="idle",e.title="",e.description="",e.constants="",e.predicates="",e.functions="",e.constraint="",e.id="",e.propositions=[{proposition:"",proposition_id:"",formalizations:[""],constraints:[""]}]}}},extraReducers:(U={},Object(s.a)(U,D.pending,(function(e,t){e.status="loading"})),Object(s.a)(U,D.fulfilled,(function(e,t){e.added=!0,e.title="",e.description="",e.constants="",e.predicates="",e.functions="",e.constraint="",e.propositions=[{proposition:"",formalizations:[""],constraints:[""]}],e.status="idle"})),Object(s.a)(U,D.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(s.a)(U,M.pending,(function(e,t){e.status="loading"})),Object(s.a)(U,M.fulfilled,(function(e,t){e.status="succeeded",e.title="",e.description="",e.constants="",e.predicates="",e.functions="",e.constraint="",e.id="",e.propositions=[{proposition:"",proposition_id:"",formalizations:[""],constraints:[""]}]})),Object(s.a)(U,M.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(s.a)(U,K.pending,(function(e,t){e.status="loading"})),Object(s.a)(U,K.fulfilled,(function(e,t){e.status="removed",e.title="",e.description="",e.constants="",e.predicates="",e.functions="",e.constraint="",e.id="",e.propositions=[{proposition:"",proposition_id:"",formalizations:[""],constraints:[""]}]})),Object(s.a)(U,K.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(s.a)(U,Y.pending,(function(e,t){e.status="loading"})),Object(s.a)(U,Y.fulfilled,(function(e,t){e.status="succeeded"})),Object(s.a)(U,Y.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(s.a)(U,Q.pending,(function(e,t){e.status="loading"})),Object(s.a)(U,Q.fulfilled,(function(e,t){e.status="idle";var a=t.payload;e.title=a.title,e.description=a.description,e.constants=a.constants,e.predicates=a.predicates,e.functions=a.functions,e.constraint=void 0===a.constraints?"":a.constraints,e.id=a.exercise_id,e.propositions=[];for(var n=0;n<a.propositions.length;n++){for(var r=[],i=[],c=0;c<a.propositions[n].formalization.length;c++)r.push(a.propositions[n].formalization[c].formalization),i.push(a.propositions[n].formalization[c].constraints);e.propositions.push({proposition:a.propositions[n].proposition,proposition_id:a.propositions[n].proposition_id,formalizations:r,constraints:i})}})),Object(s.a)(U,Q.rejected,(function(e,t){e.status="failed",e.error=t.payload})),U)}),J=H.actions,$=J.updateExerciseTitle,X=J.updateDescription,Z=J.updateConstants,ee=J.updatePredicates,te=J.updateFunctions,ae=J.updateInformalValue,ne=J.updateFormalization,re=J.addNewProposition,ie=J.addNewFormalization,ce=J.removeProposition,oe=J.removeFormalization,se=J.updateConstraints,le=J.updateConstraint,ue=J.changeStatus;function de(e,t){var a,n=new Set,r=Object(u.a)(e);try{for(r.s();!(a=r.n()).done;){var i=a.value;if(n.has(i))return"Found duplicate symbol: '".concat(i,"' in ").concat(t);n.add(i)}}catch(c){r.e(c)}finally{r.f()}return null}var me,pe,fe,Ee,be=function(e){return{value:e.addExercise.title}},ve=Object(f.a)([function(e){return e.addExercise.constants}],(function(e){var t=G(e,E.parseConstants);return{value:e,array:t.array,error:t.error}})),he=Object(f.a)([function(e){return e.addExercise.predicates}],(function(e){var t=G(e,E.parsePredicates);return{value:e,array:t.array,error:t.error}})),ge=Object(f.a)([function(e){return e.addExercise.functions}],(function(e){var t=G(e,E.parseFunctions);return{value:e,array:t.array,error:t.error}})),xe=Object(f.a)([ve,he,ge],(function(e,t,a){var n=new Set(e.array),r=q(t.array),i=q(a.array),c=e.error||t.error||a.error,o=de(e.array,"constants")||de(t.array.map((function(e){return e.name})),"predicates")||de(a.array.map((function(e){return e.name})),"functions"),s=null;return s=c?"Language definition contains errors":o||function(e,t,a){var n,r=Object(u.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.has(i))return"Found clash in language definition: '".concat(i,"' in constants and predicates");if(a.has(i))return"Found clash in language definition: '".concat(i,"' in constants and functions")}}catch(l){r.e(l)}finally{r.f()}var c,o=Object(u.a)(t.keys());try{for(o.s();!(c=o.n()).done;){var s=c.value;if(a.has(s))return"Found clash in language definition: '".concat(s,"' in predicates and functions")}}catch(l){o.e(l)}finally{o.f()}return null}(n,r,i),{constants:n,predicates:r,functions:i,errorMessage:s}})),ye=function(e){return e.addExercise.propositions},je=function(e,t){return e.addExercise.propositions[t].formalizations},ke=function(e,t){return e.addExercise.propositions[t].proposition},_e=Object(f.a)([function(e,t,a){return e.addExercise.propositions[t].formalizations[a]},function(e,t,a){return xe(e)}],(function(e,t){return{value:e,error:W(e,t.constants,t.predicates,t.functions,E.parseFormulaWithPrecedence)}})),Oe=Object(f.a)([function(e,t,a){return e.addExercise.propositions[t].constraints[a]},function(e,t,a){return xe(e)}],(function(e,t){return""===e?{value:e,error:""}:{value:e,error:W(e,t.constants,t.predicates,t.functions,E.parseFormulaWithPrecedence)}})),we=Object(f.a)([function(e){return e.addExercise.constraint},function(e){return xe(e)}],(function(e,t){return""===e?{value:e,error:""}:{value:e,error:W(e,t.constants,t.predicates,t.functions,E.parseFormulaWithPrecedence)}})),ze=function(e){if(xe(e).errorMessage||""===be(e).value)return null;for(var t=ye(e),a=0;a<t.length;a++){if(""===t[a].proposition)return null;for(var n=t[a].formalizations,r=0;r<n.length;r++){if(_e(e,a,r).error)return null;if(Oe(e,a,r).error)return null}}return{title:e.addExercise.title,description:e.addExercise.description,constants:e.addExercise.constants,predicates:e.addExercise.predicates,functions:e.addExercise.functions,constraint:e.addExercise.constraint,id:e.addExercise.id,propositions:e.addExercise.propositions}},Se=function(e){return!ze(e)},Ne=H.reducer,Fe=Object(l.c)("exercises/fetchAllUsersToExercise",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.dispatch,r=a.rejectWithValue,e.prev=1,e.next=4,n(b("/api/progress/".concat(t),"GET"));case 4:return i=e.sent,e.abrupt("return",i);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),console.error(e.t0.stack),e.abrupt("return",r(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),Ce=Object(l.c)("exercises/fetchAllExercisesToUser",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.dispatch,r=a.rejectWithValue,e.prev=1,e.next=4,n(b("/api/progress","GET"));case 4:return i=e.sent,e.abrupt("return",i);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),console.error(e.t0.stack),e.abrupt("return",r(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),Te=Object(l.c)("exercises/fetchUsersSolutions",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,r,i,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.exercise_id,r=t.user_name,i=a.dispatch,c=a.rejectWithValue,e.prev=2,e.next=5,i(b("/api/progress/".concat(n,"/").concat(r),"GET"));case 5:return o=e.sent,e.abrupt("return",o);case 9:return e.prev=9,e.t0=e.catch(2),console.error(e.t0),console.error(e.t0.stack),e.abrupt("return",c(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}()),Ae=Object(l.d)({name:"users",initialState:{exercises:[],users:[],status:"idle",error:null,solutions:[],exercise_id:null,user:"",title:""},reducers:{},extraReducers:(me={},Object(s.a)(me,Fe.pending,(function(e,t){e.status="loading",e.exercise_id=t.meta.arg})),Object(s.a)(me,Fe.fulfilled,(function(e,t){e.status="succeeded",e.title=t.payload.title,e.users=t.payload.users})),Object(s.a)(me,Fe.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(s.a)(me,Ce.pending,(function(e,t){e.status="loading"})),Object(s.a)(me,Ce.fulfilled,(function(e,t){e.status="succeeded",e.exercises=t.payload})),Object(s.a)(me,Ce.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(s.a)(me,Te.pending,(function(e,t){e.status="loading",e.user=t.meta.arg.user_name,e.exercise_id=t.meta.arg.exercise_id})),Object(s.a)(me,Te.fulfilled,(function(e,t){e.status="succeeded",e.title=t.payload.title,e.solutions=t.payload.solutions})),Object(s.a)(me,Te.rejected,(function(e,t){e.status="failed",e.error=t.payload})),me)}),Ie=function(e){return e.propositions.users},Le=function(e){return e.propositions.title},Ve=function(e){return e.propositions.exercises},Pe=function(e){return e.propositions.solutions},Ue=function(e){return e.propositions.user},qe=function(e){return e.propositions.status},Ge=function(e){return e.propositions.status},Be=Ae.reducer,We=Object(l.c)("solveExercise/fetchExercise",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,r,i,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.exercise_id,r=t.user_name,i=a.dispatch,c=a.rejectWithValue,e.prev=2,e.next=5,i(b("/api/exercises/".concat(n),"POST",{username:r}));case 5:return o=e.sent,e.abrupt("return",o);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",c(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}()),Re=Object(l.c)("solveExercise/evaluate",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,r,i,c,o,s,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.exercise_id,r=t.proposition_id,i=t.solution,c=t.user,o=a.dispatch,s=a.rejectWithValue,e.prev=2,e.next=5,o(b("/api/exercises/".concat(n,"/").concat(r),"POST",{solution:i,user:c}));case 5:return l=e.sent,e.abrupt("return",l);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",s(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}()),De=Object(l.c)("solveExercise/fetchFeedback",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,r,i,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.proposition_id,n=t.bad_formalization_id,r=a.dispatch,i=a.rejectWithValue,e.prev=2,e.next=5,r(b("/api/feedbacks/active/bad_formalization/".concat(n),"GET"));case 5:return c=e.sent,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",i(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}()),Me=Object(l.c)("solveExercise/feedbackRating",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,r,i,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.proposition_id,t.index,n=t.feedback_id,r=t.solution_id,i=a.dispatch,c=a.rejectWithValue,e.prev=2,e.next=5,i(b("/api/feedbacks/rating","POST",{feedback_id:n,solution_id:r}));case 5:return o=e.sent,e.abrupt("return",o);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",c(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}()),Ke=Object(l.c)("solveExercise/rating",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,r,i,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.rating,i=a.dispatch,c=a.rejectWithValue,e.prev=2,e.next=5,i(b("/api/feedbacks/rating/".concat(n),"PATCH",{rating:r}));case 5:return o=e.sent,e.abrupt("return",o);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",c(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}()),Qe=Object(l.d)({name:"solveExercise",initialState:{exercise:null,status:"idle",error:null,constants:[],predicates:[],functions:[],solutions:{},solution:null},reducers:{update:{reducer:function(e,t){var a=t.payload,n=a.value,r=a.id;e.solutions[r].solution=n.replace(/(\r\n|\n|\r)/gm,"")},prepare:function(e,t){return{payload:{value:e,id:t}}}}},extraReducers:(pe={},Object(s.a)(pe,We.pending,(function(e,t){e.status="loading"})),Object(s.a)(pe,We.fulfilled,(function(e,t){e.status="succeeded",e.exercise=t.payload,e.constants=Object(E.parseConstants)(e.exercise.constants),e.predicates=Object(E.parsePredicates)(e.exercise.predicates),e.functions=Object(E.parseFunctions)(e.exercise.functions);var a,n=Object(u.a)(e.exercise.propositions);try{for(n.s();!(a=n.n()).done;){var r=a.value;e.solutions[r.proposition_id]={evaluation:null,status:"idle",error:null,feedbacks:[]},null===r.solution||void 0===r.solution?e.solutions[r.proposition_id].solution="":e.solutions[r.proposition_id].solution=r.solution}}catch(i){n.e(i)}finally{n.f()}})),Object(s.a)(pe,We.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(s.a)(pe,Re.pending,(function(e,t){var a=t.meta.arg.proposition_id;e.solutions[a].status="loading"})),Object(s.a)(pe,Re.fulfilled,(function(e,t){var a=t.meta.arg.proposition_id,n=t.payload,r=e.solutions[a];r.status="succeeded",r.evaluation=n})),Object(s.a)(pe,Re.rejected,(function(e,t){var a=t.meta.arg.proposition_id,n=t.payload.error,r=e.solutions[a];r.status="failed",r.error=n})),Object(s.a)(pe,De.pending,(function(e,t){})),Object(s.a)(pe,De.fulfilled,(function(e,t){var a=t.meta.arg.proposition_id;e.solutions[a].feedbacks=t.payload})),Object(s.a)(pe,De.rejected,(function(e,t){})),Object(s.a)(pe,Me.pending,(function(e,t){})),Object(s.a)(pe,Me.fulfilled,(function(e,t){var a=t.meta.arg,n=a.proposition_id,r=a.index;e.solutions[n].feedbacks[r].rating_id=t.payload})),Object(s.a)(pe,Me.rejected,(function(e,t){})),pe)}),Ye=Qe.actions.update,He=function(e){return e.solveExercise.exercise},Je=function(e){return e.solveExercise.status},$e=function(e){return e.solveExercise.error},Xe=function(e,t){return e.solveExercise.solutions[t].evaluation},Ze=function(e,t){return e.solveExercise.solutions[t].status},et=function(e,t){return e.solveExercise.solutions[t].error},tt=function(e,t){return e.solveExercise.solutions[t].feedbacks},at=Qe.reducer,nt=a(70),rt=a(71),it=Object(l.c)("user/login",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,r,i,c,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.password,i=a.dispatch,c=a.rejectWithValue,e.prev=2,(o={}).username=n,o.password=r,e.next=8,i(b("/api/users/login","POST",o));case 8:return s=e.sent,e.abrupt("return",s);case 12:return e.prev=12,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",c(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,a){return e.apply(this,arguments)}}()),ct=Object(l.c)("user/loginGithub",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,r,i,c,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.code,r=t.token,i=a.dispatch,c=a.rejectWithValue,e.prev=2,o={},void 0!==n?o.code=n:void 0!==r&&(o.token=r),e.next=7,i(b("/api/users/login/github/auth","POST",o));case 7:return s=e.sent,e.abrupt("return",s);case 11:return e.prev=11,e.t0=e.catch(2),console.error(e.t0.message),e.abrupt("return",c(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a){return e.apply(this,arguments)}}());function ot(e){if(null!==e)try{var t=JSON.parse(rt.Buffer.from(e.split(".")[1],"base64").toString());return{user:{username:t.username},isLoggedIn:!0,isAdmin:t.isAdmin}}catch(a){return}}var st=function(){return ot(localStorage.getItem("formalization_checker_token"))};function lt(e,t){if(e.status="succeeded",e.usernameValue="",e.passwordValue="",t.payload){var a=ot(t.payload.token);a&&(e.user=a.user,e.isLoggedIn=a.isLoggedIn,e.isAdmin=a.isAdmin,localStorage.setItem("formalization_checker_token",t.payload.token))}else e.error=""}var ut,dt=Object(l.d)({name:"user",initialState:Object(nt.a)({isLoggedIn:!1,isAdmin:!1,user:null,status:"idle",error:null,usernameValue:"",passwordValue:""},null!==(fe=st())&&void 0!==fe?fe:{}),reducers:{updateUsername:function(e,t){e.usernameValue=t.payload},updatePassword:function(e,t){e.passwordValue=t.payload},logOut:function(e){localStorage.removeItem("formalization_checker_token"),e.isLoggedIn=!1,e.user=null,e.status="idle",e.error=""},setUser:function(e){var t=st();t&&(e.user=t.user,e.isLoggedIn=t.isLoggedIn,e.isAdmin=t.isAdmin)}},extraReducers:(Ee={},Object(s.a)(Ee,it.pending,(function(e,t){e.status="loading"})),Object(s.a)(Ee,it.fulfilled,lt),Object(s.a)(Ee,it.rejected,(function(e,t){e.status="failed",e.error="No such combination of username and password found."})),Object(s.a)(Ee,ct.pending,(function(e,t){e.status="loading"})),Object(s.a)(Ee,ct.fulfilled,lt),Object(s.a)(Ee,ct.rejected,(function(e,t){e.status="failed",e.error="No such combination of username and password found."})),Ee)}),mt=function(e){var t;return null===(t=e.user.user)||void 0===t?void 0:t.username},pt=function(e){return e.user.isAdmin},ft=dt.actions,Et=ft.updateUsername,bt=ft.updatePassword,vt=ft.logOut,ht=ft.setUser,gt=dt.reducer,xt=Object(l.c)("users",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.dispatch,r=a.rejectWithValue,e.prev=1,e.next=4,n(b("/api/users/".concat(t),"GET"));case 4:return i=e.sent,e.abrupt("return",i);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",r(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),yt=Object(l.c)("admins",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var n,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.dispatch,r=a.rejectWithValue,e.prev=1,e.next=4,n(b("/api/users","POST",t));case 4:return i=e.sent,e.abrupt("return",i);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",r(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),jt=Object(l.d)({name:"admins",initialState:{users:[""],status:"idle",error:null,changed:{}},reducers:{addChanged:function(e,t){e.changed[t.payload]=!e.changed[t.payload]}},extraReducers:(ut={},Object(s.a)(ut,xt.pending,(function(e,t){e.status="loading"})),Object(s.a)(ut,xt.fulfilled,(function(e,t){e.status="succeeded",e.users=t.payload;for(var a=0;a<e.users.length;a++)e.changed[e.users[a].user_name]=e.users[a].is_admin})),Object(s.a)(ut,xt.rejected,(function(e,t){e.status="failed",e.error="There are no users"})),Object(s.a)(ut,yt.pending,(function(e,t){e.status="loading"})),Object(s.a)(ut,yt.fulfilled,(function(e,t){e.status="succeeded",e.users=[];for(var a=0,n=Object.entries(t.payload);a<n.length;a++){var r=Object(v.a)(n[a],2),i=r[0],c=r[1];e.users.push({user_name:i,is_admin:c})}})),Object(s.a)(ut,yt.rejected,(function(e,t){e.status="failed",e.error="Unsuccessful saving admins"})),ut)}),kt=function(e){return e.allUsers.users},_t=function(e){return e.allUsers.status},Ot=function(e){return e.allUsers.error},wt=function(e){return e.allUsers.changed},zt=jt.actions.addChanged,St=jt.reducer,Nt=a(49),Ft=a(19),Ct=Object(Nt.a)({reducerPath:"bad_formalizations",baseQuery:function e(t,a,n){return void 0===e.queryFn&&(e.queryFn=Object(Ft.d)({baseUrl:"".concat(a.getState().backend.url,"/api/exercises"),prepareHeaders:function(e){return e.set("Authorization","Bearer "+localStorage.getItem("formalization_checker_token")),e}})),e.queryFn(t,a,n)},endpoints:function(e){return{getExercises:e.query({query:function(){return"/"},skipCache:!0}),getBadExercises:e.query({query:function(){return"/bad_formalizations"},skipCache:!0}),getBadPropositions:e.query({query:function(e){return"/bad_formalizations/".concat(e)}}),getBadFormalizations:e.query({query:function(e){var t=e.exercise_id,a=e.proposition_id;return"/bad_formalizations/".concat(t,"/").concat(a)}}),getBadFormalizationInfo:e.query({query:function(e){var t=e.exercise_id,a=e.bad_formalization_id;return"/bad_formalization/".concat(t,"/").concat(a)}})}}}),Tt=Ct.useGetExercisesQuery,At=Ct.useGetBadExercisesQuery,It=Ct.useGetBadPropositionsQuery,Lt=Ct.useGetBadFormalizationsQuery,Vt=Ct.useGetBadFormalizationInfoQuery,Pt=Object(Nt.a)({reducerPath:"feedbacks",baseQuery:function e(t,a,n){return void 0===e.queryFn&&(e.queryFn=Object(Ft.d)({baseUrl:"".concat(a.getState().backend.url,"/api/feedbacks"),prepareHeaders:function(e){return e.set("Authorization","Bearer "+localStorage.getItem("formalization_checker_token")),e}})),e.queryFn(t,a,n)},tagTypes:["Feedbacks"],endpoints:function(e){return{getFeedbacks:e.query({query:function(e){return{url:"all/bad_formalization/".concat(e),method:"GET"}},providesTags:function(e,t,a){return[{type:"Feedbacks",id:a}]}}),getRating:e.query({query:function(e){var t=e.solution_id,a=e.feedback_id;return{url:"/rating/".concat(t,"/").concat(a),method:"GET"}}}),addFeedback:e.mutation({query:function(e){return{url:"/",method:"POST",body:e}},invalidatesTags:function(e,t,a){return[{type:"Feedbacks",id:a.bad_formalization_id}]}}),updateFeedback:e.mutation({query:function(e){return{url:"/".concat(e.id),method:"PATCH",body:e}},invalidatesTags:function(e,t,a){return[{type:"Feedbacks",id:a.bad_formalization_id}]}})}}}),Ut=Pt.useGetFeedbacksQuery,qt=Pt.useGetRatingQuery,Gt=Pt.useAddFeedbackMutation,Bt=Pt.useUpdateFeedbackMutation,Wt=(a(98),a(99),a(114)),Rt=a(128),Dt=a(129),Mt=a(120),Kt=a(130),Qt=a(10),Yt=a(14),Ht=a(58),Jt=["isLoggedIn","component","location"];var $t=Object(o.c)((function(e){return{isLoggedIn:e.user.isLoggedIn}}))((function(e){var t=e.isLoggedIn,a=e.component,n=e.location,i=Object(Ht.a)(e,Jt);return r.a.createElement(Yt.b,Object.assign({},i,{render:function(e){return t?r.a.createElement(a,e):r.a.createElement(Yt.a,{to:{pathname:"/login",state:{from:n}}})}}))})),Xt=a(113),Zt=a(127),ea=a(32);var ta={updateUsername:Et,updatePassword:bt,logIn:it,logInByGithub:ct,setUser:ht},aa=Object(o.c)((function(e){return{usernameValue:e.user.usernameValue,passwordValue:e.user.passwordValue,isLoggedIn:e.user.isLoggedIn,status:e.user.status,error:e.user.error}}),ta)((function(e){var t=e.usernameValue,a=e.passwordValue,i=e.updateUsername,c=e.updatePassword,o=e.setUser,s=e.location,l=e.isLoggedIn,u=e.status,d=e.error,m=e.logIn,p=e.logInByGithub;return Object(n.useEffect)((function(){null!==localStorage.getItem("formalization_checker_token")&&o()}),[u,o]),"loading"===u?r.a.createElement(Xt.a,{animation:"border",variant:"primary"}):window.location.href.match("code")?(p({code:window.location.href.split("code=")[1]}),r.a.createElement(Yt.a,{to:"/"})):l?s.state&&s.state.from&&s.state.from.pathname?r.a.createElement(Yt.a,{to:s.state.from.pathname}):r.a.createElement(Yt.a,{to:"/"}):r.a.createElement(Zt.a,null,r.a.createElement(Zt.a.Group,null,r.a.createElement(Zt.a.Label,null,"Username"),r.a.createElement(Zt.a.Control,{type:"text",placeholder:"Enter username",value:t,onChange:function(e){return i(e.target.value)}})),r.a.createElement(Zt.a.Group,null,r.a.createElement(Zt.a.Label,null,"Password"),r.a.createElement(Zt.a.Control,{type:"password",placeholder:"Enter password",value:a,onChange:function(e){return c(e.target.value)}}),r.a.createElement(Zt.a.Text,{className:"text-danger"},d)),r.a.createElement(Wt.a,{type:"submit",style:{marginTop:"0.5em",marginBottom:"0.5em",marginRight:"0.5em"},onClick:function(e){e.preventDefault(),m({username:t,password:a})}},"Log in"),r.a.createElement(Wt.a,{type:"submit",style:{marginTop:"0.5em",marginBottom:"0.5em",marginLeft:"0.5em"},onClick:function(e){e.preventDefault();var t="https://github.com/login/oauth/authorize?client_id="+ea.CLIENT_ID+"&redirect_uri="+ea.REDIRECT+"&scope=read:user";window.location.replace(t)}},"Log in with Github"))})),na=a(131),ra=function(e){var t=e.error,a=e.as,n=void 0===a?Kt.a:a;return r.a.createElement(n,{variant:"danger"},r.a.createElement("strong",null,"An error has occured while fetching the exercises list.")," ",200==t.originalStatus?t.error:"Server responded with status ".concat(t.originalStatus,"."))};var ia={fetchExercise:We},ca=Object(o.c)((function(e){return{username:mt(e)}}),ia)((function(e){var t=e.fetchExercise,a=e.username,n=e.onSelect,i=Tt(void 0,{refetchOnMountOrArgChange:!0}),c=i.data,o=i.isLoading,s=i.isSuccess,l=i.isError,u=i.error,d=null;if(o)d=r.a.createElement(Xt.a,{animation:"border",variant:"primary"});else if(s){var m=c.map((function(e){return void 0===n?r.a.createElement(na.a.Item,{as:Qt.b,to:"/solve/".concat(e.exercise_id),key:e.exercise_id,action:!0,onClick:function(){return t({exercise_id:e.exercise_id,user_name:a})}},e.title):r.a.createElement(na.a.Item,{key:e.exercise_id,action:!0,onClick:function(){return n(e.exercise_id)}},e.title)}));d=r.a.createElement(na.a,null,m)}else l&&(d=r.a.createElement(ra,{error:u}));return r.a.createElement("div",null,r.a.createElement("h1",{className:"mb-4"},"Exercises"),d)})),oa=a(121);var sa=function(e){var t=e.value,a=e.error;if(!a)return null;var n=a.location.start.offset,i=a.location.end.offset,c=t.substring(0,n),o=t.substring(n,i),s=t.substring(i),l=""===t?null:r.a.createElement("div",{className:"text-body"},c,r.a.createElement("mark",{className:"bg-warning"},o),s);return r.a.createElement(Zt.a.Control.Feedback,{type:"invalid"},l,r.a.createElement("div",null,a.message))},la=a(119),ua=a(73),da=a(115),ma=a(116),pa=a(117),fa=a(118);var Ea={updateRating:Ke},ba=Object(o.c)(null,Ea)((function(e){var t,a=e.feedback,i=e.updateRating,c=Object(n.useState)("none"),o=Object(v.a)(c,2),s=o[0],l=o[1],u=Object(n.useState)(r.a.createElement(da.a,null)),d=Object(v.a)(u,2),m=d[0],p=d[1],f=Object(n.useState)(r.a.createElement(ma.a,null)),E=Object(v.a)(f,2),b=E[0],h=E[1],g=r.a.createElement("button",{className:"btn ".concat("like"===s?"like-active":""),key:a.feedback_id,onClick:function(){"none"===s||"dislike"===s?(l("like"),p(r.a.createElement(pa.a,null)),h(r.a.createElement(ma.a,null)),i({id:a.rating_id,rating:1})):"like"===s&&(l("none"),p(r.a.createElement(da.a,null)),i({id:a.rating_id,rating:0}))}},m),x=r.a.createElement("button",{className:"btn ".concat("dislike"===s?"dislike-active":""),key:a.feedback_id,onClick:function(){"none"===s||"like"===s?(l("dislike"),h(r.a.createElement(fa.a,null)),p(r.a.createElement(da.a,null)),i({id:a.rating_id,rating:-1})):"dislike"===s&&(l("none"),h(r.a.createElement(ma.a,null)),i({id:a.rating_id,rating:0}))}},b);return t=r.a.createElement(la.a,{className:"p-0 mb-1"},r.a.createElement(ua.a,{className:"p-0"},r.a.createElement(Kt.a,{variant:"info",className:"mb-0 small p-2"},a.feedback)),r.a.createElement(ua.a,{className:"p-0",xs:"auto"},g),r.a.createElement(ua.a,{className:"p-0",xs:"auto"},x)),r.a.createElement(Mt.a,{fluid:!0},t)}));var va={fetchFeedbacks:De,feedbackRating:Me},ha=Object(o.c)((function(e,t){return{evaluation:Xe(e,t.proposition_id),feedbacks:tt(e,t.proposition_id),status:Ze(e,t.proposition_id),error:et(e,t.proposition_id)}}),va)((function(e){var t=e.proposition_id,a=e.evaluation,i=e.feedbacks,c=e.fetchFeedbacks,o=e.feedbackRating,s=e.status,l=e.error,u=Object(n.useState)(-1),d=Object(v.a)(u,2),m=d[0],p=d[1];return Object(n.useEffect)((function(){"succeeded"===s&&(c({proposition_id:t,bad_formalization_id:a.bad_formalization_id,active:!0}),p(-1))}),[s,c,t,a]),"loading"===s?r.a.createElement(Xt.a,{animation:"border",variant:"primary"}):"succeeded"===s?r.a.createElement(r.a.Fragment,null,Na(a),Fa(t,a,i,o,m,p)):"failed"===s?r.a.createElement(ya,null,l):null})),ga=function(e){var t=e.type,a=e.children;return r.a.createElement(Zt.a.Text,{className:"text-".concat(t),children:a})},xa=function(){return r.a.createElement(ga,{type:"success"},r.a.createElement("strong",null,"Your formalization is correct"))},ya=function(e){var t=e.children;return r.a.createElement(ga,{type:"danger",className:"text-warning"},r.a.createElement("strong",null,"An error occured while validating your formalization:"),t)},ja=" Discuss your formalization with your peers or teachers.",ka=function(){return r.a.createElement(ga,{type:"warning"},r.a.createElement("strong",null,"We were unable to automatically validate your formalization."),ja)},_a=function(e){var t=e.summary,a=e.children;return r.a.createElement(ga,{type:"danger"},r.a.createElement("strong",null,"Your formalization is incorrect."),a?r.a.createElement("details",{open:!0},r.a.createElement("summary",{className:"mb-2"},t),a):r.a.createElement("p",null,t))},Oa=function(e){var t=e.interpFunc,a=e.viewValue,n=e.subscript;if(!t)return null;var i=Object.entries(t);return i.length>0&&r.a.createElement("ul",{className:"list-unstyled mb-1"},i.map((function(e){var t=Object(v.a)(e,2),i=t[0],c=t[1];return r.a.createElement("li",{key:i},"\ud835\udc56",n,"(",i,") = ",a(c))})))},wa=function(e){return"{".concat(e.map((function(e){return e.length>1?"(".concat(e,")"):e})).join(", "),"}")},za=function(e){var t=e.subscript,a=e.D,n=e.iC,i=e.iP,c=e.iF;return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"mb-1"},"\ud835\udc37",t," = {".concat(a.join(", "),"}")),r.a.createElement(Oa,{interpFunc:n,viewValue:function(e){return e},subscript:t}),r.a.createElement(Oa,{interpFunc:i,viewValue:wa,subscript:t}),r.a.createElement(Oa,{interpFunc:c,viewValue:wa,subscript:t}))},Sa=function(e){var t=e.structure,a=e.description,n=e.index,i=e.msgNotFound,c=n?r.a.createElement("sub",null,n):null;return t?r.a.createElement("div",{className:"mb-2"},r.a.createElement("p",{className:"mb-1"},a," ","\u2133",c," = (\ud835\udc37",c,", \ud835\udc56",c,") where:"),r.a.createElement(za,Object.assign({subscript:c},t))):r.a.createElement("p",{className:"mb-2"},null!==i&&void 0!==i?i:"We could not find a counterexample automatically.",ja)},Na=function(e){if("OK"===e.solutionToFormalization&&"OK"===e.formalizationToSolution)return r.a.createElement(xa,null);if("TE"===e.solutionToFormalization||"TE"===e.formalizationToSolution||"ME"===e.solutionToFormalization||"ME"===e.formalizationToSolution)return r.a.createElement(ka,null);var t=new Set(e.languageContants),a={result:e.formalizationToSolution,description:e.m1,counterexample:R(e.domainFormalizationToSolution,e.symbolsFormalizationToSolution,t)},n={result:e.solutionToFormalization,description:e.m2,counterexample:R(e.domainSolutionToFormalization,e.symbolsSolutionToFormalization,t)};return"OK"===n.result&&"WA"===a.result?r.a.createElement(_a,{summary:"Your formalization is false\n                in some first-order structure\n                where the correct formalization is true."},r.a.createElement(Sa,{description:"One such structure is",structure:a.counterexample})):"WA"===n.result&&"OK"===a.result?r.a.createElement(_a,{summary:"Your formalization is true\n                in some first-order structure\n                where the correct formalization is false."},r.a.createElement(Sa,{description:"One such structure is",structure:n.counterexample})):r.a.createElement(_a,{summary:"Your formalization is false\n                in some first-order structure\n                where the correct formalization is true,\n                and vice versa."},r.a.createElement(Sa,{description:"Your formalization is true and the correct formalization is false, e.g., in structure",structure:n.counterexample,index:1,msgNotFound:"We could not automatically find a structure\n                    in which your formalization is true\n                    and the correct formalization is false."}),r.a.createElement(Sa,{description:"Your formalization is false and the correct formalization is true, e.g., in structure",structure:a.counterexample,index:2,msgNotFound:"We could not automatically find a structure\n                    in which your formalization is false\n                    and the correct formalization is true."}))},Fa=function(e,t,a,n,i,c){if(!(a&&a.length>0))return null;var o=i>=0&&a.slice(0,i+1).map((function(e){return r.a.createElement(ba,{key:e.feedback_id,feedback:e})})),s=i<a.length-1&&r.a.createElement(Wt.a,{className:"mt-1 mr-1 mb-1",variant:"info",size:"sm",onClick:function(){c(++i),n({proposition_id:e,index:i,feedback_id:a[i].feedback_id,solution_id:t.solution_id})}},i<0?"Hint":"Next hint");return r.a.createElement(r.a.Fragment,null,o,s)};var Ca={update:Ye,evaluate:Re},Ta=Object(o.c)((function(e,t){return function(e,t){var a=e.solveExercise.solutions[t].solution;return{value:a,error:W(a,new Set(e.solveExercise.constants),q(e.solveExercise.predicates),q(e.solveExercise.functions),E.parseFormulaWithPrecedence)}}(e,t.proposition_id)}),Ca)((function(e){var t=e.exercise_id,a=e.proposition_id,n=e.proposition,i=e.value,c=e.error,o=e.update,s=e.evaluate,l=e.user,u=e.onChange,d=function(e){o(e,a),u&&u(e,a)};return r.a.createElement(Zt.a.Group,{className:"clearfix",controlId:"formalization-".concat(t,"-").concat(a)},r.a.createElement(Zt.a.Label,null,n),r.a.createElement(Zt.a.Control,{type:"text",placeholder:"Enter formalization",as:"textarea",rows:1,value:i,onKeyDown:function(e){return"Enter"===e.key&&!c&&s({exercise_id:t,proposition_id:a,solution:i,user:l})},isInvalid:!!c,onChange:function(e){return d(e.target.value)}}),r.a.createElement(Wt.a,{type:"submit",className:"mt-1 float-right",variant:"primary",disabled:c,onClick:function(){return s({exercise_id:t,proposition_id:a,solution:i,user:l})}},"Check"),r.a.createElement(sa,{value:i,error:c}),r.a.createElement(ha,{proposition_id:a}))})),Aa=function(e){var t=e.exerciseId,a=e.exercise,i=e.status,c=e.error,o=e.fetchExercise,s=e.user,l=e.onChange;Object(n.useEffect)((function(){"idle"===i&&o({exercise_id:t,username:s})}),[i,t,a,o,s]);var u=null;if("loading"===i)u=r.a.createElement(Xt.a,{animation:"border",variant:"primary"});else if("succeeded"===i){var d=a.propositions.map((function(e){return r.a.createElement(Ta,{key:e.proposition_id,exercise_id:t,proposition_id:e.proposition_id,proposition:e.proposition,user:s,onChange:l})}));u=r.a.createElement("div",null,r.a.createElement("h2",null,a.title),r.a.createElement("p",null,a.description),r.a.createElement("h5",null,"Language \u2112"),r.a.createElement("p",null,"\ud835\udc9e",r.a.createElement("sub",null,"\u2112")," = ","{ ",a.constants," }"),r.a.createElement("p",null,"\ud835\udcab",r.a.createElement("sub",null,"\u2112")," = ","{ ",a.predicates," }"),r.a.createElement("p",null,"\u2131",r.a.createElement("sub",null,"\u2112")," = ","{ ",a.functions," }"),Ia,r.a.createElement("h5",null,"Propositions"),d)}else"failed"===i&&(u=r.a.createElement(Kt.a,{variant:"danger"},c));return u};var Ia=r.a.createElement("details",{className:"mb-3"},r.a.createElement("summary",{className:"h6"},"Accepted notation of logical symbols"),r.a.createElement(oa.a,{size:"sm",striped:!0,className:"w-auto"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Logical symbol"),r.a.createElement("th",null,"Accepted notation"))),r.a.createElement("tbody",null,[{name:"Negation",preferredToken:"\xac",acceptedTokens:["-","!","~","\\neg","\\lnot"]},{name:"Equality",preferredToken:"\u2250",acceptedTokens:["="]},{name:"Inequality",preferredToken:"\u2260",acceptedTokens:["!=","/=","<>","\\neq"]},{name:"Conjunction",preferredToken:"\u2227",acceptedTokens:["&&","&","/\\","\\wedge","\\land"]},{name:"Disjunction",preferredToken:"\u2228",acceptedTokens:["||","|","\\/","\\vee","\\lor"]},{name:"Implication",preferredToken:"\u2192",acceptedTokens:["->","\\to"]},{name:"Equivalence",preferredToken:"\u2194\ufe0e",acceptedTokens:["\u27f7","<->","<--\x3e","\\lequiv","\\leftrightarrow"]},{name:"Existential quantifier",preferredToken:"\u2203",acceptedTokens:["\\exists","\\e","\\E"]},{name:"Universal quantifier",preferredToken:"\u2200",acceptedTokens:["\\forall","\\a","\\A"]}].map((function(e){var t=e.name,a=e.preferredToken,n=e.acceptedTokens;return r.a.createElement("tr",{key:t},r.a.createElement("th",null,t),r.a.createElement("td",null,r.a.createElement("strong",{key:a},r.a.createElement("code",null,a)),n.map((function(e){return r.a.createElement(r.a.Fragment,{key:e}," ",r.a.createElement("code",{className:"ml-2"},e))}))))}))))),La={fetchExercise:We},Va=Object(o.c)((function(e){return{exercise:He(e),status:Je(e),error:$e(e),user:mt(e)}}),La)((function(e){var t=Object(Yt.g)().id;return r.a.createElement(Aa,Object.assign({exerciseId:t},e))})),Pa=a(122);var Ua=function(e){var t=e.symbolsKind,a=e.symbolsSet,n=e.value,i=e.error,c=e.update;return r.a.createElement(Pa.a,{hasValidation:!!i,className:"mb-3"},r.a.createElement(Pa.a.Prepend,null,r.a.createElement(Pa.a.Text,{as:"label"},a,r.a.createElement("sub",null,"\u2112"),"\xa0=\xa0{")),r.a.createElement(Zt.a.Control,{type:"text",placeholder:"Enter ".concat(t),value:n,onChange:function(e){return c(e.target.value)},isInvalid:!!i}),r.a.createElement(Pa.a.Append,null,r.a.createElement(Pa.a.Text,null,"}")),r.a.createElement(sa,{value:n,error:i}))},qa=ve,Ga={update:Z},Ba=Object(o.c)(qa,Ga)((function(e){return r.a.createElement(Ua,Object.assign({symbolsKind:"individual constants",symbolsSet:"\ud835\udc9e"},e))})),Wa=he,Ra={update:ee},Da=Object(o.c)(Wa,Ra)((function(e){return r.a.createElement(Ua,Object.assign({symbolsKind:"predicate symbols",symbolsSet:"\ud835\udcab"},e))})),Ma=ge,Ka={update:te},Qa=Object(o.c)(Ma,Ka)((function(e){return r.a.createElement(Ua,Object.assign({symbolsKind:"function symbols",symbolsSet:"\u2131"},e))}));var Ya=Object(o.c)((function(e){return{errorMessage:xe(e).errorMessage}}))((function(e){var t=e.errorMessage;return t?r.a.createElement("p",{className:"text-danger"},t):null}));var Ha=we,Ja={update:le},$a=Object(o.c)(Ha,Ja)((function(e){var t=e.value,a=e.error,n=e.update;return r.a.createElement(Zt.a.Group,null,r.a.createElement(Zt.a.Label,null,"Global preferred model constraints (optional):"),r.a.createElement(Zt.a.Control,{type:"text",placeholder:"Enter constraints",value:t,as:"textarea",rows:1,onChange:function(e){return n(e.target.value)},isInvalid:!!a}),r.a.createElement(sa,{value:t,error:a}))}));var Xa=function(){return r.a.createElement("div",{className:"mt-4 mb-4"},r.a.createElement("h4",null,"Language \u2112"),r.a.createElement(Ba,null),r.a.createElement(Da,null),r.a.createElement(Qa,null),r.a.createElement(Ya,null),r.a.createElement($a,null))};var Za={remove:oe,update:ne,updateConstraints:se},en=Object(o.c)((function(e,t){var a=_e(e,t.i,t.j),n=Oe(e,t.i,t.j);return{value:a.value,error:a.error,value2:n.value,error2:n.error}}),Za)((function(e){var t=e.i,a=e.j,n=e.value,i=e.value2,c=e.error,o=e.error2,s=e.remove,l=e.update,u=e.updateConstraints,d=e.cannotBeRemoved,m="".concat(t+1,".").concat(a+1),p="-".concat(t,"-").concat(a);return r.a.createElement("li",{className:"clearfix mb-4"},r.a.createElement(Zt.a.Group,{controlId:"formalization".concat(p)},r.a.createElement(Zt.a.Label,null,"Formalization ".concat(m)),r.a.createElement(Zt.a.Control,{type:"text",placeholder:"Enter formalization",value:n,as:"textarea",rows:1,onChange:function(e){return l(e.target.value,t,a)},isInvalid:!!c}),r.a.createElement(Wt.a,{className:"mt-1 float-right",variant:"outline-danger",size:"sm",onClick:function(){return s(t,a)},disabled:d},"Remove formalization ",m),r.a.createElement(sa,{value:n,error:c})),r.a.createElement(Zt.a.Group,{controlId:"constraints".concat(p),size:"sm"},r.a.createElement(Zt.a.Label,null,r.a.createElement("small",null,"Preferred model constraints ",m," (optional)")),r.a.createElement(Zt.a.Control,{type:"text",placeholder:"Enter constraints",value:i,as:"textarea",size:"sm",rows:1,onChange:function(e){return u(e.target.value,t,a)},isInvalid:!!o}),r.a.createElement(sa,{value:i,error:o})))}));var tn={add:ie,remove:ce,update:ae},an=Object(o.c)((function(e,t){return{value:ke(e,t.i),formalizations:je(e,t.i)}}),tn)((function(e){var t=e.i,a=e.value,n=e.formalizations,i=e.add,c=e.remove,o=e.update,s=n.length>1,l=n.map((function(e,a){return r.a.createElement(en,{key:a,i:t,j:a,cannotBeRemoved:!s})})),u=""===a?r.a.createElement(Zt.a.Control.Feedback,{type:"invalid"},"This field cannot be empty"):null;return r.a.createElement("div",{className:"mb-4"},r.a.createElement(Zt.a.Group,{className:"clearfix mb-0",controlId:"proposition-".concat(t)},r.a.createElement("h5",null,r.a.createElement(Zt.a.Label,{className:"d-block"},"Proposition\xa0",t+1)),r.a.createElement(Zt.a.Control,{type:"text",placeholder:"Enter proposition",value:a,onChange:function(e){return o(e.target.value,t)},isInvalid:!!u}),r.a.createElement(Wt.a,{className:"mt-1 mb-1 float-right",variant:"outline-danger",size:"sm",onClick:function(){return c(t)}},"Remove proposition\xa0",t+1),u),r.a.createElement("ol",{className:"list-unstyled pl-5"},l),r.a.createElement("div",{className:"pl-5 mb-3"},r.a.createElement(Wt.a,{variant:"outline-success",size:"sm",onClick:function(){return i(t)}},"Add formalization")))}));var nn={add:re},rn=Object(o.c)((function(e){return{propositions:ye(e)}}),nn)((function(e){var t=e.propositions,a=e.add,n=t.map((function(e,t){return r.a.createElement(an,{key:t,i:t})}));return r.a.createElement("div",{className:"mb-4 clearfix"},r.a.createElement("h4",{className:"mb-3"},"Propositions"),n,r.a.createElement("div",null,r.a.createElement(Wt.a,{variant:"success",onClick:function(){return a()}},"Add proposition")))}));var cn=be,on={update:$},sn=Object(o.c)(cn,on)((function(e){var t=e.value,a=e.update,n=""===t?r.a.createElement(Zt.a.Control.Feedback,{type:"invalid"},"This field cannot be empty"):null;return r.a.createElement(Zt.a.Group,{controlId:"exercise-title"},r.a.createElement(Zt.a.Label,null,"Exercise title"),r.a.createElement(Zt.a.Control,{type:"text",placeholder:"Enter exercise title",value:t,isInvalid:!!n,onChange:function(e){return a(e.target.value)}}),n)}));var ln=function(e){return{value:e.addExercise.description}},un={update:X},dn=Object(o.c)(ln,un)((function(e){var t=e.value,a=e.update;return r.a.createElement(Zt.a.Group,{controlId:"exercise-description"},r.a.createElement(Zt.a.Label,null,"Description"),r.a.createElement(Zt.a.Control,{as:"textarea",placeholder:"Enter description",value:t,onChange:function(e){return a(e.target.value)}}))}));var mn=function(e){var t=e.containsErrors,a=e.saveExercise;return r.a.createElement(Zt.a.Group,{className:"text-center text-md-right mb-4"},r.a.createElement(Wt.a,{variant:"primary",size:"lg",disabled:t,onClick:a},"Save exercise"),t&&r.a.createElement(Zt.a.Text,{className:"text-danger"},"Fix all errors above in order to be able to save the exercise"))};var pn={addExercise:D},fn=Object(o.c)((function(e){return{status:e.addExercise.status,added:e.addExercise.added,error:e.addExercise.error,containsErrors:Se(e),title:be(e).value}}),pn)((function(e){var t=e.status,a=e.error,n=e.containsErrors,i=e.title,c=e.addExercise,o=e.added,s=null;return"idle"===t?s=o?r.a.createElement(Kt.a,{variant:"success"},"Exercise ",r.a.createElement("b",null,i)," was successfully added to the database."):r.a.createElement(Zt.a,null,r.a.createElement("h1",null,"Add exercise"),r.a.createElement(sn,null),r.a.createElement(dn,null),r.a.createElement(Xa,null),r.a.createElement(rn,null),r.a.createElement(mn,{containsErrors:n,saveExercise:c})):"loading"===t?s=r.a.createElement(Xt.a,{animation:"border",variant:"primary"}):"failed"===t&&(s=r.a.createElement(Kt.a,{variant:"danger"},a)),s})),En=["isLoggedIn","isAdmin","component","location"];var bn=Object(o.c)((function(e){return{isLoggedIn:e.user.isLoggedIn,isAdmin:e.user.isAdmin}}))((function(e){var t=e.isLoggedIn,a=e.isAdmin,n=e.component,i=e.location,c=Object(Ht.a)(e,En);return r.a.createElement(Yt.b,Object.assign({},c,{render:function(e){return t?a?r.a.createElement(n,e):r.a.createElement(Yt.a,{to:{pathname:"/",state:{from:i}}}):r.a.createElement(Yt.a,{to:{pathname:"/login",state:{from:i}}})}}))})),vn=function(){var e=Tt(void 0,{refetchOnMountOrArgChange:!0}),t=e.data,a=e.isLoading,n=e.isSuccess,i=e.isError,c=e.error,o=null;if(a)o=r.a.createElement(Xt.a,{animation:"border",variant:"primary"});else if(n){var s=t.map((function(e){return r.a.createElement("tr",{key:e.exercise_id},r.a.createElement("td",null,r.a.createElement(Qt.b,{to:"/progress/".concat(e.exercise_id),key:e.exercise_id},e.title)),r.a.createElement("td",null,e.attempted))}));o=r.a.createElement(oa.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Exercise"),r.a.createElement("th",null,"Students attempted"))),r.a.createElement("tbody",null,s))}else i&&(o=r.a.createElement(ra,{error:c}));return r.a.createElement("div",null,r.a.createElement("h2",{className:"mb-4"},"Student progress"),o)},hn=a(123),gn=a(124),xn=a(54);var yn=Object(o.c)((function(e){return{isAdmin:pt(e)}}),null)((function(e){var t,a=e.isAdmin,n=e.exercise_id,i=e.proposition_id,c=e.solution_id,o=e.feedback_id,s=e.feedback;switch(qt({solution_id:c,feedback_id:o}).data){case 1:t=r.a.createElement(pa.a,null);break;case-1:t=r.a.createElement(fa.a,null)}return a?r.a.createElement("span",null,r.a.createElement(xn.a,{to:"/bad_formalizations/".concat(n,"/").concat(i,"#").concat(o),key:c},s.slice(0,25)+"... "),t):r.a.createElement("span",null,s.slice(0,25)+"... ",t)}));var jn={fetchUsersSolutions:Te},kn=Object(o.c)((function(e){return{solutions:Pe(e),status:qe(e),error:Ge(e),name:Ue(e),title:Le(e)}}),jn)((function(e){var t=e.solutions,a=e.status,i=e.error,c=e.title,o=e.match.params,s=o.exercise_id,l=o.user_name,u=e.fetchUsersSolutions;Object(n.useEffect)((function(){u({exercise_id:s,user_name:l})}),[s,l]);var d=null;if("loading"===a)d=r.a.createElement(Xt.a,{animation:"border",variant:"primary"});else if("succeeded"===a){for(var m=[],p=[],f=null,E=!1,b=function(e){var a=t[e],n=new Date(a.date).toLocaleString("sk-SK"),i=a.feedbacks.map((function(e,t){return t>0?r.a.createElement("p",{className:"d-inline"},", ",r.a.createElement(yn,{exercise_id:a.exercise_id,proposition_id:a.proposition_id,solution_id:a.solution_id,feedback_id:e.feedback_id,feedback:e.feedback})):r.a.createElement(yn,{exercise_id:a.exercise_id,proposition_id:a.proposition_id,solution_id:a.solution_id,feedback_id:e.feedback_id,feedback:e.feedback})}));null===f?(f=a.proposition,E=!0):f!==a.proposition&&E&&(m.push(r.a.createElement("h5",{key:f}," ",f)),m.push(r.a.createElement(oa.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Solution"),r.a.createElement("th",null,"Correct"),r.a.createElement("th",null,"Feedbacks"))),r.a.createElement("tbody",null,p))),p=[],f=a.proposition),p.push(r.a.createElement("tr",{key:a.solution_id,id:a.solution_id},r.a.createElement("td",null,n),r.a.createElement("td",null,a.solution),r.a.createElement("td",null,a.is_correct?r.a.createElement(hn.a,{size:25,color:"green"}):r.a.createElement(gn.a,{size:25,color:"red"})),r.a.createElement("td",null,i)))},v=0;v<t.length;v++)b(v);m.push(r.a.createElement("h5",{key:f}," ",f)),m.push(r.a.createElement(oa.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Solution"),r.a.createElement("th",null,"Correct"),r.a.createElement("th",null,"Feedbacks"))),r.a.createElement("tbody",null,p))),d=r.a.createElement("div",{key:m},m)}else"failed"===a&&(d=r.a.createElement(Kt.a,{variant:"danger"},i));return r.a.createElement("div",null,r.a.createElement("h2",{className:"mb-4",style:{display:"inline-block"}},c),r.a.createElement("h4",{className:"mb-4",style:{display:"inline-block",padding:"0ex 1ex"}},"by"),r.a.createElement("h2",{className:"mb-4",style:{display:"inline-block"}},l),d)})),_n=a(125);var On={fetchAllUsersToExercise:Fe},wn=Object(o.c)((function(e){return{users:Ie(e),status:qe(e),error:Ge(e),title:Le(e)}}),On)((function(e){var t=e.users,a=e.status,i=e.error,c=e.title,o=e.match.params.exercise_id,s=e.fetchAllUsersToExercise;Object(n.useEffect)((function(){s(o)}),[o,s]);var l=null;if("loading"===a)l=r.a.createElement(Xt.a,{animation:"border",variant:"primary"});else if("succeeded"===a){for(var u=[],d=0;d<t.length;d++){var m=new Date(t[d].last_attempt_date).toLocaleString("sk-SK");u.push(r.a.createElement("tr",{key:t[d].user_name},r.a.createElement("td",null,r.a.createElement(Qt.b,{to:"/progress/".concat(t[d].exercise_id,"/").concat(t[d].user_name),key:t[d].user_name},t[d].user_name+" "),t[d].is_admin?r.a.createElement(_n.a,{size:20}):""),r.a.createElement("td",null,t[d].solved," "),r.a.createElement("td",null,t[d].attempted," "),r.a.createElement("td",null,t[d].successful_attempts),r.a.createElement("td",null,t[d].attempts),r.a.createElement("td",null,m+" ",t[d].last_attempt_correct?r.a.createElement(hn.a,{size:25,color:"green"}):r.a.createElement(gn.a,{size:25,color:"red"}))))}l=r.a.createElement(oa.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null," "),r.a.createElement("th",{colSpan:2},"Propositions "),r.a.createElement("th",{colSpan:2},"Attempt"),r.a.createElement("th",null," ")),r.a.createElement("tr",null,r.a.createElement("th",null,"Student"),r.a.createElement("th",null,"Solved"),r.a.createElement("th",null,"Attempted"),r.a.createElement("th",null,"Successful"),r.a.createElement("th",null,"Total"),r.a.createElement("th",null,"Last attempt"))),r.a.createElement("tbody",null,u))}else"failed"===a&&(l=r.a.createElement(Kt.a,{variant:"danger"},i));return r.a.createElement("div",null,r.a.createElement("h2",{className:"mb-4"}," ",c," "),l)}));var zn={fetchAllExercisesToUser:Ce,fetchUsersSolutions:Te},Sn=Object(o.c)((function(e){return{exercises:Ve(e),status:qe(e),error:Ge(e)}}),zn)((function(e){var t=e.exercises,a=e.status,i=e.error,c=e.fetchAllExercisesToUser,o=e.fetchUsersSolutions;Object(n.useEffect)((function(){c()}),[c]);var s=null;if("loading"===a)s=r.a.createElement(Xt.a,{animation:"border",variant:"primary"});else if("succeeded"===a){for(var l=[],u=function(e){var a=new Date(t[e].last_attempt_date).toLocaleString("sk-SK");l.push(r.a.createElement("tr",{key:t[e].user_name},r.a.createElement("td",null,r.a.createElement(Qt.b,{to:"/progress/".concat(t[e].exercise_id,"/").concat(t[e].user_name),key:t[e].title,onClick:function(){return o({exercise_id:t[e].exercise_id,user_name:t[e].user_name})}},t[e].title)),r.a.createElement("td",null,t[e].solved," "),r.a.createElement("td",null,t[e].attempted," "),r.a.createElement("td",null,t[e].successful_attempts),r.a.createElement("td",null,t[e].attempts),r.a.createElement("td",null,a+" ",t[e].last_attempt_correct?r.a.createElement(hn.a,{size:25,color:"green"}):r.a.createElement(gn.a,{size:25,color:"red"}))))},d=0;d<t.length;d++)u(d);s=r.a.createElement(oa.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null," "),r.a.createElement("th",{colSpan:2},"Propositions "),r.a.createElement("th",{colSpan:2},"Attempt"),r.a.createElement("th",null," ")),r.a.createElement("tr",null,r.a.createElement("th",null,"Exercise"),r.a.createElement("th",null,"Solved"),r.a.createElement("th",null,"Attempted"),r.a.createElement("th",null,"Successful"),r.a.createElement("th",null,"Total"),r.a.createElement("th",null,"Last attempt"))),r.a.createElement("tbody",null,l))}else"failed"===a&&(s=r.a.createElement(Kt.a,{variant:"danger"},i));return r.a.createElement("div",null,r.a.createElement("h2",{className:"mb-4"},"Your progress"),s)}));var Nn={fetchAllUsers:xt,addChanged:zt,saveAdmins:yt},Fn=Object(o.c)((function(e){return{users:kt(e),status:_t(e),error:Ot(e),changedAdmins:wt(e),user_name:mt(e)}}),Nn)((function(e){var t=e.users,a=e.user_name,i=e.status,c=e.error,o=e.fetchAllUsers,s=e.addChanged,l=e.changedAdmins,u=e.saveAdmins;Object(n.useEffect)((function(){"idle"===i&&o(a)}),[i,o]);var d=null;if("loading"===i)d=r.a.createElement(Xt.a,{animation:"border",variant:"primary"});else if("succeeded"===i){var m=t.map((function(e){return r.a.createElement("tr",{key:e.user_name},r.a.createElement("td",null,e.user_name),r.a.createElement("td",null," ",r.a.createElement("input",{type:"checkbox",defaultChecked:e.is_admin,id:e.user_name,onChange:function(e){s(e.target.id)}})," "))}));d=r.a.createElement(Zt.a,null,r.a.createElement(oa.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Username"),r.a.createElement("th",null,"Is admin"))),r.a.createElement("tbody",null,m)))}else"failed"===i&&(d=r.a.createElement(Kt.a,{variant:"danger"},c));return r.a.createElement("div",null,r.a.createElement("h2",{className:"mb-4"},"Users"),d,r.a.createElement(Wt.a,{onClick:function(e){u(l)}},"Save admins"))}));var Cn={saveExercise:M,removeExercise:K},Tn=Object(o.c)((function(e){return{status:e.addExercise.status,error:e.addExercise.error,containsErrors:Se(e),title:be(e).value}}),Cn)((function(e){var t=e.status,a=e.error,n=e.title,i=e.containsErrors,c=e.removeExercise,o=e.saveExercise,s=null;return"idle"===t?s=r.a.createElement(Zt.a,null,r.a.createElement("h1",null,"Editing ",r.a.createElement("i",null,n)),r.a.createElement(sn,null),r.a.createElement(dn,null),r.a.createElement(Xa,null),r.a.createElement(rn,null),r.a.createElement(la.a,{className:"justify-content-end"},r.a.createElement(ua.a,{xs:12,md:{order:2,span:4}},r.a.createElement(mn,{containsErrors:i,saveExercise:o})),r.a.createElement(ua.a,{xs:12,md:{order:1,span:4,offset:4},className:"text-center"},r.a.createElement(Wt.a,{variant:"outline-danger",size:"lg",onClick:c},"Remove exercise")))):"loading"===t?s=r.a.createElement(Xt.a,{animation:"border",variant:"primary"}):"succeeded"===t?s=r.a.createElement(Kt.a,{variant:"success"},"Exercise was successfully changed in the database."):"removed"===t?s=r.a.createElement(Kt.a,{variant:"success"},"Exercise  was successfully removed from database."):"failed"===t&&(s=r.a.createElement(Kt.a,{variant:"danger"},a)),s}));var An={fetchSavedExercise:Q},In=Object(o.c)(null,An)((function(e){var t=e.fetchSavedExercise,a=Tt(void 0,{refetchOnMountOrArgChange:!0}),n=a.data,i=a.isLoading,c=a.isSuccess,o=a.isError,s=a.error,l=null;if(i)l=r.a.createElement(Xt.a,{animation:"border",variant:"primary"});else if(c){var u=n.map((function(e){return r.a.createElement(na.a.Item,{as:Qt.b,to:"/edit/".concat(e.exercise_id),key:e.exercise_id,action:!0,onClick:function(){return t(e.exercise_id)}},e.title)}));l=r.a.createElement(na.a,null,u)}else o&&(l=r.a.createElement(ra,{error:s}));return r.a.createElement("div",null,r.a.createElement("h1",{className:"mb-4"},"Edit exercises"),l)})),Ln=function(){var e,t=At(void 0,{refetchOnMountOrArgChange:!0}),a=t.data,n=t.isLoading,i=t.isSuccess,c=t.isError,o=t.error;if(n)e=r.a.createElement(Xt.a,{animation:"border",variant:"primary"});else if(i){var s=a.map((function(e){return r.a.createElement("tr",{key:e.exercise_id},r.a.createElement("td",null,r.a.createElement(Qt.b,{to:"/bad_formalizations/".concat(e.exercise_id),key:e.exercise_id},e.title)),r.a.createElement("td",null,e.bad_formalizations),r.a.createElement("td",null,e.students))}));e=r.a.createElement(oa.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Exercise"),r.a.createElement("th",null,"Bad formalizations"),r.a.createElement("th",null,"Students"))),r.a.createElement("tbody",null,s))}else c&&(e=r.a.createElement(ra,{error:o}));return r.a.createElement("div",null,r.a.createElement("h2",{className:"mb-4"},"Bad formalizations"),e)},Vn=function(e){var t,a,n,i=e.match.params.exercise_id,c=It(i),o=c.data,s=c.isFetching,l=c.isSuccess,u=c.isError,d=c.error;if(s)t=r.a.createElement(Xt.a,{animation:"border",variant:"primary"});else if(l){a=o.propositions,n=o.title1;var m=a.map((function(e){return r.a.createElement("tr",{key:e.proposition},r.a.createElement("td",null,r.a.createElement(Qt.b,{to:"/bad_formalizations/".concat(i,"/").concat(e.proposition_id),key:e.proposition_id},e.proposition)),r.a.createElement("td",null,e.bad_formalizations),r.a.createElement("td",null,e.students))}));t=r.a.createElement(oa.a,{striped:!0,bordered:!0,hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Proposition"),r.a.createElement("th",null,"Bad formalizations"),r.a.createElement("th",null,"Students"))),r.a.createElement("tbody",null,m))}else u&&(t=r.a.createElement(ra,{error:d}));return r.a.createElement("div",null,r.a.createElement("h2",{className:"mb-4"},n),t)},Pn=a(132),Un=a(126),qn=a(60),Gn=function(e){var t=e.bad_formalization_id,a=Object(n.useState)(""),i=Object(v.a)(a,2),c=i[0],o=i[1],s=Gt(),l=Object(v.a)(s,1)[0],u=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(""),e.next=3,l({feedback:c,bad_formalization_id:t}).unwrap();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"clearfix mt-2"},r.a.createElement("h6",{className:"my-2 px-4"},"Add feedback"),r.a.createElement(Zt.a.Group,{className:"clearfix px-4 pb-1"},r.a.createElement(Zt.a.Control,{className:"mr-2",type:"text",as:"textarea",rows:2,placeholder:"Enter feedback",value:c,onChange:function(e){return o(e.target.value)}}),r.a.createElement(Wt.a,{className:"mt-2 float-right",variant:"primary",size:"sm",onClick:u},"Add")))},Bn=function(e){var t=e.value,a=e.id,i=e.bad_formalization_id,c=Bt(),o=Object(v.a)(c,1)[0],s=Object(n.useState)(t),l=Object(v.a)(s,2),u=l[0],d=l[1];Object(n.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===u){e.next=3;break}return e.next=3,o({id:a,bad_formalization_id:i,isActive:u});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[u]);return r.a.createElement(Zt.a.Check,{inline:!0,type:"checkbox",label:"Active",name:a,checked:u,onChange:function(){d(!u)}})},Wn=function(e){var t,a=e.i,n=e.bad_formalization_id,i=Ut(n),c=i.data,o=i.isFetching,s=i.isSuccess,l=i.isError,u=i.error;return o?t=r.a.createElement(Xt.a,{animation:"border",variant:"primary"}):s?t=c.map((function(e){var t,a,i;e.likes_users.length>0&&(t=e.likes_users.map((function(e){return r.a.createElement("div",null,e.user_name)}))),e.dislikes_users.length>0&&(a=e.dislikes_users.map((function(e){return r.a.createElement("div",null,e.user_name)}))),e.shown_users.length>0&&(i=e.shown_users.map((function(e){return r.a.createElement("div",null,e.user_name)})));var c=e.likes>0?r.a.createElement(Un.a,{placement:"top",overlay:r.a.createElement(qn.a,{id:"tooltip"},t)},r.a.createElement("span",null,r.a.createElement(pa.a,null),e.likes)):r.a.createElement("span",null,r.a.createElement(pa.a,null),e.likes),o=e.dislikes>0?r.a.createElement(Un.a,{placement:"top",overlay:r.a.createElement(qn.a,{id:"tooltip"},a)},r.a.createElement("span",null,r.a.createElement(fa.a,null),e.dislikes)):r.a.createElement("span",null,r.a.createElement(fa.a,null),e.dislikes),s=e.shown>0?r.a.createElement(Un.a,{placement:"top",overlay:r.a.createElement(qn.a,{id:"tooltip"},i)},r.a.createElement("span",null,e.shown)):r.a.createElement("span",null,e.shown);return r.a.createElement(na.a.Item,{as:"li",id:e.feedback_id},r.a.createElement("div",{className:"d-flex justify-content-between"},e.author,r.a.createElement(Bn,{id:e.feedback_id,value:e.active,bad_formalization_id:n})),r.a.createElement("div",null,e.feedback),r.a.createElement("div",null,"shown: ",s,", rating: ",c,", ",o))})):l&&(t=r.a.createElement(ra,{as:na.a.Item,error:u})),r.a.createElement("div",{className:"clearfix"},r.a.createElement("h5",{className:"mt-2 px-4"},"Feedback"),r.a.createElement(na.a,{as:"ol",className:"list-group-flush border-top border-bottom"},t),r.a.createElement(Gn,{key:a,bad_formalization_id:n}))},Rn=function(e){var t,a=e.i,n=e.bad_formalization_id,i=e.exercise_id,c=e.students,o=Vt({exercise_id:i,bad_formalization_id:n}),s=o.data,l=o.isFetching,u=o.isSuccess,d=o.isError,m=o.error;if(l)t=r.a.createElement(Xt.a,{animation:"border",variant:"primary"});else if(u){var p,f=c.map((function(e){return r.a.createElement(xn.a,{to:"/progress/".concat(i,"/").concat(e.user_name,"#").concat(e.solution_id),key:e.user_name,className:"my-0 pl-4 text-muted d-block"},e.user_name)}));if(null!==s.bad_solutions){var E=s.bad_solutions.map((function(e){return r.a.createElement(Pn.a.Text,{className:"my-1 pl-4 text-muted"},e.solution)}));p=r.a.createElement("details",null,r.a.createElement("summary",{className:"mt-2"},s.bad_solutions.length," equivalent bad formalization(s)"),E)}t=r.a.createElement("div",null,r.a.createElement(Pn.a.Body,{className:"pt-4 pb-0 px-4"},r.a.createElement("h5",{className:"card-title"},s.bad_formalization),r.a.createElement("details",null,r.a.createElement("summary",{className:"mt-2"},"students: ",c.length),f),p),r.a.createElement(Wn,{key:a,i:a,bad_formalization_id:n}))}else d&&(t=r.a.createElement(ra,{error:m}));return r.a.createElement(Pn.a,null,t)},Dn=function(e){var t,a,n,i=e.match.params,c=i.exercise_id,o=i.proposition_id,s=Lt({exercise_id:c,proposition_id:o}),l=s.data,u=s.isFetching,d=s.isSuccess,m=s.isError,p=s.error,f=null;if(u)t=r.a.createElement(Xt.a,{animation:"border",variant:"primary"});else if(d){a=l.title1,n=l.title2;var E=l.formalizations,b=l.bad_formalizations;f=E.map((function(e){return r.a.createElement("h5",{className:"mb-1"},e.formalization)})),t=b.map((function(e,t){return r.a.createElement("div",{className:"m-2 mb-3"},r.a.createElement(Rn,{key:t,i:t,bad_formalization_id:e.bad_formalization_id,exercise_id:c,students:e.students}))}))}else m&&(t=r.a.createElement(ra,{error:p}));return r.a.createElement("div",null,r.a.createElement("h2",{className:"mb-3"},a),r.a.createElement("h3",{className:"mb-2"},n),r.a.createElement("div",{className:"mb-4"},r.a.createElement("p",{className:"mb-0"},"correct formalization(s) "),f),t)};var Mn={logOut:vt,changeStatus:ue},Kn=Object(o.c)((function(e){return{isLoggedIn:e.user.isLoggedIn,isAdmin:e.user.isAdmin,user:e.user.user}}),Mn)((function(e){var t=e.isLoggedIn,a=e.user,n=e.logOut,i=(e.changeStatus,e.isAdmin),c=null;return c=t?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"px-4 my-auto text-info"},"You are logged in as ",r.a.createElement("b",null,a.username)),r.a.createElement(Wt.a,{as:Qt.b,to:"/",onClick:function(){return n()}},"Log out")):r.a.createElement(Wt.a,{as:Qt.b,to:"/login"},"Log in"),i?r.a.createElement(Qt.a,{basename:ea.BASE_NAME},r.a.createElement("div",{className:"App"},r.a.createElement(Rt.a,{bg:"dark",variant:"dark",sticky:"top"},r.a.createElement(Dt.a,{className:"mr-auto"},r.a.createElement(Dt.a.Link,{className:"px-4",as:Qt.b,to:"/"},"Home"),r.a.createElement(Dt.a.Link,{className:"px-4",as:Qt.b,to:"/add"},"Add"),r.a.createElement(Dt.a.Link,{className:"px-4",as:Qt.b,to:"/edit"},"Edit"),r.a.createElement(Dt.a.Link,{className:"px-4",as:Qt.b,to:"/progress"},"Student progress"),r.a.createElement(Dt.a.Link,{className:"px-4",as:Qt.b,to:"/bad_formalizations"},"Bad formalizations"),r.a.createElement(Dt.a.Link,{className:"px-4",as:Qt.b,to:"/admins"},"Admin")),r.a.createElement(Dt.a,null,c)),r.a.createElement(Mt.a,{className:"my-3"},r.a.createElement(Yt.d,null,r.a.createElement($t,{exact:!0,path:"/",component:ca}),r.a.createElement(bn,{exact:!0,path:"/admins",component:Fn}),r.a.createElement(bn,{exact:!0,path:"/progress",component:vn}),r.a.createElement(bn,{exact:!0,path:"/progress/:exercise_id",component:wn}),r.a.createElement(bn,{exact:!0,path:"/progress/:exercise_id/:user_name",component:kn}),r.a.createElement(Yt.b,{exact:!0,path:"/login",component:aa}),r.a.createElement($t,{path:"/solve/:id",component:Va}),r.a.createElement(bn,{exact:!0,path:"/add",component:fn}),r.a.createElement(bn,{exact:!0,path:"/edit",component:In}),r.a.createElement(bn,{exact:!0,path:"/edit/:id",component:Tn}),r.a.createElement(bn,{exact:!0,path:"/bad_formalizations",component:Ln}),r.a.createElement(bn,{exact:!0,path:"/bad_formalizations/:exercise_id",component:Vn}),r.a.createElement(bn,{exact:!0,path:"/bad_formalizations/:exercise_id/:proposition_id",component:Dn}),r.a.createElement(Yt.b,{path:"*",component:function(){return r.a.createElement(Kt.a,{variant:"danger"},"404 Not Found")}}))))):r.a.createElement(Qt.a,{basename:ea.BASE_NAME},r.a.createElement("div",{className:"App"},r.a.createElement(Rt.a,{bg:"dark",variant:"dark",sticky:"top"},r.a.createElement(Dt.a,{className:"mr-auto"},r.a.createElement(Dt.a.Link,{className:"px-4",as:Qt.b,to:"/"},"Home"),r.a.createElement(Dt.a.Link,{className:"px-4",as:Qt.b,to:"/progress"},"Your progress")),r.a.createElement(Dt.a,null,c)),r.a.createElement(Mt.a,{className:"my-3"},r.a.createElement(Yt.d,null,r.a.createElement($t,{exact:!0,path:"/",component:ca}),r.a.createElement(Yt.b,{exact:!0,path:"/login",component:aa}),r.a.createElement($t,{path:"/solve/:id",component:Va}),r.a.createElement($t,{exact:!0,path:"/progress",component:Sn}),r.a.createElement($t,{exact:!0,path:"/progress/:exercise_id/:user_name",component:kn}),r.a.createElement(Yt.b,{path:"*",component:function(){return r.a.createElement(Kt.a,{variant:"danger"},"404 Not Found")}})))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Qn=function(e){var t,a;return Object(l.a)({reducer:(t={addExercise:Ne,propositions:Be,allUsers:St,solveExercise:at,user:gt,backend:(a=e,Object(l.d)({name:"backend",initialState:{url:a}}).reducer)},Object(s.a)(t,Ct.reducerPath,Ct.reducer),Object(s.a)(t,Pt.reducerPath,Pt.reducer),t),middleware:function(e){return e().concat(Ct.middleware,Pt.middleware)}})}(ea.BACKEND_URL);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:Qn},r.a.createElement(Kn,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},32:function(e,t,a){a(103).config(),e.exports={BACKEND_URL:"https://student.dai.fmph.uniba.sk/services/formalization-checker",CLIENT_ID:"440fde1ff83dc0bb86f6",REDIRECT:"https://fmfi-uk-1-ain-412.github.io/formalization-checker/login",BASE_NAME:"/formalization-checker"}},75:function(e,t,a){e.exports=a(108)},85:function(e,t,a){},99:function(e,t,a){}},[[75,1,2]]]);
//# sourceMappingURL=main.ee0c3066.chunk.js.map