(this["webpackJsonp@fmfi-uk-1-ain-412/formalization-checker"]=this["webpackJsonp@fmfi-uk-1-ain-412/formalization-checker"]||[]).push([[0],{26:function(e,t,a){a(89).config(),e.exports={BACKEND_URL:"https://student.dai.fmph.uniba.sk/services/formalization-checker",CLIENT_ID:"440fde1ff83dc0bb86f6",REDIRECT:"https://fmfi-uk-1-ain-412.github.io/formalization-checker/login",BASE_NAME:"/formalization-checker"}},61:function(e,t,a){e.exports=a(93)},71:function(e,t,a){},85:function(e,t,a){},93:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(22),o=a.n(i),s=a(5),c=(a(71),a(8)),u=a(25),l=a(6),d=a(7),m=a.n(d),p=a(11),f=a(40),E=a(18),v=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return function(){var r=Object(p.a)(m.a.mark((function r(n,i){var o,s,c;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o={method:t,headers:{"Content-Type":"application/json"}},void 0!==localStorage.getItem("formalization_checker_token")&&(o.headers.Authorization="Bearer "+localStorage.getItem("formalization_checker_token")),a&&(o.body=JSON.stringify(a)),s=i().backend.url,r.next=6,fetch(s+e,o);case 6:if(!(c=r.sent).ok){r.next=9;break}return r.abrupt("return",c.json());case 9:throw new Error(c.status+" "+c.statusText);case 10:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},b=a(34),h=a(48),g=a(30),x=a(29),j=a(14),y=a(28),O=function(){function e(t,a){Object(j.a)(this,e),this.lhs=t,this.rhs=a}return Object(y.a)(e,[{key:"getFreeVariables",value:function(){return P(this.lhs.getFreeVariables(),this.rhs.getFreeVariables())}}]),e}(),k=function(){function e(t,a){Object(j.a)(this,e),this.originalSymbol=t,this.subf=a}return Object(y.a)(e,[{key:"getFreeVariables",value:function(){var e=this.subf.getFreeVariables();return e.delete(this.originalSymbol),e}}]),e}(),w=function(){function e(t){Object(j.a)(this,e),this.originalSymbol=t}return Object(y.a)(e,[{key:"getFreeVariables",value:function(){return new Set([this.originalSymbol])}}]),e}(),_=function(){function e(t){Object(j.a)(this,e),this.originalSymbol=t}return Object(y.a)(e,[{key:"getFreeVariables",value:function(){return new Set}}]),e}(),S=function(){function e(t,a){Object(j.a)(this,e),this.originalSymbol=t,this.args=a}return Object(y.a)(e,[{key:"getFreeVariables",value:function(){return this.args.reduce((function(e,t){return P(e,t.getFreeVariables())}),new Set)}}]),e}(),z=function(){function e(t,a){Object(j.a)(this,e),this.originalSymbol=t,this.args=a}return Object(y.a)(e,[{key:"getFreeVariables",value:function(){return this.args.reduce((function(e,t){return P(e,t.getFreeVariables())}),new Set)}}]),e}(),C=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return a}(O),N=function(){function e(t){Object(j.a)(this,e),this.subf=t}return Object(y.a)(e,[{key:"getFreeVariables",value:function(){return this.subf.getFreeVariables()}}]),e}(),T=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return a}(O),I=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return a}(O),A=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return a}(O),F=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return a}(O),V=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return a}(k),L=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(j.a)(this,a),t.apply(this,arguments)}return a}(k);function P(e,t){return t.forEach((function(t){return e.add(t)})),e}var U,W=function(e){var t,a=new Map,r=Object(u.a)(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;a.has(n.name)||a.set(n.name,n.arity)}}catch(i){r.e(i)}finally{r.f()}return a},G=function(e,t){try{return{array:t(e),error:null}}catch(a){return{array:[],error:a}}},D=function(e,t,a,r){var n=r.expected,i=a.get(e);t.length!==i&&n("".concat(i," argument").concat(1===i?"":"s"," to ").concat(e))},R=function(e,t,a,r,n){var i=new Set([].concat(Object(h.a)(t),Object(h.a)(a.keys()),Object(h.a)(r.keys()))),o={isConstant:function(e){return t.has(e)},isPredicate:function(e){return a.has(e)},isFunction:function(e){return r.has(e)},isVariable:function(e){return!i.has(e)}},s={functionApplication:function(e,t,a){return D(e,t,r,a),new S(e,t)},predicateAtom:function(e,t,r){return D(e,t,a,r),new z(e,t)},variable:function(e,t){return new w(e,e)},constant:function(e,t){return new _(e,e)},equalityAtom:function(e,t,a){return new C(e,t)},negation:function(e,t){return new N(e)},conjunction:function(e,t,a){return new T(e,t)},disjunction:function(e,t,a){return new I(e,t)},implication:function(e,t,a){return new A(e,t)},equivalence:function(e,t,a){return new F(e,t)},existentialQuant:function(e,t,a){return new V(e,t)},universalQuant:function(e,t,a){return new L(e,t)}};try{var c=n(e,o,s).getFreeVariables();if(c.size>0)throw{location:{start:{column:0,line:0,offset:0},end:{column:0,line:0,offset:e.length}},message:"The formula should be closed, but the following\n          variable".concat(1===c.size?" is":"s are"," free:\n          ").concat(Array.from(c).join(", "),".")};return null}catch(u){return u}},B=function(e,t,a){return e?{D:Array.from(new Set(Object.values(e))).sort(),iC:Object.fromEntries(Object.entries(e).filter((function(e){var t=Object(b.a)(e,2),r=t[0];t[1];return a.has(r)}))),iP:t,iF:null}:void 0},M=Object(c.b)("addExercise/addNewExercise",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.dispatch,n=a.getState,i=a.rejectWithValue,o=ze(n())){e.next=4;break}return e.abrupt("return",i("Exercise contains errors."));case 4:return e.prev=4,e.next=7,r(v("/api/exercises","POST",o));case 7:return s=e.sent,e.abrupt("return",s);case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",i(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,a){return e.apply(this,arguments)}}()),K=Object(c.b)("saveExercise",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.dispatch,n=a.getState,i=a.rejectWithValue,o=ze(n())){e.next=4;break}return e.abrupt("return",i("Exercise contains errors."));case 4:return e.prev=4,e.next=7,r(v("/api/exercises/edit","POST",o));case 7:return s=e.sent,e.abrupt("return",s);case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",i(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,a){return e.apply(this,arguments)}}()),q=Object(c.b)("saveExercise",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.dispatch,n=a.getState,i=a.rejectWithValue,o=ze(n())){e.next=4;break}return e.abrupt("return",i("Exercise contains errors."));case 4:return e.prev=4,e.next=7,r(v("/api/exercises/edit/remove","POST",o));case 7:return s=e.sent,e.abrupt("return",s);case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",i(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,a){return e.apply(this,arguments)}}()),Y=Object(c.b)("fetchSavedExercise",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.dispatch,a.getState,n=a.rejectWithValue,e.prev=1,e.next=4,r(v("/api/exercises/edit/".concat(t),"GET"));case 4:return i=e.sent,e.abrupt("return",i);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",n(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),J=Object(c.b)("fetchExercise",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.dispatch,n=a.rejectWithValue,e.prev=1,e.next=4,r(v("/api/exercises/".concat(t),"GET"));case 4:return i=e.sent,e.abrupt("return",i);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",n(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),H=Object(c.c)({name:"addExercise",initialState:{title:"",description:"",constants:"",predicates:"",functions:"",constraint:"",id:"",propositions:[{proposition:"",proposition_id:"",formalizations:[""],constraints:[""]}],status:"idle",error:null,added:null},reducers:{updateExerciseTitle:function(e,t){e.title=t.payload},updateDescription:function(e,t){e.description=t.payload},updateConstants:function(e,t){e.constants=t.payload},updatePredicates:function(e,t){e.predicates=t.payload},updateFunctions:function(e,t){e.functions=t.payload},updateConstraint:function(e,t){e.constraint=t.payload},updateInformalValue:{reducer:function(e,t){var a=t.payload,r=a.value,n=a.i;e.propositions[n].proposition=r},prepare:function(e,t){return{payload:{value:e,i:t}}}},updateFormalization:{reducer:function(e,t){var a=t.payload,r=a.value,n=a.i,i=a.j;e.propositions[n].formalizations[i]=r},prepare:function(e,t,a){return{payload:{value:e,i:t,j:a}}}},addNewProposition:function(e){e.propositions.push({proposition:"",formalizations:[""],constraints:[""]})},addNewFormalization:function(e,t){var a=t.payload;e.propositions[a].formalizations.push(""),e.propositions[a].constraints.push("")},removeProposition:function(e,t){var a=t.payload;e.propositions.splice(a,1)},removeFormalization:{reducer:function(e,t){var a=t.payload,r=a.i,n=a.j;e.propositions[r].formalizations.splice(n,1),e.propositions[r].constraints.splice(n,1)},prepare:function(e,t){return{payload:{i:e,j:t}}}},updateConstraints:{reducer:function(e,t){var a=t.payload,r=a.value,n=a.i,i=a.j;e.propositions[n].constraints[i]=r},prepare:function(e,t,a){return{payload:{value:e,i:t,j:a}}}},changeStatus:{reducer:function(e,t){e.added=null,e.status="idle",e.title="",e.description="",e.constants="",e.predicates="",e.functions="",e.constraint="",e.id="",e.propositions=[{proposition:"",proposition_id:"",formalizations:[""],constraints:[""]}]}}},extraReducers:(U={},Object(l.a)(U,M.pending,(function(e,t){e.status="loading"})),Object(l.a)(U,M.fulfilled,(function(e,t){e.added=!0,e.title="",e.description="",e.constants="",e.predicates="",e.functions="",e.constraint="",e.propositions=[{proposition:"",formalizations:[""],constraints:[""]}],e.status="idle"})),Object(l.a)(U,M.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(l.a)(U,K.pending,(function(e,t){e.status="loading"})),Object(l.a)(U,K.fulfilled,(function(e,t){e.status="succeeded",e.title="",e.description="",e.constants="",e.predicates="",e.functions="",e.constraint="",e.id="",e.propositions=[{proposition:"",proposition_id:"",formalizations:[""],constraints:[""]}]})),Object(l.a)(U,K.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(l.a)(U,q.pending,(function(e,t){e.status="loading"})),Object(l.a)(U,q.fulfilled,(function(e,t){e.status="removed",e.title="",e.description="",e.constants="",e.predicates="",e.functions="",e.constraint="",e.id="",e.propositions=[{proposition:"",proposition_id:"",formalizations:[""],constraints:[""]}]})),Object(l.a)(U,q.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(l.a)(U,J.pending,(function(e,t){e.status="loading"})),Object(l.a)(U,J.fulfilled,(function(e,t){e.status="succeeded"})),Object(l.a)(U,J.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(l.a)(U,Y.pending,(function(e,t){e.status="loading"})),Object(l.a)(U,Y.fulfilled,(function(e,t){e.status="idle";var a=t.payload;e.title=a.title,e.description=a.description,e.constants=a.constants,e.predicates=a.predicates,e.functions=a.functions,e.constraint=void 0===a.constraints?"":a.constraints,e.id=a.exercise_id,e.propositions=[];for(var r=0;r<a.propositions.length;r++){for(var n=[],i=[],o=0;o<a.propositions[r].formalization.length;o++)n.push(a.propositions[r].formalization[o].formalization),i.push(a.propositions[r].formalization[o].constraints);e.propositions.push({proposition:a.propositions[r].proposition,proposition_id:a.propositions[r].proposition_id,formalizations:n,constraints:i})}})),Object(l.a)(U,Y.rejected,(function(e,t){e.status="failed",e.error=t.payload})),U)}),Q=H.actions,$=Q.updateExerciseTitle,X=Q.updateDescription,Z=Q.updateConstants,ee=Q.updatePredicates,te=Q.updateFunctions,ae=Q.updateInformalValue,re=Q.updateFormalization,ne=Q.addNewProposition,ie=Q.addNewFormalization,oe=Q.removeProposition,se=Q.removeFormalization,ce=Q.updateConstraints,ue=Q.updateConstraint,le=Q.changeStatus;function de(e,t){var a,r=new Set,n=Object(u.a)(e);try{for(n.s();!(a=n.n()).done;){var i=a.value;if(r.has(i))return"Found duplicate symbol: '".concat(i,"' in ").concat(t);r.add(i)}}catch(o){n.e(o)}finally{n.f()}return null}var me,pe,fe,Ee,ve,be=function(e){return{value:e.addExercise.title}},he=Object(f.a)([function(e){return e.addExercise.constants}],(function(e){var t=G(e,E.parseConstants);return{value:e,array:t.array,error:t.error}})),ge=Object(f.a)([function(e){return e.addExercise.predicates}],(function(e){var t=G(e,E.parsePredicates);return{value:e,array:t.array,error:t.error}})),xe=Object(f.a)([function(e){return e.addExercise.functions}],(function(e){var t=G(e,E.parseFunctions);return{value:e,array:t.array,error:t.error}})),je=Object(f.a)([he,ge,xe],(function(e,t,a){var r=new Set(e.array),n=W(t.array),i=W(a.array),o=e.error||t.error||a.error,s=de(e.array,"constants")||de(t.array.map((function(e){return e.name})),"predicates")||de(a.array.map((function(e){return e.name})),"functions"),c=null;return c=o?"Language definition contains errors":s||function(e,t,a){var r,n=Object(u.a)(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(t.has(i))return"Found clash in language definition: '".concat(i,"' in constants and predicates");if(a.has(i))return"Found clash in language definition: '".concat(i,"' in constants and functions")}}catch(l){n.e(l)}finally{n.f()}var o,s=Object(u.a)(t.keys());try{for(s.s();!(o=s.n()).done;){var c=o.value;if(a.has(c))return"Found clash in language definition: '".concat(c,"' in predicates and functions")}}catch(l){s.e(l)}finally{s.f()}return null}(r,n,i),{constants:r,predicates:n,functions:i,errorMessage:c}})),ye=function(e){return e.addExercise.propositions},Oe=function(e,t){return e.addExercise.propositions[t].formalizations},ke=function(e,t){return e.addExercise.propositions[t].proposition},we=Object(f.a)([function(e,t,a){return e.addExercise.propositions[t].formalizations[a]},function(e,t,a){return je(e)}],(function(e,t){return{value:e,error:R(e,t.constants,t.predicates,t.functions,E.parseFormulaWithPrecedence)}})),_e=Object(f.a)([function(e,t,a){return e.addExercise.propositions[t].constraints[a]},function(e,t,a){return je(e)}],(function(e,t){return""===e?{value:e,error:""}:{value:e,error:R(e,t.constants,t.predicates,t.functions,E.parseFormulaWithPrecedence)}})),Se=Object(f.a)([function(e){return e.addExercise.constraint},function(e){return je(e)}],(function(e,t){return""===e?{value:e,error:""}:{value:e,error:R(e,t.constants,t.predicates,t.functions,E.parseFormulaWithPrecedence)}})),ze=function(e){if(je(e).errorMessage||""===be(e).value)return null;for(var t=ye(e),a=0;a<t.length;a++){if(""===t[a].proposition)return null;for(var r=t[a].formalizations,n=0;n<r.length;n++){if(we(e,a,n).error)return null;if(_e(e,a,n).error)return null}}return{title:e.addExercise.title,description:e.addExercise.description,constants:e.addExercise.constants,predicates:e.addExercise.predicates,functions:e.addExercise.functions,constraint:e.addExercise.constraint,id:e.addExercise.id,propositions:e.addExercise.propositions}},Ce=function(e){return!ze(e)},Ne=H.reducer,Te=Object(c.b)("exercises/fetchAllExercises",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.dispatch,n=a.rejectWithValue,e.prev=1,e.next=4,r(v("/api/exercises","GET"));case 4:return i=e.sent,e.abrupt("return",i);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",n(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),Ie=Object(c.c)({name:"exercises",initialState:{exercises:[],status:"idle",error:null},reducers:{changeExerciseStatus:{reducer:function(e,t){e.added=null,e.status="idle"}}},extraReducers:(me={},Object(l.a)(me,Te.pending,(function(e,t){e.status="loading"})),Object(l.a)(me,Te.fulfilled,(function(e,t){e.status="succeeded",e.exercises=t.payload})),Object(l.a)(me,Te.rejected,(function(e,t){e.status="failed",e.error=t.payload})),me)}),Ae=Ie.actions.changeExerciseStatus,Fe=function(e){return e.exercises.exercises},Ve=function(e){return e.exercises.status},Le=function(e){return e.exercises.error},Pe=Ie.reducer,Ue=Object(c.b)("exercises/fetchAllUsersToExercise",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.dispatch,n=a.rejectWithValue,e.prev=1,e.next=4,r(v("/api/exercises/progress/".concat(t),"GET"));case 4:return i=e.sent,e.abrupt("return",i);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",n(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),We=Object(c.b)("exercises/fetchUsersSolutions",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.exercise_id,n=t.user_name,i=a.dispatch,o=a.rejectWithValue,e.prev=2,e.next=5,i(v("/api/exercises/progress/user/".concat(n,"/").concat(r),"GET"));case 5:return s=e.sent,e.abrupt("return",s);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",o(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}()),Ge=Object(c.c)({name:"users",initialState:{users:[],status:"idle",error:null,solutions:[],exercise_id:null,user:""},reducers:{},extraReducers:(pe={},Object(l.a)(pe,Ue.pending,(function(e,t){e.status="loading",e.exercise_id=t.meta.arg})),Object(l.a)(pe,Ue.fulfilled,(function(e,t){e.status="succeeded",e.users=t.payload})),Object(l.a)(pe,Ue.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(l.a)(pe,We.pending,(function(e,t){e.status="loading",e.user=t.meta.arg.user_name})),Object(l.a)(pe,We.fulfilled,(function(e,t){e.status="succeeded",e.solutions=t.payload})),Object(l.a)(pe,We.rejected,(function(e,t){e.status="failed",e.error=t.payload})),pe)}),De=function(e){return e.propositions.users},Re=function(e){for(var t=0;t<e.exercises.exercises.length;t++)if(e.exercises.exercises[t].exercise_id===e.propositions.exercise_id)return e.exercises.exercises[t].title;return null},Be=function(e){return e.propositions.solutions},Me=function(e){return e.propositions.user},Ke=function(e){return e.propositions.status},qe=function(e){return e.propositions.status},Ye=Ge.reducer,Je=Object(c.b)("solveExercise/fetchExercise",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.exercise_id,n=t.user_name,i=a.dispatch,o=a.rejectWithValue,e.prev=2,e.next=5,i(v("/api/exercises/".concat(r),"POST",{username:n}));case 5:return s=e.sent,e.abrupt("return",s);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",o(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}()),He=Object(c.b)("solveExercise/evaluate",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i,o,s,c,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.exercise_id,n=t.proposition_id,i=t.solution,o=t.user,s=a.dispatch,c=a.rejectWithValue,e.prev=2,e.next=5,s(v("/api/exercises/".concat(r,"/").concat(n),"POST",{solution:i,user:o}));case 5:return u=e.sent,e.abrupt("return",u);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",c(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}()),Qe=Object(c.c)({name:"solveExercise",initialState:{exercise:null,status:"idle",error:null,constants:[],predicates:[],functions:[],solutions:{}},reducers:{update:{reducer:function(e,t){var a=t.payload,r=a.value,n=a.id;e.solutions[n].solution=r},prepare:function(e,t){return{payload:{value:e,id:t}}}}},extraReducers:(fe={},Object(l.a)(fe,Je.pending,(function(e,t){e.status="loading"})),Object(l.a)(fe,Je.fulfilled,(function(e,t){e.status="succeeded",e.exercise=t.payload,e.constants=Object(E.parseConstants)(e.exercise.constants),e.predicates=Object(E.parsePredicates)(e.exercise.predicates),e.functions=Object(E.parseFunctions)(e.exercise.functions);var a,r=Object(u.a)(e.exercise.propositions);try{for(r.s();!(a=r.n()).done;){var n=a.value;e.solutions[n.proposition_id]={evaluation:null,status:"idle",error:null},null===n.solution||void 0===n.solution?e.solutions[n.proposition_id].solution="":e.solutions[n.proposition_id].solution=n.solution}}catch(i){r.e(i)}finally{r.f()}})),Object(l.a)(fe,Je.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(l.a)(fe,He.pending,(function(e,t){var a=t.meta.arg.proposition_id;e.solutions[a].status="loading"})),Object(l.a)(fe,He.fulfilled,(function(e,t){var a=t.meta.arg.proposition_id,r=t.payload,n=e.solutions[a];n.status="succeeded",n.evaluation=r})),Object(l.a)(fe,He.rejected,(function(e,t){var a=t.meta.arg.proposition_id,r=t.payload.error,n=e.solutions[a];n.status="failed",n.error=r})),fe)}),$e=Qe.actions.update,Xe=function(e){return e.solveExercise.exercise},Ze=function(e){return e.solveExercise.status},et=function(e){return e.solveExercise.error},tt=function(e,t){return e.solveExercise.solutions[t].evaluation},at=function(e,t){return e.solveExercise.solutions[t].status},rt=function(e,t){return e.solveExercise.solutions[t].error},nt=Qe.reducer,it=a(47),ot=Object(c.b)("user/logIn",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i,o,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.username,n=t.password,i=a.dispatch,o=a.rejectWithValue,e.prev=2,(s={}).username=r,s.password=n,e.next=8,i(v("/api/exercises/logIn","POST",s));case 8:return c=e.sent,e.abrupt("return",c);case 12:return e.prev=12,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",o(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,a){return e.apply(this,arguments)}}()),st=Object(c.b)("user/logInGithub",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i,o,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.code,n=t.token,i=a.dispatch,o=a.rejectWithValue,e.prev=2,s={},void 0!==r?s.code=r:void 0!==n&&(s.token=n),e.next=7,i(v("/api/exercises/logIn/github/auth","POST",s));case 7:return c=e.sent,e.abrupt("return",c);case 11:return e.prev=11,e.t0=e.catch(2),console.error(e.t0.message),e.abrupt("return",o(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a){return e.apply(this,arguments)}}()),ct=Object(c.c)({name:"user",initialState:{isLoggedIn:!1,isAdmin:!1,user:null,status:"idle",error:null,usernameValue:"",passwordValue:""},reducers:{updateUsername:function(e,t){e.usernameValue=t.payload},updatePassword:function(e,t){e.passwordValue=t.payload},logOut:function(e){localStorage.removeItem("token"),e.isLoggedIn=!1,e.user=null,e.status="idle",e.error=""},setUser:function(e){var t=JSON.parse(it.Buffer.from(localStorage.getItem("formalization_checker_token").split(".")[1],"base64").toString());e.user={username:t.username},e.isLoggedIn=!0,e.isAdmin=t.isAdmin}},extraReducers:(Ee={},Object(l.a)(Ee,ot.pending,(function(e,t){e.status="loading"})),Object(l.a)(Ee,ot.fulfilled,(function(e,t){if(e.status="succeeded",e.usernameValue="",e.passwordValue="",t.payload){var a=JSON.parse(it.Buffer.from(t.payload.token.split(".")[1],"base64").toString());e.user={username:a.username},e.isLoggedIn=!0,e.isAdmin=a.isAdmin,localStorage.formalization_checker_token=t.payload.token}else e.error=""})),Object(l.a)(Ee,ot.rejected,(function(e,t){e.status="failed",e.error="No such combination of username and password found."})),Object(l.a)(Ee,st.pending,(function(e,t){e.status="loading"})),Object(l.a)(Ee,st.fulfilled,(function(e,t){if(e.status="succeeded",e.usernameValue="",e.passwordValue="",t.payload){var a=JSON.parse(it.Buffer.from(t.payload.token.split(".")[1],"base64").toString());e.user={username:a.username},e.isLoggedIn=!0,e.isAdmin=a.isAdmin,localStorage.setItem("formalization_checker_token",t.payload.token)}else e.error=""})),Object(l.a)(Ee,st.rejected,(function(e,t){e.status="failed",e.error="No such combination of username and password found."})),Ee)}),ut=function(e){var t;return null===(t=e.user.user)||void 0===t?void 0:t.username},lt=ct.actions,dt=lt.updateUsername,mt=lt.updatePassword,pt=lt.logOut,ft=lt.setUser,Et=ct.reducer,vt=Object(c.b)("users",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.dispatch,n=a.rejectWithValue,e.prev=1,e.next=4,r(v("/api/exercises/allUsers/".concat(t),"GET"));case 4:return i=e.sent,e.abrupt("return",i);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",n(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),bt=Object(c.b)("admins",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.dispatch,n=a.rejectWithValue,e.prev=1,e.next=4,r(v("/api/exercises/allUsers","POST",t));case 4:return i=e.sent,e.abrupt("return",i);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",n(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),ht=Object(c.c)({name:"admins",initialState:{users:[""],status:"idle",error:null,changed:{}},reducers:{addChanged:function(e,t){e.changed[t.payload]=!e.changed[t.payload]}},extraReducers:(ve={},Object(l.a)(ve,vt.pending,(function(e,t){e.status="loading"})),Object(l.a)(ve,vt.fulfilled,(function(e,t){e.status="succeeded",e.users=t.payload;for(var a=0;a<e.users.length;a++)e.changed[e.users[a].user_name]=e.users[a].is_admin})),Object(l.a)(ve,vt.rejected,(function(e,t){e.status="failed",e.error="There are no users"})),Object(l.a)(ve,bt.pending,(function(e,t){e.status="loading"})),Object(l.a)(ve,bt.fulfilled,(function(e,t){e.status="succeeded",e.users=[];for(var a=0,r=Object.entries(t.payload);a<r.length;a++){var n=Object(b.a)(r[a],2),i=n[0],o=n[1];e.users.push({user_name:i,is_admin:o})}})),Object(l.a)(ve,bt.rejected,(function(e,t){e.status="failed",e.error="Unsuccessful saving admins"})),ve)}),gt=function(e){return e.allUsers.users},xt=function(e){return e.allUsers.status},jt=function(e){return e.allUsers.error},yt=function(e){return e.allUsers.changed},Ot=ht.actions.addChanged,kt=ht.reducer,wt=(a(84),a(85),a(96)),_t=a(102),St=a(104),zt=a(100),Ct=a(103),Nt=a(10),Tt=a(9),It=a(46),At=["isLoggedIn","component","location"];var Ft=Object(s.b)((function(e){return{isLoggedIn:e.user.isLoggedIn}}))((function(e){var t=e.isLoggedIn,a=e.component,r=e.location,i=Object(It.a)(e,At);return n.a.createElement(Tt.b,Object.assign({},i,{render:function(){return t?n.a.createElement(a,null):n.a.createElement(Tt.a,{to:{pathname:"/login",state:{from:r}}})}}))})),Vt=a(95),Lt=a(101),Pt=a(26);var Ut={updateUsername:dt,updatePassword:mt,logIn:ot,logInByGithub:st,setUser:ft},Wt=Object(s.b)((function(e){return{usernameValue:e.user.usernameValue,passwordValue:e.user.passwordValue,isLoggedIn:e.user.isLoggedIn,status:e.user.status,error:e.user.error}}),Ut)((function(e){var t=e.usernameValue,a=e.passwordValue,i=e.updateUsername,o=e.updatePassword,s=e.setUser,c=e.location,u=e.isLoggedIn,l=e.status,d=e.error,m=e.logIn,p=e.logInByGithub;return Object(r.useEffect)((function(){null!==localStorage.getItem("formalization_checker_token")&&s()}),[l,s]),"loading"===l?n.a.createElement(Vt.a,{animation:"border",variant:"primary"}):window.location.href.match("code")?(p({code:window.location.href.split("code=")[1]}),n.a.createElement(Tt.a,{to:"/"})):u?c.state&&c.state.from&&c.state.from.pathname?n.a.createElement(Tt.a,{to:c.state.from.pathname}):n.a.createElement(Tt.a,{to:"/"}):n.a.createElement(Lt.a,null,n.a.createElement(Lt.a.Group,null,n.a.createElement(Lt.a.Label,null,"Username"),n.a.createElement(Lt.a.Control,{type:"text",placeholder:"Enter username",value:t,onChange:function(e){return i(e.target.value)}})),n.a.createElement(Lt.a.Group,null,n.a.createElement(Lt.a.Label,null,"Password"),n.a.createElement(Lt.a.Control,{type:"password",placeholder:"Enter password",value:a,onChange:function(e){return o(e.target.value)}}),n.a.createElement(Lt.a.Text,{className:"text-danger"},d)),n.a.createElement(wt.a,{type:"submit",onClick:function(e){e.preventDefault(),m({username:t,password:a})}},"Log in"),n.a.createElement(wt.a,{type:"submit",onClick:function(e){e.preventDefault();var t="https://github.com/login/oauth/authorize?client_id="+Pt.CLIENT_ID+"&redirect_uri="+Pt.REDIRECT+"&scope=read:user";window.location.replace(t)}},"Log in with Github"))})),Gt=a(105);var Dt={fetchAllExercises:Te,fetchExercise:Je},Rt=Object(s.b)((function(e){return{exercises:Fe(e),username:ut(e),status:Ve(e),error:Le(e)}}),Dt)((function(e){var t=e.exercises,a=e.status,i=e.error,o=e.fetchAllExercises,s=e.fetchExercise,c=e.username,u=e.onSelect;Object(r.useEffect)((function(){"idle"===a&&o()}),[a,o]);var l=null;if("loading"===a)l=n.a.createElement(Vt.a,{animation:"border",variant:"primary"});else if("succeeded"===a){var d=t.map((function(e){return void 0===u?n.a.createElement(Gt.a.Item,{as:Nt.b,to:"/solve/".concat(e.exercise_id),key:e.exercise_id,action:!0,onClick:function(){return s({exercise_id:e.exercise_id,user_name:c})}},e.title):n.a.createElement(Gt.a.Item,{key:e.exercise_id,action:!0,onClick:function(){return u(e.exercise_id)}},e.title)}));l=n.a.createElement(Gt.a,null,d)}else"failed"===a&&(l=n.a.createElement(Ct.a,{variant:"danger"},i));return n.a.createElement("div",null,n.a.createElement("h1",{className:"mb-4"},"Exercises"),l)})),Bt=a(97);var Mt=function(e){var t=e.value,a=e.error;if(!a)return null;var r=a.location.start.offset,i=a.location.end.offset,o=t.substring(0,r),s=t.substring(r,i),c=t.substring(i),u=""===t?null:n.a.createElement("div",{className:"text-body"},o,n.a.createElement("mark",{className:"bg-warning"},s),c);return n.a.createElement(Lt.a.Control.Feedback,{type:"invalid"},u,n.a.createElement("div",null,a.message))};var Kt=Object(s.b)((function(e,t){return{evaluation:tt(e,t.proposition_id),status:at(e,t.proposition_id),error:rt(e,t.proposition_id)}}))((function(e){var t=e.evaluation,a=e.status,r=e.error;return"loading"===a?n.a.createElement(Vt.a,{animation:"border",variant:"primary"}):"succeeded"===a?aa(t):"failed"===a?n.a.createElement(Jt,null,r):null})),qt=function(e){var t=e.type,a=e.children;return n.a.createElement(Lt.a.Text,{className:"text-".concat(t),children:a})},Yt=function(){return n.a.createElement(qt,{type:"success"},n.a.createElement("strong",null,"Your formalization is correct"))},Jt=function(e){var t=e.children;return n.a.createElement(qt,{type:"danger",className:"text-warning"},n.a.createElement("strong",null,"An error occured while validating your formalization:"),t)},Ht=" Discuss your formalization with your peers or teachers.",Qt=function(){return n.a.createElement(qt,{type:"warning"},n.a.createElement("strong",null,"We were unable to automatically validate your formalization."),Ht)},$t=function(e){var t=e.summary,a=e.children;return n.a.createElement(qt,{type:"danger"},n.a.createElement("strong",null,"Your formalization is incorrect."),a?n.a.createElement("details",{open:!0},n.a.createElement("summary",{className:"mb-2"},t),a):n.a.createElement("p",null,t))},Xt=function(e){var t=e.interpFunc,a=e.viewValue,r=e.subscript;if(!t)return null;var i=Object.entries(t);return i.length>0&&n.a.createElement("ul",{className:"list-unstyled mb-1"},i.map((function(e){var t=Object(b.a)(e,2),i=t[0],o=t[1];return n.a.createElement("li",{key:i},"\ud835\udc56",r,"(",i,") = ",a(o))})))},Zt=function(e){return"{".concat(e.map((function(e){return e.length>1?"(".concat(e,")"):e})).join(", "),"}")},ea=function(e){var t=e.subscript,a=e.D,r=e.iC,i=e.iP,o=e.iF;return n.a.createElement(n.a.Fragment,null,n.a.createElement("p",{className:"mb-1"},"\ud835\udc37",t," = {".concat(a.join(", "),"}")),n.a.createElement(Xt,{interpFunc:r,viewValue:function(e){return e},subscript:t}),n.a.createElement(Xt,{interpFunc:i,viewValue:Zt,subscript:t}),n.a.createElement(Xt,{interpFunc:o,viewValue:Zt,subscript:t}))},ta=function(e){var t=e.structure,a=e.description,r=e.index,i=e.msgNotFound,o=r?n.a.createElement("sub",null,r):null;return t?n.a.createElement("div",{className:"mb-2"},n.a.createElement("p",{className:"mb-1"},a," ","\u2133",o," = (\ud835\udc37",o,", \ud835\udc56",o,") where:"),n.a.createElement(ea,Object.assign({subscript:o},t))):n.a.createElement("p",{className:"mb-2"},null!==i&&void 0!==i?i:"We could not find a counterexample automatically.",Ht)},aa=function(e){if("OK"===e.solutionToFormalization&&"OK"===e.formalizationToSolution)return n.a.createElement(Yt,null);if("TE"===e.solutionToFormalization||"TE"===e.formalizationToSolution||"ME"===e.solutionToFormalization||"ME"===e.formalizationToSolution)return n.a.createElement(Qt,null);var t=new Set(e.languageContants),a={result:e.formalizationToSolution,description:e.m1,counterexample:B(e.domainFormalizationToSolution,e.symbolsFormalizationToSolution,t)},r={result:e.solutionToFormalization,description:e.m2,counterexample:B(e.domainSolutionToFormalization,e.symbolsSolutionToFormalization,t)};return"OK"===r.result&&"WA"===a.result?n.a.createElement($t,{summary:"Your formalization is false\n                in some first-order structure\n                where the correct formalization is true."},n.a.createElement(ta,{description:"One such structure is",structure:a.counterexample})):"WA"===r.result&&"OK"===a.result?n.a.createElement($t,{summary:"Your formalization is true\n                in some first-order structure\n                where the correct formalization is false."},n.a.createElement(ta,{description:"One such structure is",structure:r.counterexample})):n.a.createElement($t,{summary:"Your formalization is false\n                    in some first-order structure\n                    where the correct formalization is true,\n                    and vice versa."},n.a.createElement(ta,{description:"Your formalization is true and the correct formalization is false, e.g., in structure",structure:r.counterexample,index:1,msgNotFound:"We could not automatically find a structure\n                        in which your formalization is true\n                        and the correct formalization is false."}),n.a.createElement(ta,{description:"Your formalization is false and the correct formalization is true, e.g., in structure",structure:a.counterexample,index:2,msgNotFound:"We could not automatically find a structure\n                        in which your formalization is false\n                        and the correct formalization is true."}))};var ra={update:$e,evaluate:He},na=Object(s.b)((function(e,t){return function(e,t){var a=e.solveExercise.solutions[t].solution;return{value:a,error:R(a,new Set(e.solveExercise.constants),W(e.solveExercise.predicates),W(e.solveExercise.functions),E.parseFormulaWithPrecedence)}}(e,t.proposition_id)}),ra)((function(e){var t=e.exercise_id,a=e.proposition_id,r=e.proposition,i=e.value,o=e.error,s=e.update,c=e.evaluate,u=e.user,l=e.onChange,d=function(e){s(e,a),l&&l(e,a)};return n.a.createElement(Lt.a.Group,{className:"clearfix",controlId:"formalization-".concat(t,"-").concat(a)},n.a.createElement(Lt.a.Label,null,r),n.a.createElement(Lt.a.Control,{type:"text",placeholder:"Enter formalization",as:"textarea",rows:1,value:i,isInvalid:!!o,onChange:function(e){return d(e.target.value)}}),n.a.createElement(wt.a,{className:"mt-1 float-right",variant:"primary",disabled:o,onClick:function(){return c({exercise_id:t,proposition_id:a,solution:i,user:u})}},"Check"),n.a.createElement(Mt,{value:i,error:o}),n.a.createElement(Kt,{proposition_id:a}))}));function ia(e){e.match;var t=e.exercise,a=e.status,i=e.error,o=e.fetchExercise,s=e.user,c=e.exerciseId,u=e.onChange;Object(r.useEffect)((function(){"idle"===a&&o({exercise_id:c,username:s})}),[a,c,t,o,s]);var l=null;if("loading"===a)l=n.a.createElement(Vt.a,{animation:"border",variant:"primary"});else if("succeeded"===a){var d=t.propositions.map((function(e){return n.a.createElement(na,{key:e.proposition_id,exercise_id:c,proposition_id:e.proposition_id,proposition:e.proposition,user:s,onChange:u})}));l=n.a.createElement("div",null,n.a.createElement("h2",null,t.title),n.a.createElement("p",null,t.description),n.a.createElement("h5",null,"Language \u2112"),n.a.createElement("p",null,"\ud835\udc9e",n.a.createElement("sub",null,"\u2112")," = ","{ ",t.constants," }"),n.a.createElement("p",null,"\ud835\udcab",n.a.createElement("sub",null,"\u2112")," = ","{ ",t.predicates," }"),n.a.createElement("p",null,"\u2131",n.a.createElement("sub",null,"\u2112")," = ","{ ",t.functions," }"),oa,n.a.createElement("h5",null,"Propositions"),d)}else"failed"===a&&(l=n.a.createElement(Ct.a,{variant:"danger"},i));return l}var oa=n.a.createElement("details",{className:"mb-3"},n.a.createElement("summary",{className:"h6"},"Accepted notation of logical symbols"),n.a.createElement(Bt.a,{size:"sm",striped:!0,className:"w-auto"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Logical symbol"),n.a.createElement("th",null,"Accepted notation"))),n.a.createElement("tbody",null,[{name:"Negation",preferredToken:"\xac",acceptedTokens:["-","!","~","\\neg","\\lnot"]},{name:"Equality",preferredToken:"\u2250",acceptedTokens:["="]},{name:"Inequality",preferredToken:"\u2260",acceptedTokens:["!=","/=","<>","\\neq"]},{name:"Conjunction",preferredToken:"\u2227",acceptedTokens:["&&","&","/\\","\\wedge","\\land"]},{name:"Disjunction",preferredToken:"\u2228",acceptedTokens:["||","|","\\/","\\vee","\\lor"]},{name:"Implication",preferredToken:"\u2192",acceptedTokens:["->","\\to"]},{name:"Equivalence",preferredToken:"\u2194\ufe0e",acceptedTokens:["\u27f7","<->","<--\x3e","\\lequiv","\\leftrightarrow"]},{name:"Existential quantifier",preferredToken:"\u2203",acceptedTokens:["\\exists","\\e","\\E"]},{name:"Universal quantifier",preferredToken:"\u2200",acceptedTokens:["\\forall","\\a","\\A"]}].map((function(e){var t=e.name,a=e.preferredToken,r=e.acceptedTokens;return n.a.createElement("tr",{key:t},n.a.createElement("th",null,t),n.a.createElement("td",null,n.a.createElement("strong",{key:a},n.a.createElement("code",null,a)),r.map((function(e){return n.a.createElement(n.a.Fragment,{key:e}," ",n.a.createElement("code",{className:"ml-2"},e))}))))}))))),sa={fetchExercise:Je},ca=Object(s.b)((function(e){return{exercise:Xe(e),status:Ze(e),error:et(e),user:ut(e)}}),sa)((function(e){var t=Object(Tt.g)().id;return n.a.createElement(ia,Object.assign({exerciseId:t},e))})),ua=a(98);var la=function(e){var t=e.symbolsKind,a=e.symbolsSet,r=e.value,i=e.error,o=e.update;return n.a.createElement(ua.a,{hasValidation:!!i,className:"mb-3"},n.a.createElement(ua.a.Prepend,null,n.a.createElement(ua.a.Text,{as:"label"},a,n.a.createElement("sub",null,"\u2112"),"\xa0=\xa0{")),n.a.createElement(Lt.a.Control,{type:"text",placeholder:"Enter ".concat(t),value:r,onChange:function(e){return o(e.target.value)},isInvalid:!!i}),n.a.createElement(ua.a.Append,null,n.a.createElement(ua.a.Text,null,"}")),n.a.createElement(Mt,{value:r,error:i}))},da=he,ma={update:Z},pa=Object(s.b)(da,ma)((function(e){return n.a.createElement(la,Object.assign({symbolsKind:"individual constants",symbolsSet:"\ud835\udc9e"},e))})),fa=ge,Ea={update:ee},va=Object(s.b)(fa,Ea)((function(e){return n.a.createElement(la,Object.assign({symbolsKind:"predicate symbols",symbolsSet:"\ud835\udcab"},e))})),ba=xe,ha={update:te},ga=Object(s.b)(ba,ha)((function(e){return n.a.createElement(la,Object.assign({symbolsKind:"function symbols",symbolsSet:"\u2131"},e))}));var xa=Object(s.b)((function(e){return{errorMessage:je(e).errorMessage}}))((function(e){var t=e.errorMessage;return t?n.a.createElement("p",{className:"text-danger"},t):null}));var ja=Se,ya={update:ue},Oa=Object(s.b)(ja,ya)((function(e){var t=e.value,a=e.error,r=e.update;return n.a.createElement(Lt.a.Group,null,n.a.createElement(Lt.a.Label,null,"Global preferred model constraints (optional):"),n.a.createElement(Lt.a.Control,{type:"text",placeholder:"Enter constraints",value:t,as:"textarea",rows:1,onChange:function(e){return r(e.target.value)},isInvalid:!!a}),n.a.createElement(Mt,{value:t,error:a}))}));var ka=function(){return n.a.createElement("div",{className:"mt-4 mb-4"},n.a.createElement("h4",null,"Language \u2112"),n.a.createElement(pa,null),n.a.createElement(va,null),n.a.createElement(ga,null),n.a.createElement(xa,null),n.a.createElement(Oa,null))};var wa={remove:se,update:re,updateConstraints:ce},_a=Object(s.b)((function(e,t){var a=we(e,t.i,t.j),r=_e(e,t.i,t.j);return{value:a.value,error:a.error,value2:r.value,error2:r.error}}),wa)((function(e){var t=e.i,a=e.j,r=e.value,i=e.value2,o=e.error,s=e.error2,c=e.remove,u=e.update,l=e.updateConstraints,d=e.cannotBeRemoved,m="".concat(t+1,".").concat(a+1),p="-".concat(t,"-").concat(a);return n.a.createElement("li",{className:"clearfix mb-4"},n.a.createElement(Lt.a.Group,{controlId:"formalization".concat(p)},n.a.createElement(Lt.a.Label,null,"Formalization ".concat(m)),n.a.createElement(Lt.a.Control,{type:"text",placeholder:"Enter formalization",value:r,as:"textarea",rows:1,onChange:function(e){return u(e.target.value,t,a)},isInvalid:!!o}),n.a.createElement(wt.a,{className:"mt-1 float-right",variant:"outline-danger",size:"sm",onClick:function(){return c(t,a)},disabled:d},"Remove formalization ",m),n.a.createElement(Mt,{value:r,error:o})),n.a.createElement(Lt.a.Group,{controlId:"constraints".concat(p),size:"sm"},n.a.createElement(Lt.a.Label,null,n.a.createElement("small",null,"Preferred model constraints ",m," (optional)")),n.a.createElement(Lt.a.Control,{type:"text",placeholder:"Enter constraints",value:i,as:"textarea",size:"sm",rows:1,onChange:function(e){return l(e.target.value,t,a)},isInvalid:!!s}),n.a.createElement(Mt,{value:i,error:s})))}));var Sa={add:ie,remove:oe,update:ae},za=Object(s.b)((function(e,t){return{value:ke(e,t.i),formalizations:Oe(e,t.i)}}),Sa)((function(e){var t=e.i,a=e.value,r=e.formalizations,i=e.add,o=e.remove,s=e.update,c=r.length>1,u=r.map((function(e,a){return n.a.createElement(_a,{key:a,i:t,j:a,cannotBeRemoved:!c})})),l=""===a?n.a.createElement(Lt.a.Control.Feedback,{type:"invalid"},"This field cannot be empty"):null;return n.a.createElement("div",{className:"mb-4"},n.a.createElement(Lt.a.Group,{className:"clearfix mb-0",controlId:"proposition-".concat(t)},n.a.createElement("h5",null,n.a.createElement(Lt.a.Label,{className:"d-block"},"Proposition\xa0",t+1)),n.a.createElement(Lt.a.Control,{type:"text",placeholder:"Enter proposition",value:a,onChange:function(e){return s(e.target.value,t)},isInvalid:!!l}),n.a.createElement(wt.a,{className:"mt-1 mb-1 float-right",variant:"outline-danger",size:"sm",onClick:function(){return o(t)}},"Remove proposition\xa0",t+1),l),n.a.createElement("ol",{className:"list-unstyled pl-5"},u),n.a.createElement("div",{className:"pl-5 mb-3"},n.a.createElement(wt.a,{variant:"outline-success",size:"sm",onClick:function(){return i(t)}},"Add formalization")))}));var Ca={add:ne},Na=Object(s.b)((function(e){return{propositions:ye(e)}}),Ca)((function(e){var t=e.propositions,a=e.add,r=t.map((function(e,t){return n.a.createElement(za,{key:t,i:t})}));return n.a.createElement("div",{className:"mb-4 clearfix"},n.a.createElement("h4",{className:"mb-3"},"Propositions"),r,n.a.createElement("div",null,n.a.createElement(wt.a,{variant:"success",onClick:function(){return a()}},"Add proposition")))}));var Ta=be,Ia={update:$},Aa=Object(s.b)(Ta,Ia)((function(e){var t=e.value,a=e.update,r=""===t?n.a.createElement(Lt.a.Control.Feedback,{type:"invalid"},"This field cannot be empty"):null;return n.a.createElement(Lt.a.Group,{controlId:"exercise-title"},n.a.createElement(Lt.a.Label,null,"Exercise title"),n.a.createElement(Lt.a.Control,{type:"text",placeholder:"Enter exercise title",value:t,isInvalid:!!r,onChange:function(e){return a(e.target.value)}}),r)}));var Fa=function(e){return{value:e.addExercise.description}},Va={update:X},La=Object(s.b)(Fa,Va)((function(e){var t=e.value,a=e.update;return n.a.createElement(Lt.a.Group,{controlId:"exercise-description"},n.a.createElement(Lt.a.Label,null,"Description"),n.a.createElement(Lt.a.Control,{as:"textarea",placeholder:"Enter description",value:t,onChange:function(e){return a(e.target.value)}}))}));var Pa=function(e){var t=e.containsErrors,a=e.saveExercise;return n.a.createElement(Lt.a.Group,{className:"text-center text-md-right mb-4"},n.a.createElement(wt.a,{variant:"primary",size:"lg",disabled:t,onClick:a},"Save exercise"),t&&n.a.createElement(Lt.a.Text,{className:"text-danger"},"Fix all errors above in order to be able to save the exercise"))};var Ua={addExercise:M},Wa=Object(s.b)((function(e){return{status:e.addExercise.status,added:e.addExercise.added,error:e.addExercise.error,containsErrors:Ce(e),title:be(e).value}}),Ua)((function(e){var t=e.status,a=e.error,r=e.containsErrors,i=e.title,o=e.addExercise,s=e.added,c=null;return"idle"===t?c=s?n.a.createElement(Ct.a,{variant:"success"},"Exercise ",n.a.createElement("b",null,i)," was succefully added to the database."):n.a.createElement(Lt.a,null,n.a.createElement("h1",null,"Add exercise"),n.a.createElement(Aa,null),n.a.createElement(La,null),n.a.createElement(ka,null),n.a.createElement(Na,null),n.a.createElement(Pa,{containsErrors:r,saveExercise:o})):"loading"===t?c=n.a.createElement(Vt.a,{animation:"border",variant:"primary"}):"failed"===t&&(c=n.a.createElement(Ct.a,{variant:"danger"},a)),c})),Ga=["isLoggedIn","isAdmin","component","location"];var Da=Object(s.b)((function(e){return{isLoggedIn:e.user.isLoggedIn,isAdmin:e.user.isAdmin}}))((function(e){var t=e.isLoggedIn,a=e.isAdmin,r=e.component,i=e.location,o=Object(It.a)(e,Ga);return n.a.createElement(Tt.b,Object.assign({},o,{render:function(){return t?a?n.a.createElement(r,null):n.a.createElement(Tt.a,{to:{pathname:"/",state:{from:i}}}):n.a.createElement(Tt.a,{to:{pathname:"/login",state:{from:i}}})}}))}));var Ra={fetchAllExercises:Te,fetchAllUsersToExercise:Ue},Ba=Object(s.b)((function(e){return{exercises:Fe(e),status:Ve(e),error:Le(e)}}),Ra)((function(e){var t=e.exercises,a=e.status,i=e.error,o=e.fetchAllExercises,s=e.fetchAllUsersToExercise;Object(r.useEffect)((function(){"idle"===a&&o()}),[a,o]);var c=null;if("loading"===a)c=n.a.createElement(Vt.a,{animation:"border",variant:"primary"});else if("succeeded"===a){var u=t.map((function(e){return n.a.createElement("tr",{key:e.exercise_id},n.a.createElement("td",null,n.a.createElement(Nt.b,{to:"/progress/exercise/users",key:e.exercise_id,onClick:function(){return s(e.exercise_id)}},e.title)),n.a.createElement("td",null,e.attempted))}));c=n.a.createElement(Bt.a,{striped:!0,bordered:!0,hover:!0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Exercise"),n.a.createElement("th",null,"Students attempted"))),n.a.createElement("tbody",null,u))}else"failed"===a&&(c=n.a.createElement(Ct.a,{variant:"danger"},i));return n.a.createElement("div",null,n.a.createElement("h2",{className:"mb-4"},"Student progress"),c)}));var Ma=Object(s.b)((function(e){return{solutions:Be(e),status:Ke(e),error:qe(e),name:Me(e),title:Re(e)}}),{})((function(e){var t=e.solutions,a=e.users,i=e.status,o=e.error,s=e.name,c=e.id,u=e.title;Object(r.useEffect)((function(){"idle"===i&&We({exercise_id:c,user_name:s})}),[i,c,a,We]);var l=null;if("loading"===i)l=n.a.createElement(Vt.a,{animation:"border",variant:"primary"});else if("succeeded"===i){for(var d=[],m=[],p=null,f=!1,E=0;E<t.length;E++)null===p?(p=t[E].proposition,f=!0):p!==t[E].proposition&&f&&(d.push(n.a.createElement("h5",{key:p}," ",p)),d.push(n.a.createElement(Bt.a,{striped:!0,bordered:!0,hover:!0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Date"),n.a.createElement("th",null,"Solution"),n.a.createElement("th",null,"Correct"))),n.a.createElement("tbody",null,m))),m=[],p=t[E].proposition),t[E].is_correct?m.push(n.a.createElement("tr",{key:t[E].date},n.a.createElement("td",null,t[E].date.split(".")[0].replace("T"," ")+" "),n.a.createElement("td",null,t[E].solution),n.a.createElement("td",null,"  \u2713"))):m.push(n.a.createElement("tr",{key:t[E].date},n.a.createElement("td",null,t[E].date.split(".")[0].replace("T"," ")+" "),n.a.createElement("td",null,t[E].solution),n.a.createElement("td",null,"  \u2715")));d.push(n.a.createElement("h5",{key:p}," ",p)),d.push(n.a.createElement(Bt.a,{striped:!0,bordered:!0,hover:!0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Date"),n.a.createElement("th",null,"Solution"),n.a.createElement("th",null,"Correct"))),n.a.createElement("tbody",null,m))),l=n.a.createElement("div",{key:d},d)}else"failed"===i&&(l=n.a.createElement(Ct.a,{variant:"danger"},o));return n.a.createElement("div",null,n.a.createElement("h2",{className:"mb-4"},u," by ",s," "),l)}));var Ka={fetchUsersSolutions:We,fetchAllUsersToExercise:Ue},qa=Object(s.b)((function(e){return{users:De(e),status:Ke(e),error:qe(e),title:Re(e)}}),Ka)((function(e){var t=e.users,a=e.status,i=e.error,o=e.fetchAllUsersToExercise,s=e.fetchUsersSolutions,c=e.id,u=e.title;Object(r.useEffect)((function(){"idle"===a&&o(c)}),[a,c,t,o]);var l=null;if("loading"===a)l=n.a.createElement(Vt.a,{animation:"border",variant:"primary"});else if("succeeded"===a){for(var d=[],m=function(e){console.log(t[e]),t[e].lastattemptcorrec?d.push(n.a.createElement("tr",{key:t[e].user_name},n.a.createElement("td",null,n.a.createElement(Nt.b,{to:"/progress/exercise/users/solutions",key:t[e].user_name,onClick:function(){return s({exercise_id:t[e].exercise_id,user_name:t[e].user_name})}},t[e].user_name)),n.a.createElement("td",null,t[e].solved," "),n.a.createElement("td",null,t[e].attempted," "),n.a.createElement("td",null,t[e].successful_attempts),n.a.createElement("td",null,"users[i].attempts}"),n.a.createElement("td",null,"users[i].huuu}"),n.a.createElement("td",null,t[e].last_attempt_date.split(".")[0].replace("T"," ")+" "," \u2713"))):d.push(n.a.createElement("tr",{key:t[e].user_name},n.a.createElement("td",null,n.a.createElement(Nt.b,{to:"/progress/exercise/users/solutions",key:t[e].user_name,onClick:function(){return s({exercise_id:t[e].exercise_id,user_name:t[e].user_name})}},t[e].user_name)),n.a.createElement("td",null,t[e].solved," "),n.a.createElement("td",null,t[e].attempted," "),n.a.createElement("td",null,t[e].successful_attempts),n.a.createElement("td",null,t[e].attempts),n.a.createElement("td",null,t[e].last_attempt_date.split(".")[0].replace("T"," ")+" "," \u2715")))},p=0;p<t.length;p++)m(p);l=n.a.createElement(Bt.a,{striped:!0,bordered:!0,hover:!0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null," "),n.a.createElement("th",{colSpan:2},"Propositions "),n.a.createElement("th",{colSpan:2},"Attempt"),n.a.createElement("th",null," ")),n.a.createElement("tr",null,n.a.createElement("th",null,"Student"),n.a.createElement("th",null,"Solved"),n.a.createElement("th",null,"Attempted"),n.a.createElement("th",null,"Successful"),n.a.createElement("th",null,"Total"),n.a.createElement("th",null,"Last attempt"))),n.a.createElement("tbody",null,d))}else"failed"===a&&(l=n.a.createElement(Ct.a,{variant:"danger"},i));return n.a.createElement("div",null,n.a.createElement("h2",{className:"mb-4"}," ",u," "),l)}));var Ya={fetchAllUsers:vt,addChanged:Ot,saveAdmins:bt},Ja=Object(s.b)((function(e){return{users:gt(e),status:xt(e),error:jt(e),changedAdmins:yt(e),user_name:ut(e)}}),Ya)((function(e){var t=e.users,a=e.user_name,i=e.status,o=e.error,s=e.fetchAllUsers,c=e.addChanged,u=e.changedAdmins,l=e.saveAdmins;Object(r.useEffect)((function(){"idle"===i&&s(a)}),[i,s]);var d=null;if("loading"===i)d=n.a.createElement(Vt.a,{animation:"border",variant:"primary"});else if("succeeded"===i){var m=t.map((function(e){return n.a.createElement("tr",{key:e.user_name},n.a.createElement("td",null,e.user_name),n.a.createElement("td",null," ",n.a.createElement("input",{type:"checkbox",defaultChecked:e.is_admin,id:e.user_name,onChange:function(e){c(e.target.id)}})," "))}));d=n.a.createElement(Lt.a,null,n.a.createElement(Bt.a,{striped:!0,bordered:!0,hover:!0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Username"),n.a.createElement("th",null,"Is admin"))),n.a.createElement("tbody",null,m)))}else"failed"===i&&(d=n.a.createElement(Ct.a,{variant:"danger"},o));return n.a.createElement("div",null,n.a.createElement("h2",{className:"mb-4"},"Users"),d,n.a.createElement(wt.a,{onClick:function(e){l(u)}},"Save admins"))})),Ha=a(99),Qa=a(58);var $a={saveExercise:K,removeExercise:q},Xa=Object(s.b)((function(e){return{status:e.addExercise.status,error:e.addExercise.error,containsErrors:Ce(e),title:be(e).value}}),$a)((function(e){var t=e.status,a=e.error,r=e.title,i=e.containsErrors,o=e.removeExercise,s=e.saveExercise,c=null;return"idle"===t?c=n.a.createElement(Lt.a,null,n.a.createElement("h1",null,"Editing ",n.a.createElement("i",null,r)),n.a.createElement(Aa,null),n.a.createElement(La,null),n.a.createElement(ka,null),n.a.createElement(Na,null),n.a.createElement(Ha.a,{className:"justify-content-end"},n.a.createElement(Qa.a,{xs:12,md:{order:2,span:4}},n.a.createElement(Pa,{containsErrors:i,saveExercise:s})),n.a.createElement(Qa.a,{xs:12,md:{order:1,span:4,offset:4},className:"text-center"},n.a.createElement(wt.a,{variant:"outline-danger",size:"lg",onClick:o},"Remove exercise")))):"loading"===t?c=n.a.createElement(Vt.a,{animation:"border",variant:"primary"}):"succeeded"===t?c=n.a.createElement(Ct.a,{variant:"success"},"Exercise was succefully changed in the database."):"removed"===t?c=n.a.createElement(Ct.a,{variant:"success"},"Exercise  was succefully removed from database."):"failed"===t&&(c=n.a.createElement(Ct.a,{variant:"danger"},a)),c}));var Za={fetchAllExercises:Te,fetchSavedExercise:Y},er=Object(s.b)((function(e){return{exercises:Fe(e),status:Ve(e),error:Le(e)}}),Za)((function(e){var t=e.exercises,a=e.status,i=e.error,o=e.fetchAllExercises,s=e.fetchSavedExercise;Object(r.useEffect)((function(){"idle"===a&&o()}),[a,o]);var c=null;if("loading"===a)c=n.a.createElement(Vt.a,{animation:"border",variant:"primary"});else if("succeeded"===a){var u=t.map((function(e){return n.a.createElement(Gt.a.Item,{as:Nt.b,to:"/edit/".concat(e.exercise_id),key:e.exercise_id,action:!0,onClick:function(){return s(e.exercise_id)}},e.title)}));c=n.a.createElement(Gt.a,null,u)}else"failed"===a&&(c=n.a.createElement(Ct.a,{variant:"danger"},i));return n.a.createElement("div",null,n.a.createElement("h1",{className:"mb-4"},"Edit exercise"),c)}));var tr={logOut:pt,changeStatus:le,changeExerciseStatus:Ae},ar=Object(s.b)((function(e){return{isLoggedIn:e.user.isLoggedIn,isAdmin:e.user.isAdmin,user:e.user.user}}),tr)((function(e){var t=e.isLoggedIn,a=e.user,r=e.logOut,i=e.changeStatus,o=e.changeExerciseStatus,s=e.isAdmin,c=null;return c=t?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"px-4 my-auto text-info"},"You are logged in as ",n.a.createElement("b",null,a.username)),n.a.createElement(wt.a,{as:Nt.b,to:"/",onClick:function(){return r()}},"Log out")):n.a.createElement(wt.a,{as:Nt.b,to:"/login"},"Log in"),s?n.a.createElement(Nt.a,{basename:Pt.BASE_NAME},n.a.createElement("div",{className:"App"},n.a.createElement(_t.a,{bg:"dark",variant:"dark",sticky:"top"},n.a.createElement(St.a,{className:"mr-auto"},n.a.createElement(St.a.Link,{className:"px-4",as:Nt.b,to:"/",onClick:function(){return o()}},"Home"),n.a.createElement(St.a.Link,{className:"px-4",as:Nt.b,to:"/add",onClick:function(){return i()}},"Add"),n.a.createElement(St.a.Link,{className:"px-4",as:Nt.b,to:"/edit",onClick:function(){return o()}},"Edit"),n.a.createElement(St.a.Link,{className:"px-4",as:Nt.b,to:"/progress",onClick:function(){return o()}},"Student progress"),n.a.createElement(St.a.Link,{className:"px-4",as:Nt.b,to:"/admins"},"Admin")),n.a.createElement(St.a,null,c)),n.a.createElement(zt.a,{className:"my-3"},n.a.createElement(Tt.d,null,n.a.createElement(Ft,{exact:!0,path:"/",component:Rt}),n.a.createElement(Da,{exact:!0,path:"/admins",component:Ja}),n.a.createElement(Da,{exact:!0,path:"/progress",component:Ba}),n.a.createElement(Da,{exact:!0,path:"/progress/exercise/users",component:qa}),n.a.createElement(Da,{exact:!0,path:"/progress/exercise/users/solutions",component:Ma}),n.a.createElement(Tt.b,{exact:!0,path:"/login",component:Wt}),n.a.createElement(Ft,{path:"/solve/:id",component:ca}),n.a.createElement(Da,{exact:!0,path:"/add",component:Wa}),n.a.createElement(Da,{exact:!0,path:"/edit",component:er}),n.a.createElement(Da,{exact:!0,path:"/edit/:id",component:Xa}),n.a.createElement(Tt.b,{path:"*",component:function(){return n.a.createElement(Ct.a,{variant:"danger"},"404 Not Found")}}))))):n.a.createElement(Nt.a,{basename:Pt.BASE_NAME},n.a.createElement("div",{className:"App"},n.a.createElement(_t.a,{bg:"dark",variant:"dark",sticky:"top"},n.a.createElement(St.a,{className:"mr-auto"},n.a.createElement(St.a.Link,{className:"px-4",as:Nt.b,to:"/",onClick:function(){return o()}},"Home")),n.a.createElement(St.a,null,c)),n.a.createElement(zt.a,{className:"my-3"},n.a.createElement(Tt.d,null,n.a.createElement(Ft,{exact:!0,path:"/",component:Rt}),n.a.createElement(Tt.b,{exact:!0,path:"/login",component:Wt}),n.a.createElement(Ft,{path:"/solve/:id",component:ca}),n.a.createElement(Tt.b,{path:"*",component:function(){return n.a.createElement(Ct.a,{variant:"danger"},"404 Not Found")}})))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var rr=function(e){return Object(c.a)({reducer:{addExercise:Ne,exercises:Pe,propositions:Ye,allUsers:kt,solveExercise:nt,user:Et,backend:(t=e,Object(c.c)({name:"backend",initialState:{url:t}}).reducer)}});var t}(Pt.BACKEND_URL);o.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(s.a,{store:rr},n.a.createElement(ar,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[61,1,2]]]);
//# sourceMappingURL=main.b34fe113.chunk.js.map