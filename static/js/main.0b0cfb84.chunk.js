(this["webpackJsonp@fmfi-uk-1-ain-412/formalization-checker"]=this["webpackJsonp@fmfi-uk-1-ain-412/formalization-checker"]||[]).push([[0],{101:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(27),c=a.n(i),o=a(5),s=(a(79),a(7)),l=a(3),u=a(30),d=a(8),m=a.n(d),p=a(13),f=a(24),E=a(23),b=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return function(){var r=Object(p.a)(m.a.mark((function r(n,i){var c,o,s;return m.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c={method:t,headers:{"Content-Type":"application/json"}},null!==localStorage.getItem("formalization_checker_token")&&(c.headers.Authorization="Bearer "+localStorage.getItem("formalization_checker_token")),a&&(c.body=JSON.stringify(a)),o=i().backend.url,r.next=6,fetch(o+e,c);case 6:if(!(s=r.sent).ok){r.next=9;break}return r.abrupt("return",s.json());case 9:throw new Error(s.status+" "+s.statusText);case 10:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},v=a(16),h=a(53),g=a(35),x=a(34),y=a(18),j=a(33),k=function(){function e(t,a){Object(y.a)(this,e),this.lhs=t,this.rhs=a}return Object(j.a)(e,[{key:"getFreeVariables",value:function(){return P(this.lhs.getFreeVariables(),this.rhs.getFreeVariables())}}]),e}(),O=function(){function e(t,a){Object(y.a)(this,e),this.originalSymbol=t,this.subf=a}return Object(j.a)(e,[{key:"getFreeVariables",value:function(){var e=this.subf.getFreeVariables();return e.delete(this.originalSymbol),e}}]),e}(),_=function(){function e(t){Object(y.a)(this,e),this.originalSymbol=t}return Object(j.a)(e,[{key:"getFreeVariables",value:function(){return new Set([this.originalSymbol])}}]),e}(),w=function(){function e(t){Object(y.a)(this,e),this.originalSymbol=t}return Object(j.a)(e,[{key:"getFreeVariables",value:function(){return new Set}}]),e}(),z=function(){function e(t,a){Object(y.a)(this,e),this.originalSymbol=t,this.args=a}return Object(j.a)(e,[{key:"getFreeVariables",value:function(){return this.args.reduce((function(e,t){return P(e,t.getFreeVariables())}),new Set)}}]),e}(),S=function(){function e(t,a){Object(y.a)(this,e),this.originalSymbol=t,this.args=a}return Object(j.a)(e,[{key:"getFreeVariables",value:function(){return this.args.reduce((function(e,t){return P(e,t.getFreeVariables())}),new Set)}}]),e}(),N=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return a}(k),F=function(){function e(t){Object(y.a)(this,e),this.subf=t}return Object(j.a)(e,[{key:"getFreeVariables",value:function(){return this.subf.getFreeVariables()}}]),e}(),C=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return a}(k),T=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return a}(k),A=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return a}(k),I=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return a}(k),L=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return a}(O),V=function(e){Object(g.a)(a,e);var t=Object(x.a)(a);function a(){return Object(y.a)(this,a),t.apply(this,arguments)}return a}(O);function P(e,t){return t.forEach((function(t){return e.add(t)})),e}var U,q=function(e){var t,a=new Map,r=Object(u.a)(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;a.has(n.name)||a.set(n.name,n.arity)}}catch(i){r.e(i)}finally{r.f()}return a},B=function(e,t){try{return{array:t(e),error:null}}catch(a){return{array:[],error:a}}},G=function(e,t,a,r){var n=r.expected,i=a.get(e);t.length!==i&&n("".concat(i," argument").concat(1===i?"":"s"," to ").concat(e))},W=function(e,t,a,r,n){var i=new Set([].concat(Object(h.a)(t),Object(h.a)(a.keys()),Object(h.a)(r.keys()))),c={isConstant:function(e){return t.has(e)},isPredicate:function(e){return a.has(e)},isFunction:function(e){return r.has(e)},isVariable:function(e){return!i.has(e)}},o={functionApplication:function(e,t,a){return G(e,t,r,a),new z(e,t)},predicateAtom:function(e,t,r){return G(e,t,a,r),new S(e,t)},variable:function(e,t){return new _(e,e)},constant:function(e,t){return new w(e,e)},equalityAtom:function(e,t,a){return new N(e,t)},negation:function(e,t){return new F(e)},conjunction:function(e,t,a){return new C(e,t)},disjunction:function(e,t,a){return new T(e,t)},implication:function(e,t,a){return new A(e,t)},equivalence:function(e,t,a){return new I(e,t)},existentialQuant:function(e,t,a){return new L(e,t)},universalQuant:function(e,t,a){return new V(e,t)}};try{var s=n(e,c,o).getFreeVariables();if(s.size>0)throw{location:{start:{column:0,line:0,offset:0},end:{column:0,line:0,offset:e.length}},message:"The formula should be closed, but the following\n          variable".concat(1===s.size?" is":"s are"," free:\n          ").concat(Array.from(s).join(", "),".")};return null}catch(l){return l}},D=function(e,t,a){return e?{D:Array.from(new Set(Object.values(e))).sort(),iC:Object.fromEntries(Object.entries(e).filter((function(e){var t=Object(v.a)(e,2),r=t[0];t[1];return a.has(r)}))),iP:t,iF:null}:void 0},R=Object(l.c)("addExercise/addNewExercise",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.dispatch,n=a.getState,i=a.rejectWithValue,c=ze(n())){e.next=4;break}return e.abrupt("return",i("Exercise contains errors."));case 4:return e.prev=4,e.next=7,r(b("/api/exercises","POST",c));case 7:return o=e.sent,e.abrupt("return",o);case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",i(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,a){return e.apply(this,arguments)}}()),M=Object(l.c)("saveExercise",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.dispatch,n=a.getState,i=a.rejectWithValue,c=ze(n())){e.next=4;break}return e.abrupt("return",i("Exercise contains errors."));case 4:return e.prev=4,e.next=7,r(b("/api/exercises/edit","POST",c));case 7:return o=e.sent,e.abrupt("return",o);case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",i(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,a){return e.apply(this,arguments)}}()),K=Object(l.c)("removeExercise",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.dispatch,n=a.getState,i=a.rejectWithValue,c=ze(n())){e.next=4;break}return e.abrupt("return",i("Exercise contains errors."));case 4:return e.prev=4,e.next=7,r(b("/api/exercises/remove","DELETE",c));case 7:return o=e.sent,e.abrupt("return",o);case 11:return e.prev=11,e.t0=e.catch(4),e.abrupt("return",i(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t,a){return e.apply(this,arguments)}}()),Q=Object(l.c)("fetchSavedExercise",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.dispatch,a.getState,n=a.rejectWithValue,e.prev=1,e.next=4,r(b("/api/exercises/edit/".concat(t),"GET"));case 4:return i=e.sent,e.abrupt("return",i);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",n(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),Y=Object(l.c)("fetchExercise",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.dispatch,n=a.rejectWithValue,e.prev=1,e.next=4,r(b("/api/exercises/".concat(t),"GET"));case 4:return i=e.sent,e.abrupt("return",i);case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",n(e.t0.message));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),H=Object(l.d)({name:"addExercise",initialState:{title:"",description:"",constants:"",predicates:"",functions:"",constraint:"",id:"",propositions:[{proposition:"",proposition_id:"",formalizations:[""],constraints:[""]}],status:"idle",error:null,added:null},reducers:{updateExerciseTitle:function(e,t){e.title=t.payload},updateDescription:function(e,t){e.description=t.payload},updateConstants:function(e,t){e.constants=t.payload},updatePredicates:function(e,t){e.predicates=t.payload},updateFunctions:function(e,t){e.functions=t.payload},updateConstraint:function(e,t){e.constraint=t.payload},updateInformalValue:{reducer:function(e,t){var a=t.payload,r=a.value,n=a.i;e.propositions[n].proposition=r},prepare:function(e,t){return{payload:{value:e,i:t}}}},updateFormalization:{reducer:function(e,t){var a=t.payload,r=a.value,n=a.i,i=a.j;e.propositions[n].formalizations[i]=r},prepare:function(e,t,a){return{payload:{value:e,i:t,j:a}}}},addNewProposition:function(e){e.propositions.push({proposition:"",formalizations:[""],constraints:[""]})},addNewFormalization:function(e,t){var a=t.payload;e.propositions[a].formalizations.push(""),e.propositions[a].constraints.push("")},removeProposition:function(e,t){var a=t.payload;e.propositions.splice(a,1)},removeFormalization:{reducer:function(e,t){var a=t.payload,r=a.i,n=a.j;e.propositions[r].formalizations.splice(n,1),e.propositions[r].constraints.splice(n,1)},prepare:function(e,t){return{payload:{i:e,j:t}}}},updateConstraints:{reducer:function(e,t){var a=t.payload,r=a.value,n=a.i,i=a.j;e.propositions[n].constraints[i]=r},prepare:function(e,t,a){return{payload:{value:e,i:t,j:a}}}},changeStatus:{reducer:function(e,t){e.added=null,e.status="idle",e.title="",e.description="",e.constants="",e.predicates="",e.functions="",e.constraint="",e.id="",e.propositions=[{proposition:"",proposition_id:"",formalizations:[""],constraints:[""]}]}}},extraReducers:(U={},Object(s.a)(U,R.pending,(function(e,t){e.status="loading"})),Object(s.a)(U,R.fulfilled,(function(e,t){e.added=!0,e.title="",e.description="",e.constants="",e.predicates="",e.functions="",e.constraint="",e.propositions=[{proposition:"",formalizations:[""],constraints:[""]}],e.status="idle"})),Object(s.a)(U,R.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(s.a)(U,M.pending,(function(e,t){e.status="loading"})),Object(s.a)(U,M.fulfilled,(function(e,t){e.status="succeeded",e.title="",e.description="",e.constants="",e.predicates="",e.functions="",e.constraint="",e.id="",e.propositions=[{proposition:"",proposition_id:"",formalizations:[""],constraints:[""]}]})),Object(s.a)(U,M.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(s.a)(U,K.pending,(function(e,t){e.status="loading"})),Object(s.a)(U,K.fulfilled,(function(e,t){e.status="removed",e.title="",e.description="",e.constants="",e.predicates="",e.functions="",e.constraint="",e.id="",e.propositions=[{proposition:"",proposition_id:"",formalizations:[""],constraints:[""]}]})),Object(s.a)(U,K.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(s.a)(U,Y.pending,(function(e,t){e.status="loading"})),Object(s.a)(U,Y.fulfilled,(function(e,t){e.status="succeeded"})),Object(s.a)(U,Y.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(s.a)(U,Q.pending,(function(e,t){e.status="loading"})),Object(s.a)(U,Q.fulfilled,(function(e,t){e.status="idle";var a=t.payload;e.title=a.title,e.description=a.description,e.constants=a.constants,e.predicates=a.predicates,e.functions=a.functions,e.constraint=void 0===a.constraints?"":a.constraints,e.id=a.exercise_id,e.propositions=[];for(var r=0;r<a.propositions.length;r++){for(var n=[],i=[],c=0;c<a.propositions[r].formalization.length;c++)n.push(a.propositions[r].formalization[c].formalization),i.push(a.propositions[r].formalization[c].constraints);e.propositions.push({proposition:a.propositions[r].proposition,proposition_id:a.propositions[r].proposition_id,formalizations:n,constraints:i})}})),Object(s.a)(U,Q.rejected,(function(e,t){e.status="failed",e.error=t.payload})),U)}),J=H.actions,$=J.updateExerciseTitle,X=J.updateDescription,Z=J.updateConstants,ee=J.updatePredicates,te=J.updateFunctions,ae=J.updateInformalValue,re=J.updateFormalization,ne=J.addNewProposition,ie=J.addNewFormalization,ce=J.removeProposition,oe=J.removeFormalization,se=J.updateConstraints,le=J.updateConstraint,ue=J.changeStatus;function de(e,t){var a,r=new Set,n=Object(u.a)(e);try{for(n.s();!(a=n.n()).done;){var i=a.value;if(r.has(i))return"Found duplicate symbol: '".concat(i,"' in ").concat(t);r.add(i)}}catch(c){n.e(c)}finally{n.f()}return null}var me,pe,fe,Ee,be=function(e){return{value:e.addExercise.title}},ve=Object(f.a)([function(e){return e.addExercise.constants}],(function(e){var t=B(e,E.parseConstants);return{value:e,array:t.array,error:t.error}})),he=Object(f.a)([function(e){return e.addExercise.predicates}],(function(e){var t=B(e,E.parsePredicates);return{value:e,array:t.array,error:t.error}})),ge=Object(f.a)([function(e){return e.addExercise.functions}],(function(e){var t=B(e,E.parseFunctions);return{value:e,array:t.array,error:t.error}})),xe=Object(f.a)([ve,he,ge],(function(e,t,a){var r=new Set(e.array),n=q(t.array),i=q(a.array),c=e.error||t.error||a.error,o=de(e.array,"constants")||de(t.array.map((function(e){return e.name})),"predicates")||de(a.array.map((function(e){return e.name})),"functions"),s=null;return s=c?"Language definition contains errors":o||function(e,t,a){var r,n=Object(u.a)(e);try{for(n.s();!(r=n.n()).done;){var i=r.value;if(t.has(i))return"Found clash in language definition: '".concat(i,"' in constants and predicates");if(a.has(i))return"Found clash in language definition: '".concat(i,"' in constants and functions")}}catch(l){n.e(l)}finally{n.f()}var c,o=Object(u.a)(t.keys());try{for(o.s();!(c=o.n()).done;){var s=c.value;if(a.has(s))return"Found clash in language definition: '".concat(s,"' in predicates and functions")}}catch(l){o.e(l)}finally{o.f()}return null}(r,n,i),{constants:r,predicates:n,functions:i,errorMessage:s}})),ye=function(e){return e.addExercise.propositions},je=function(e,t){return e.addExercise.propositions[t].formalizations},ke=function(e,t){return e.addExercise.propositions[t].proposition},Oe=Object(f.a)([function(e,t,a){return e.addExercise.propositions[t].formalizations[a]},function(e,t,a){return xe(e)}],(function(e,t){return{value:e,error:W(e,t.constants,t.predicates,t.functions,E.parseFormulaWithPrecedence)}})),_e=Object(f.a)([function(e,t,a){return e.addExercise.propositions[t].constraints[a]},function(e,t,a){return xe(e)}],(function(e,t){return""===e?{value:e,error:""}:{value:e,error:W(e,t.constants,t.predicates,t.functions,E.parseFormulaWithPrecedence)}})),we=Object(f.a)([function(e){return e.addExercise.constraint},function(e){return xe(e)}],(function(e,t){return""===e?{value:e,error:""}:{value:e,error:W(e,t.constants,t.predicates,t.functions,E.parseFormulaWithPrecedence)}})),ze=function(e){if(xe(e).errorMessage||""===be(e).value)return null;for(var t=ye(e),a=0;a<t.length;a++){if(""===t[a].proposition)return null;for(var r=t[a].formalizations,n=0;n<r.length;n++){if(Oe(e,a,n).error)return null;if(_e(e,a,n).error)return null}}return{title:e.addExercise.title,description:e.addExercise.description,constants:e.addExercise.constants,predicates:e.addExercise.predicates,functions:e.addExercise.functions,constraint:e.addExercise.constraint,id:e.addExercise.id,propositions:e.addExercise.propositions}},Se=function(e){return!ze(e)},Ne=H.reducer,Fe=Object(l.c)("exercises/fetchAllUsersToExercise",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.dispatch,n=a.rejectWithValue,e.prev=1,e.next=4,r(b("/api/progress/".concat(t),"GET"));case 4:return i=e.sent,e.abrupt("return",i);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),console.error(e.t0.stack),e.abrupt("return",n(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),Ce=Object(l.c)("exercises/fetchAllExercisesToUser",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.dispatch,n=a.rejectWithValue,e.prev=1,e.next=4,r(b("/api/progress","GET"));case 4:return i=e.sent,e.abrupt("return",i);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),console.error(e.t0.stack),e.abrupt("return",n(e.t0.message));case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),Te=Object(l.c)("exercises/fetchUsersSolutions",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.exercise_id,n=t.user_name,i=a.dispatch,c=a.rejectWithValue,e.prev=2,e.next=5,i(b("/api/progress/".concat(r,"/").concat(n),"GET"));case 5:return o=e.sent,e.abrupt("return",o);case 9:return e.prev=9,e.t0=e.catch(2),console.error(e.t0),console.error(e.t0.stack),e.abrupt("return",c(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}()),Ae=Object(l.d)({name:"users",initialState:{exercises:[],users:[],status:"idle",error:null,solutions:[],exercise_id:null,user:"",title:""},reducers:{},extraReducers:(me={},Object(s.a)(me,Fe.pending,(function(e,t){e.status="loading",e.exercise_id=t.meta.arg})),Object(s.a)(me,Fe.fulfilled,(function(e,t){e.status="succeeded",e.title=t.payload.title,e.users=t.payload.users})),Object(s.a)(me,Fe.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(s.a)(me,Ce.pending,(function(e,t){e.status="loading"})),Object(s.a)(me,Ce.fulfilled,(function(e,t){e.status="succeeded",e.exercises=t.payload})),Object(s.a)(me,Ce.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(s.a)(me,Te.pending,(function(e,t){e.status="loading",e.user=t.meta.arg.user_name,e.exercise_id=t.meta.arg.exercise_id})),Object(s.a)(me,Te.fulfilled,(function(e,t){e.status="succeeded",e.title=t.payload.title,e.solutions=t.payload.solutions})),Object(s.a)(me,Te.rejected,(function(e,t){e.status="failed",e.error=t.payload})),me)}),Ie=function(e){return e.propositions.users},Le=function(e){return e.propositions.title},Ve=function(e){return e.propositions.exercises},Pe=function(e){return e.propositions.solutions},Ue=function(e){return e.propositions.user},qe=function(e){return e.propositions.status},Be=function(e){return e.propositions.status},Ge=Ae.reducer,We=Object(l.c)("solveExercise/fetchExercise",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.exercise_id,n=t.user_name,i=a.dispatch,c=a.rejectWithValue,e.prev=2,e.next=5,i(b("/api/exercises/".concat(r),"POST",{username:n}));case 5:return o=e.sent,e.abrupt("return",o);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",c(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}()),De=Object(l.c)("solveExercise/evaluate",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i,c,o,s,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.exercise_id,n=t.proposition_id,i=t.solution,c=t.user,o=a.dispatch,s=a.rejectWithValue,e.prev=2,e.next=5,o(b("/api/exercises/".concat(r,"/").concat(n),"POST",{solution:i,user:c}));case 5:return l=e.sent,e.abrupt("return",l);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",s(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}()),Re=Object(l.c)("solveExercise/fetchFeedback",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.proposition_id,r=t.bad_formalization_id,n=a.dispatch,i=a.rejectWithValue,e.prev=2,e.next=5,n(b("/api/feedbacks/active/bad_formalization/".concat(r),"GET"));case 5:return c=e.sent,e.abrupt("return",c);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",i(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}()),Me=Object(l.c)("solveExercise/feedbackRating",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.proposition_id,t.index,r=t.feedback_id,n=t.solution_id,i=a.dispatch,c=a.rejectWithValue,e.prev=2,e.next=5,i(b("/api/feedbacks/rating","POST",{feedback_id:r,solution_id:n}));case 5:return o=e.sent,e.abrupt("return",o);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",c(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}()),Ke=Object(l.c)("solveExercise/rating",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,n=t.rating,i=a.dispatch,c=a.rejectWithValue,e.prev=2,e.next=5,i(b("/api/feedbacks/rating/".concat(r),"PATCH",{rating:n}));case 5:return o=e.sent,e.abrupt("return",o);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",c(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}()),Qe=Object(l.d)({name:"solveExercise",initialState:{exercise:null,status:"idle",error:null,constants:[],predicates:[],functions:[],solutions:{},solution:null},reducers:{update:{reducer:function(e,t){var a=t.payload,r=a.value,n=a.id;e.solutions[n].solution=r.replace(/(\r\n|\n|\r)/gm,"")},prepare:function(e,t){return{payload:{value:e,id:t}}}}},extraReducers:(pe={},Object(s.a)(pe,We.pending,(function(e,t){e.status="loading"})),Object(s.a)(pe,We.fulfilled,(function(e,t){e.status="succeeded",e.exercise=t.payload,e.constants=Object(E.parseConstants)(e.exercise.constants),e.predicates=Object(E.parsePredicates)(e.exercise.predicates),e.functions=Object(E.parseFunctions)(e.exercise.functions);var a,r=Object(u.a)(e.exercise.propositions);try{for(r.s();!(a=r.n()).done;){var n=a.value;e.solutions[n.proposition_id]={evaluation:null,status:"idle",error:null,feedbacks:[]},null===n.solution||void 0===n.solution?e.solutions[n.proposition_id].solution="":e.solutions[n.proposition_id].solution=n.solution}}catch(i){r.e(i)}finally{r.f()}})),Object(s.a)(pe,We.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(s.a)(pe,De.pending,(function(e,t){var a=t.meta.arg.proposition_id;e.solutions[a].status="loading"})),Object(s.a)(pe,De.fulfilled,(function(e,t){var a=t.meta.arg.proposition_id,r=t.payload,n=e.solutions[a];n.status="succeeded",n.evaluation=r})),Object(s.a)(pe,De.rejected,(function(e,t){var a=t.meta.arg.proposition_id,r=t.payload.error,n=e.solutions[a];n.status="failed",n.error=r})),Object(s.a)(pe,Re.pending,(function(e,t){})),Object(s.a)(pe,Re.fulfilled,(function(e,t){var a=t.meta.arg.proposition_id;e.solutions[a].feedbacks=t.payload})),Object(s.a)(pe,Re.rejected,(function(e,t){})),Object(s.a)(pe,Me.pending,(function(e,t){})),Object(s.a)(pe,Me.fulfilled,(function(e,t){var a=t.meta.arg,r=a.proposition_id,n=a.index;e.solutions[r].feedbacks[n].rating_id=t.payload})),Object(s.a)(pe,Me.rejected,(function(e,t){})),pe)}),Ye=Qe.actions.update,He=function(e){return e.solveExercise.exercise},Je=function(e){return e.solveExercise.status},$e=function(e){return e.solveExercise.error},Xe=function(e,t){return e.solveExercise.solutions[t].evaluation},Ze=function(e,t){return e.solveExercise.solutions[t].status},et=function(e,t){return e.solveExercise.solutions[t].error},tt=function(e,t){return e.solveExercise.solutions[t].feedbacks},at=Qe.reducer,rt=a(62),nt=a(63),it=Object(l.c)("user/login",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i,c,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.username,n=t.password,i=a.dispatch,c=a.rejectWithValue,e.prev=2,(o={}).username=r,o.password=n,e.next=8,i(b("/api/users/login","POST",o));case 8:return s=e.sent,e.abrupt("return",s);case 12:return e.prev=12,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",c(e.t0.message));case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,a){return e.apply(this,arguments)}}()),ct=Object(l.c)("user/loginGithub",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i,c,o,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.code,n=t.token,i=a.dispatch,c=a.rejectWithValue,e.prev=2,o={},void 0!==r?o.code=r:void 0!==n&&(o.token=n),e.next=7,i(b("/api/users/login/github/auth","POST",o));case 7:return s=e.sent,e.abrupt("return",s);case 11:return e.prev=11,e.t0=e.catch(2),console.error(e.t0.message),e.abrupt("return",c(e.t0.message));case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,a){return e.apply(this,arguments)}}());function ot(e){if(null!==e)try{var t=JSON.parse(nt.Buffer.from(e.split(".")[1],"base64").toString());return{user:{username:t.username},isLoggedIn:!0,isAdmin:t.isAdmin}}catch(a){return}}var st=function(){return ot(localStorage.getItem("formalization_checker_token"))};function lt(e,t){if(e.status="succeeded",e.usernameValue="",e.passwordValue="",t.payload){var a=ot(t.payload.token);a&&(e.user=a.user,e.isLoggedIn=a.isLoggedIn,e.isAdmin=a.isAdmin,localStorage.setItem("formalization_checker_token",t.payload.token))}else e.error=""}var ut,dt=Object(l.d)({name:"user",initialState:Object(rt.a)({isLoggedIn:!1,isAdmin:!1,user:null,status:"idle",error:null,usernameValue:"",passwordValue:""},null!==(fe=st())&&void 0!==fe?fe:{}),reducers:{updateUsername:function(e,t){e.usernameValue=t.payload},updatePassword:function(e,t){e.passwordValue=t.payload},logOut:function(e){localStorage.removeItem("formalization_checker_token"),e.isLoggedIn=!1,e.user=null,e.status="idle",e.error=""},setUser:function(e){var t=st();t&&(e.user=t.user,e.isLoggedIn=t.isLoggedIn,e.isAdmin=t.isAdmin)}},extraReducers:(Ee={},Object(s.a)(Ee,it.pending,(function(e,t){e.status="loading"})),Object(s.a)(Ee,it.fulfilled,lt),Object(s.a)(Ee,it.rejected,(function(e,t){e.status="failed",e.error="No such combination of username and password found."})),Object(s.a)(Ee,ct.pending,(function(e,t){e.status="loading"})),Object(s.a)(Ee,ct.fulfilled,lt),Object(s.a)(Ee,ct.rejected,(function(e,t){e.status="failed",e.error="No such combination of username and password found."})),Ee)}),mt=function(e){var t;return null===(t=e.user.user)||void 0===t?void 0:t.username},pt=dt.actions,ft=pt.updateUsername,Et=pt.updatePassword,bt=pt.logOut,vt=pt.setUser,ht=dt.reducer,gt=Object(l.c)("users",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.dispatch,n=a.rejectWithValue,e.prev=1,e.next=4,r(b("/api/users/".concat(t),"GET"));case 4:return i=e.sent,e.abrupt("return",i);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",n(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),xt=Object(l.c)("admins",function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,n,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.dispatch,n=a.rejectWithValue,e.prev=1,e.next=4,r(b("/api/users","POST",t));case 4:return i=e.sent,e.abrupt("return",i);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",n(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,a){return e.apply(this,arguments)}}()),yt=Object(l.d)({name:"admins",initialState:{users:[""],status:"idle",error:null,changed:{}},reducers:{addChanged:function(e,t){e.changed[t.payload]=!e.changed[t.payload]}},extraReducers:(ut={},Object(s.a)(ut,gt.pending,(function(e,t){e.status="loading"})),Object(s.a)(ut,gt.fulfilled,(function(e,t){e.status="succeeded",e.users=t.payload;for(var a=0;a<e.users.length;a++)e.changed[e.users[a].user_name]=e.users[a].is_admin})),Object(s.a)(ut,gt.rejected,(function(e,t){e.status="failed",e.error="There are no users"})),Object(s.a)(ut,xt.pending,(function(e,t){e.status="loading"})),Object(s.a)(ut,xt.fulfilled,(function(e,t){e.status="succeeded",e.users=[];for(var a=0,r=Object.entries(t.payload);a<r.length;a++){var n=Object(v.a)(r[a],2),i=n[0],c=n[1];e.users.push({user_name:i,is_admin:c})}})),Object(s.a)(ut,xt.rejected,(function(e,t){e.status="failed",e.error="Unsuccessful saving admins"})),ut)}),jt=function(e){return e.allUsers.users},kt=function(e){return e.allUsers.status},Ot=function(e){return e.allUsers.error},_t=function(e){return e.allUsers.changed},wt=yt.actions.addChanged,zt=yt.reducer,St=a(45),Nt=a(19),Ft=Object(St.a)({reducerPath:"bad_formalizations",baseQuery:function e(t,a,r){return void 0===e.queryFn&&(e.queryFn=Object(Nt.d)({baseUrl:"".concat(a.getState().backend.url,"/api/exercises"),prepareHeaders:function(e){return e.set("Authorization","Bearer "+localStorage.getItem("formalization_checker_token")),e}})),e.queryFn(t,a,r)},endpoints:function(e){return{getExercises:e.query({query:function(){return"/"},skipCache:!0}),getBadExercises:e.query({query:function(){return"/bad_formalizations"},skipCache:!0}),getBadPropositions:e.query({query:function(e){return"/bad_formalizations/".concat(e)}}),getBadFormalizations:e.query({query:function(e){var t=e.exercise_id,a=e.proposition_id;return"/bad_formalizations/".concat(t,"/").concat(a)}}),getBadFormalizationInfo:e.query({query:function(e){var t=e.exercise_id,a=e.bad_formalization_id;return"/bad_formalization/".concat(t,"/").concat(a)}})}}}),Ct=Ft.useGetExercisesQuery,Tt=Ft.useGetBadExercisesQuery,At=Ft.useGetBadPropositionsQuery,It=Ft.useGetBadFormalizationsQuery,Lt=Ft.useGetBadFormalizationInfoQuery,Vt=Object(St.a)({reducerPath:"feedbacks",baseQuery:function e(t,a,r){return void 0===e.queryFn&&(e.queryFn=Object(Nt.d)({baseUrl:"".concat(a.getState().backend.url,"/api/feedbacks"),prepareHeaders:function(e){return e.set("Authorization","Bearer "+localStorage.getItem("formalization_checker_token")),e}})),e.queryFn(t,a,r)},tagTypes:["Feedbacks"],endpoints:function(e){return{getFeedbacks:e.query({query:function(e){return{url:"all/bad_formalization/".concat(e.bad_formalization_id),method:"GET"}},skipCache:!0,providesTags:["Feedbacks"]}),addFeedback:e.mutation({query:function(e){return{url:"/",method:"POST",body:e}},invalidatesTags:["Feedbacks"]}),updateFeedback:e.mutation({query:function(e){return{url:"/".concat(e.id),method:"PATCH",body:e}},invalidatesTags:["Feedbacks"]})}}}),Pt=Vt.useGetFeedbacksQuery,Ut=Vt.useAddFeedbackMutation,qt=Vt.useUpdateFeedbackMutation,Bt=(a(92),a(93),a(104)),Gt=a(114),Wt=a(116),Dt=a(110),Rt=a(115),Mt=a(10),Kt=a(14),Qt=a(52),Yt=["isLoggedIn","component","location"];var Ht=Object(o.c)((function(e){return{isLoggedIn:e.user.isLoggedIn}}))((function(e){var t=e.isLoggedIn,a=e.component,r=e.location,i=Object(Qt.a)(e,Yt);return n.a.createElement(Kt.b,Object.assign({},i,{render:function(e){return t?n.a.createElement(a,e):n.a.createElement(Kt.a,{to:{pathname:"/login",state:{from:r}}})}}))})),Jt=a(103),$t=a(113),Xt=a(31);var Zt={updateUsername:ft,updatePassword:Et,logIn:it,logInByGithub:ct,setUser:vt},ea=Object(o.c)((function(e){return{usernameValue:e.user.usernameValue,passwordValue:e.user.passwordValue,isLoggedIn:e.user.isLoggedIn,status:e.user.status,error:e.user.error}}),Zt)((function(e){var t=e.usernameValue,a=e.passwordValue,i=e.updateUsername,c=e.updatePassword,o=e.setUser,s=e.location,l=e.isLoggedIn,u=e.status,d=e.error,m=e.logIn,p=e.logInByGithub;return Object(r.useEffect)((function(){null!==localStorage.getItem("formalization_checker_token")&&o()}),[u,o]),"loading"===u?n.a.createElement(Jt.a,{animation:"border",variant:"primary"}):window.location.href.match("code")?(p({code:window.location.href.split("code=")[1]}),n.a.createElement(Kt.a,{to:"/"})):l?s.state&&s.state.from&&s.state.from.pathname?n.a.createElement(Kt.a,{to:s.state.from.pathname}):n.a.createElement(Kt.a,{to:"/"}):n.a.createElement($t.a,null,n.a.createElement($t.a.Group,null,n.a.createElement($t.a.Label,null,"Username"),n.a.createElement($t.a.Control,{type:"text",placeholder:"Enter username",value:t,onChange:function(e){return i(e.target.value)}})),n.a.createElement($t.a.Group,null,n.a.createElement($t.a.Label,null,"Password"),n.a.createElement($t.a.Control,{type:"password",placeholder:"Enter password",value:a,onChange:function(e){return c(e.target.value)}}),n.a.createElement($t.a.Text,{className:"text-danger"},d)),n.a.createElement(Bt.a,{type:"submit",style:{marginTop:"0.5em",marginBottom:"0.5em",marginRight:"0.5em"},onClick:function(e){e.preventDefault(),m({username:t,password:a})}},"Log in"),n.a.createElement(Bt.a,{type:"submit",style:{marginTop:"0.5em",marginBottom:"0.5em",marginLeft:"0.5em"},onClick:function(e){e.preventDefault();var t="https://github.com/login/oauth/authorize?client_id="+Xt.CLIENT_ID+"&redirect_uri="+Xt.REDIRECT+"&scope=read:user";window.location.replace(t)}},"Log in with Github"))})),ta=a(117),aa=function(e){var t=e.error,a=e.as,r=void 0===a?Rt.a:a;return n.a.createElement(r,{variant:"danger"},n.a.createElement("strong",null,"An error has occured while fetching the exercises list.")," ",200==t.originalStatus?t.error:"Server responded with status ".concat(t.originalStatus,"."))};var ra={fetchExercise:We},na=Object(o.c)((function(e){return{username:mt(e)}}),ra)((function(e){var t=e.fetchExercise,a=e.username,r=e.onSelect,i=Ct(void 0,{refetchOnMountOrArgChange:!0}),c=i.data,o=i.isLoading,s=i.isSuccess,l=i.isError,u=i.error,d=null;if(o)d=n.a.createElement(Jt.a,{animation:"border",variant:"primary"});else if(s){var m=c.map((function(e){return void 0===r?n.a.createElement(ta.a.Item,{as:Mt.b,to:"/solve/".concat(e.exercise_id),key:e.exercise_id,action:!0,onClick:function(){return t({exercise_id:e.exercise_id,user_name:a})}},e.title):n.a.createElement(ta.a.Item,{key:e.exercise_id,action:!0,onClick:function(){return r(e.exercise_id)}},e.title)}));d=n.a.createElement(ta.a,null,m)}else l&&(d=n.a.createElement(aa,{error:u}));return n.a.createElement("div",null,n.a.createElement("h1",{className:"mb-4"},"Exercises"),d)})),ia=a(111);var ca=function(e){var t=e.value,a=e.error;if(!a)return null;var r=a.location.start.offset,i=a.location.end.offset,c=t.substring(0,r),o=t.substring(r,i),s=t.substring(i),l=""===t?null:n.a.createElement("div",{className:"text-body"},c,n.a.createElement("mark",{className:"bg-warning"},o),s);return n.a.createElement($t.a.Control.Feedback,{type:"invalid"},l,n.a.createElement("div",null,a.message))},oa=a(109),sa=a(65),la=a(105),ua=a(106),da=a(107),ma=a(108);var pa={updateRating:Ke},fa=Object(o.c)(null,pa)((function(e){var t,a=e.feedback,i=e.updateRating,c=Object(r.useState)("none"),o=Object(v.a)(c,2),s=o[0],l=o[1],u=Object(r.useState)(n.a.createElement(la.a,null)),d=Object(v.a)(u,2),m=d[0],p=d[1],f=Object(r.useState)(n.a.createElement(ua.a,null)),E=Object(v.a)(f,2),b=E[0],h=E[1],g=n.a.createElement("button",{className:"btn ".concat("like"===s?"like-active":""),key:a.feedback_id,onClick:function(){"none"===s||"dislike"===s?(l("like"),p(n.a.createElement(da.a,null)),h(n.a.createElement(ua.a,null)),i({id:a.rating_id,rating:1})):"like"===s&&(l("none"),p(n.a.createElement(la.a,null)),i({id:a.rating_id,rating:0}))}},m),x=n.a.createElement("button",{className:"btn ".concat("dislike"===s?"dislike-active":""),key:a.feedback_id,onClick:function(){"none"===s||"like"===s?(l("dislike"),h(n.a.createElement(ma.a,null)),p(n.a.createElement(la.a,null)),i({id:a.rating_id,rating:-1})):"dislike"===s&&(l("none"),h(n.a.createElement(ua.a,null)),i({id:a.rating_id,rating:0}))}},b);return t=n.a.createElement(oa.a,{className:"p-0 mb-1"},n.a.createElement(sa.a,{className:"p-0"},n.a.createElement(Rt.a,{variant:"info",className:"mb-0 small p-2"},a.feedback)),n.a.createElement(sa.a,{className:"p-0",xs:"auto"},g),n.a.createElement(sa.a,{className:"p-0",xs:"auto"},x)),n.a.createElement(Dt.a,{fluid:!0},t)}));var Ea={fetchFeedbacks:Re,feedbackRating:Me},ba=Object(o.c)((function(e,t){return{evaluation:Xe(e,t.proposition_id),feedbacks:tt(e,t.proposition_id),status:Ze(e,t.proposition_id),error:et(e,t.proposition_id)}}),Ea)((function(e){var t=e.proposition_id,a=e.evaluation,i=e.feedbacks,c=e.fetchFeedbacks,o=e.feedbackRating,s=e.status,l=e.error,u=Object(r.useState)(-1),d=Object(v.a)(u,2),m=d[0],p=d[1];return Object(r.useEffect)((function(){"succeeded"===s&&(c({proposition_id:t,bad_formalization_id:a.bad_formalization_id,active:!0}),p(-1))}),[s,c,t,a]),"loading"===s?n.a.createElement(Jt.a,{animation:"border",variant:"primary"}):"succeeded"===s?n.a.createElement(n.a.Fragment,null,za(a),Sa(t,a,i,o,m,p)):"failed"===s?n.a.createElement(ga,null,l):null})),va=function(e){var t=e.type,a=e.children;return n.a.createElement($t.a.Text,{className:"text-".concat(t),children:a})},ha=function(){return n.a.createElement(va,{type:"success"},n.a.createElement("strong",null,"Your formalization is correct"))},ga=function(e){var t=e.children;return n.a.createElement(va,{type:"danger",className:"text-warning"},n.a.createElement("strong",null,"An error occured while validating your formalization:"),t)},xa=" Discuss your formalization with your peers or teachers.",ya=function(){return n.a.createElement(va,{type:"warning"},n.a.createElement("strong",null,"We were unable to automatically validate your formalization."),xa)},ja=function(e){var t=e.summary,a=e.children;return n.a.createElement(va,{type:"danger"},n.a.createElement("strong",null,"Your formalization is incorrect."),a?n.a.createElement("details",{open:!0},n.a.createElement("summary",{className:"mb-2"},t),a):n.a.createElement("p",null,t))},ka=function(e){var t=e.interpFunc,a=e.viewValue,r=e.subscript;if(!t)return null;var i=Object.entries(t);return i.length>0&&n.a.createElement("ul",{className:"list-unstyled mb-1"},i.map((function(e){var t=Object(v.a)(e,2),i=t[0],c=t[1];return n.a.createElement("li",{key:i},"\ud835\udc56",r,"(",i,") = ",a(c))})))},Oa=function(e){return"{".concat(e.map((function(e){return e.length>1?"(".concat(e,")"):e})).join(", "),"}")},_a=function(e){var t=e.subscript,a=e.D,r=e.iC,i=e.iP,c=e.iF;return n.a.createElement(n.a.Fragment,null,n.a.createElement("p",{className:"mb-1"},"\ud835\udc37",t," = {".concat(a.join(", "),"}")),n.a.createElement(ka,{interpFunc:r,viewValue:function(e){return e},subscript:t}),n.a.createElement(ka,{interpFunc:i,viewValue:Oa,subscript:t}),n.a.createElement(ka,{interpFunc:c,viewValue:Oa,subscript:t}))},wa=function(e){var t=e.structure,a=e.description,r=e.index,i=e.msgNotFound,c=r?n.a.createElement("sub",null,r):null;return t?n.a.createElement("div",{className:"mb-2"},n.a.createElement("p",{className:"mb-1"},a," ","\u2133",c," = (\ud835\udc37",c,", \ud835\udc56",c,") where:"),n.a.createElement(_a,Object.assign({subscript:c},t))):n.a.createElement("p",{className:"mb-2"},null!==i&&void 0!==i?i:"We could not find a counterexample automatically.",xa)},za=function(e){if("OK"===e.solutionToFormalization&&"OK"===e.formalizationToSolution)return n.a.createElement(ha,null);if("TE"===e.solutionToFormalization||"TE"===e.formalizationToSolution||"ME"===e.solutionToFormalization||"ME"===e.formalizationToSolution)return n.a.createElement(ya,null);var t=new Set(e.languageContants),a={result:e.formalizationToSolution,description:e.m1,counterexample:D(e.domainFormalizationToSolution,e.symbolsFormalizationToSolution,t)},r={result:e.solutionToFormalization,description:e.m2,counterexample:D(e.domainSolutionToFormalization,e.symbolsSolutionToFormalization,t)};return"OK"===r.result&&"WA"===a.result?n.a.createElement(ja,{summary:"Your formalization is false\n                in some first-order structure\n                where the correct formalization is true."},n.a.createElement(wa,{description:"One such structure is",structure:a.counterexample})):"WA"===r.result&&"OK"===a.result?n.a.createElement(ja,{summary:"Your formalization is true\n                in some first-order structure\n                where the correct formalization is false."},n.a.createElement(wa,{description:"One such structure is",structure:r.counterexample})):n.a.createElement(ja,{summary:"Your formalization is false\n                in some first-order structure\n                where the correct formalization is true,\n                and vice versa."},n.a.createElement(wa,{description:"Your formalization is true and the correct formalization is false, e.g., in structure",structure:r.counterexample,index:1,msgNotFound:"We could not automatically find a structure\n                    in which your formalization is true\n                    and the correct formalization is false."}),n.a.createElement(wa,{description:"Your formalization is false and the correct formalization is true, e.g., in structure",structure:a.counterexample,index:2,msgNotFound:"We could not automatically find a structure\n                    in which your formalization is false\n                    and the correct formalization is true."}))},Sa=function(e,t,a,r,i,c){if(!(a&&a.length>0))return null;var o=i>=0&&a.slice(0,i+1).map((function(e){return n.a.createElement(fa,{key:e.feedback_id,feedback:e})})),s=i<a.length-1&&n.a.createElement(Bt.a,{className:"mt-1 mr-1 mb-1",variant:"info",size:"sm",onClick:function(){c(++i),r({proposition_id:e,index:i,feedback_id:a[i].feedback_id,solution_id:t.solution_id})}},i<0?"Hint":"Next hint");return n.a.createElement(n.a.Fragment,null,o,s)};var Na={update:Ye,evaluate:De},Fa=Object(o.c)((function(e,t){return function(e,t){var a=e.solveExercise.solutions[t].solution;return{value:a,error:W(a,new Set(e.solveExercise.constants),q(e.solveExercise.predicates),q(e.solveExercise.functions),E.parseFormulaWithPrecedence)}}(e,t.proposition_id)}),Na)((function(e){var t=e.exercise_id,a=e.proposition_id,r=e.proposition,i=e.value,c=e.error,o=e.update,s=e.evaluate,l=e.user,u=e.onChange,d=function(e){o(e,a),u&&u(e,a)};return n.a.createElement($t.a.Group,{className:"clearfix",controlId:"formalization-".concat(t,"-").concat(a)},n.a.createElement($t.a.Label,null,r),n.a.createElement($t.a.Control,{type:"text",placeholder:"Enter formalization",as:"textarea",rows:1,value:i,onKeyDown:function(e){return"Enter"===e.key&&!c&&s({exercise_id:t,proposition_id:a,solution:i,user:l})},isInvalid:!!c,onChange:function(e){return d(e.target.value)}}),n.a.createElement(Bt.a,{type:"submit",className:"mt-1 float-right",variant:"primary",disabled:c,onClick:function(){return s({exercise_id:t,proposition_id:a,solution:i,user:l})}},"Check"),n.a.createElement(ca,{value:i,error:c}),n.a.createElement(ba,{proposition_id:a}))})),Ca=function(e){var t=e.exerciseId,a=e.exercise,i=e.status,c=e.error,o=e.fetchExercise,s=e.user,l=e.onChange;Object(r.useEffect)((function(){"idle"===i&&o({exercise_id:t,username:s})}),[i,t,a,o,s]);var u=null;if("loading"===i)u=n.a.createElement(Jt.a,{animation:"border",variant:"primary"});else if("succeeded"===i){var d=a.propositions.map((function(e){return n.a.createElement(Fa,{key:e.proposition_id,exercise_id:t,proposition_id:e.proposition_id,proposition:e.proposition,user:s,onChange:l})}));u=n.a.createElement("div",null,n.a.createElement("h2",null,a.title),n.a.createElement("p",null,a.description),n.a.createElement("h5",null,"Language \u2112"),n.a.createElement("p",null,"\ud835\udc9e",n.a.createElement("sub",null,"\u2112")," = ","{ ",a.constants," }"),n.a.createElement("p",null,"\ud835\udcab",n.a.createElement("sub",null,"\u2112")," = ","{ ",a.predicates," }"),n.a.createElement("p",null,"\u2131",n.a.createElement("sub",null,"\u2112")," = ","{ ",a.functions," }"),Ta,n.a.createElement("h5",null,"Propositions"),d)}else"failed"===i&&(u=n.a.createElement(Rt.a,{variant:"danger"},c));return u};var Ta=n.a.createElement("details",{className:"mb-3"},n.a.createElement("summary",{className:"h6"},"Accepted notation of logical symbols"),n.a.createElement(ia.a,{size:"sm",striped:!0,className:"w-auto"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Logical symbol"),n.a.createElement("th",null,"Accepted notation"))),n.a.createElement("tbody",null,[{name:"Negation",preferredToken:"\xac",acceptedTokens:["-","!","~","\\neg","\\lnot"]},{name:"Equality",preferredToken:"\u2250",acceptedTokens:["="]},{name:"Inequality",preferredToken:"\u2260",acceptedTokens:["!=","/=","<>","\\neq"]},{name:"Conjunction",preferredToken:"\u2227",acceptedTokens:["&&","&","/\\","\\wedge","\\land"]},{name:"Disjunction",preferredToken:"\u2228",acceptedTokens:["||","|","\\/","\\vee","\\lor"]},{name:"Implication",preferredToken:"\u2192",acceptedTokens:["->","\\to"]},{name:"Equivalence",preferredToken:"\u2194\ufe0e",acceptedTokens:["\u27f7","<->","<--\x3e","\\lequiv","\\leftrightarrow"]},{name:"Existential quantifier",preferredToken:"\u2203",acceptedTokens:["\\exists","\\e","\\E"]},{name:"Universal quantifier",preferredToken:"\u2200",acceptedTokens:["\\forall","\\a","\\A"]}].map((function(e){var t=e.name,a=e.preferredToken,r=e.acceptedTokens;return n.a.createElement("tr",{key:t},n.a.createElement("th",null,t),n.a.createElement("td",null,n.a.createElement("strong",{key:a},n.a.createElement("code",null,a)),r.map((function(e){return n.a.createElement(n.a.Fragment,{key:e}," ",n.a.createElement("code",{className:"ml-2"},e))}))))}))))),Aa={fetchExercise:We},Ia=Object(o.c)((function(e){return{exercise:He(e),status:Je(e),error:$e(e),user:mt(e)}}),Aa)((function(e){var t=Object(Kt.g)().id;return n.a.createElement(Ca,Object.assign({exerciseId:t},e))})),La=a(112);var Va=function(e){var t=e.symbolsKind,a=e.symbolsSet,r=e.value,i=e.error,c=e.update;return n.a.createElement(La.a,{hasValidation:!!i,className:"mb-3"},n.a.createElement(La.a.Prepend,null,n.a.createElement(La.a.Text,{as:"label"},a,n.a.createElement("sub",null,"\u2112"),"\xa0=\xa0{")),n.a.createElement($t.a.Control,{type:"text",placeholder:"Enter ".concat(t),value:r,onChange:function(e){return c(e.target.value)},isInvalid:!!i}),n.a.createElement(La.a.Append,null,n.a.createElement(La.a.Text,null,"}")),n.a.createElement(ca,{value:r,error:i}))},Pa=ve,Ua={update:Z},qa=Object(o.c)(Pa,Ua)((function(e){return n.a.createElement(Va,Object.assign({symbolsKind:"individual constants",symbolsSet:"\ud835\udc9e"},e))})),Ba=he,Ga={update:ee},Wa=Object(o.c)(Ba,Ga)((function(e){return n.a.createElement(Va,Object.assign({symbolsKind:"predicate symbols",symbolsSet:"\ud835\udcab"},e))})),Da=ge,Ra={update:te},Ma=Object(o.c)(Da,Ra)((function(e){return n.a.createElement(Va,Object.assign({symbolsKind:"function symbols",symbolsSet:"\u2131"},e))}));var Ka=Object(o.c)((function(e){return{errorMessage:xe(e).errorMessage}}))((function(e){var t=e.errorMessage;return t?n.a.createElement("p",{className:"text-danger"},t):null}));var Qa=we,Ya={update:le},Ha=Object(o.c)(Qa,Ya)((function(e){var t=e.value,a=e.error,r=e.update;return n.a.createElement($t.a.Group,null,n.a.createElement($t.a.Label,null,"Global preferred model constraints (optional):"),n.a.createElement($t.a.Control,{type:"text",placeholder:"Enter constraints",value:t,as:"textarea",rows:1,onChange:function(e){return r(e.target.value)},isInvalid:!!a}),n.a.createElement(ca,{value:t,error:a}))}));var Ja=function(){return n.a.createElement("div",{className:"mt-4 mb-4"},n.a.createElement("h4",null,"Language \u2112"),n.a.createElement(qa,null),n.a.createElement(Wa,null),n.a.createElement(Ma,null),n.a.createElement(Ka,null),n.a.createElement(Ha,null))};var $a={remove:oe,update:re,updateConstraints:se},Xa=Object(o.c)((function(e,t){var a=Oe(e,t.i,t.j),r=_e(e,t.i,t.j);return{value:a.value,error:a.error,value2:r.value,error2:r.error}}),$a)((function(e){var t=e.i,a=e.j,r=e.value,i=e.value2,c=e.error,o=e.error2,s=e.remove,l=e.update,u=e.updateConstraints,d=e.cannotBeRemoved,m="".concat(t+1,".").concat(a+1),p="-".concat(t,"-").concat(a);return n.a.createElement("li",{className:"clearfix mb-4"},n.a.createElement($t.a.Group,{controlId:"formalization".concat(p)},n.a.createElement($t.a.Label,null,"Formalization ".concat(m)),n.a.createElement($t.a.Control,{type:"text",placeholder:"Enter formalization",value:r,as:"textarea",rows:1,onChange:function(e){return l(e.target.value,t,a)},isInvalid:!!c}),n.a.createElement(Bt.a,{className:"mt-1 float-right",variant:"outline-danger",size:"sm",onClick:function(){return s(t,a)},disabled:d},"Remove formalization ",m),n.a.createElement(ca,{value:r,error:c})),n.a.createElement($t.a.Group,{controlId:"constraints".concat(p),size:"sm"},n.a.createElement($t.a.Label,null,n.a.createElement("small",null,"Preferred model constraints ",m," (optional)")),n.a.createElement($t.a.Control,{type:"text",placeholder:"Enter constraints",value:i,as:"textarea",size:"sm",rows:1,onChange:function(e){return u(e.target.value,t,a)},isInvalid:!!o}),n.a.createElement(ca,{value:i,error:o})))}));var Za={add:ie,remove:ce,update:ae},er=Object(o.c)((function(e,t){return{value:ke(e,t.i),formalizations:je(e,t.i)}}),Za)((function(e){var t=e.i,a=e.value,r=e.formalizations,i=e.add,c=e.remove,o=e.update,s=r.length>1,l=r.map((function(e,a){return n.a.createElement(Xa,{key:a,i:t,j:a,cannotBeRemoved:!s})})),u=""===a?n.a.createElement($t.a.Control.Feedback,{type:"invalid"},"This field cannot be empty"):null;return n.a.createElement("div",{className:"mb-4"},n.a.createElement($t.a.Group,{className:"clearfix mb-0",controlId:"proposition-".concat(t)},n.a.createElement("h5",null,n.a.createElement($t.a.Label,{className:"d-block"},"Proposition\xa0",t+1)),n.a.createElement($t.a.Control,{type:"text",placeholder:"Enter proposition",value:a,onChange:function(e){return o(e.target.value,t)},isInvalid:!!u}),n.a.createElement(Bt.a,{className:"mt-1 mb-1 float-right",variant:"outline-danger",size:"sm",onClick:function(){return c(t)}},"Remove proposition\xa0",t+1),u),n.a.createElement("ol",{className:"list-unstyled pl-5"},l),n.a.createElement("div",{className:"pl-5 mb-3"},n.a.createElement(Bt.a,{variant:"outline-success",size:"sm",onClick:function(){return i(t)}},"Add formalization")))}));var tr={add:ne},ar=Object(o.c)((function(e){return{propositions:ye(e)}}),tr)((function(e){var t=e.propositions,a=e.add,r=t.map((function(e,t){return n.a.createElement(er,{key:t,i:t})}));return n.a.createElement("div",{className:"mb-4 clearfix"},n.a.createElement("h4",{className:"mb-3"},"Propositions"),r,n.a.createElement("div",null,n.a.createElement(Bt.a,{variant:"success",onClick:function(){return a()}},"Add proposition")))}));var rr=be,nr={update:$},ir=Object(o.c)(rr,nr)((function(e){var t=e.value,a=e.update,r=""===t?n.a.createElement($t.a.Control.Feedback,{type:"invalid"},"This field cannot be empty"):null;return n.a.createElement($t.a.Group,{controlId:"exercise-title"},n.a.createElement($t.a.Label,null,"Exercise title"),n.a.createElement($t.a.Control,{type:"text",placeholder:"Enter exercise title",value:t,isInvalid:!!r,onChange:function(e){return a(e.target.value)}}),r)}));var cr=function(e){return{value:e.addExercise.description}},or={update:X},sr=Object(o.c)(cr,or)((function(e){var t=e.value,a=e.update;return n.a.createElement($t.a.Group,{controlId:"exercise-description"},n.a.createElement($t.a.Label,null,"Description"),n.a.createElement($t.a.Control,{as:"textarea",placeholder:"Enter description",value:t,onChange:function(e){return a(e.target.value)}}))}));var lr=function(e){var t=e.containsErrors,a=e.saveExercise;return n.a.createElement($t.a.Group,{className:"text-center text-md-right mb-4"},n.a.createElement(Bt.a,{variant:"primary",size:"lg",disabled:t,onClick:a},"Save exercise"),t&&n.a.createElement($t.a.Text,{className:"text-danger"},"Fix all errors above in order to be able to save the exercise"))};var ur={addExercise:R},dr=Object(o.c)((function(e){return{status:e.addExercise.status,added:e.addExercise.added,error:e.addExercise.error,containsErrors:Se(e),title:be(e).value}}),ur)((function(e){var t=e.status,a=e.error,r=e.containsErrors,i=e.title,c=e.addExercise,o=e.added,s=null;return"idle"===t?s=o?n.a.createElement(Rt.a,{variant:"success"},"Exercise ",n.a.createElement("b",null,i)," was successfully added to the database."):n.a.createElement($t.a,null,n.a.createElement("h1",null,"Add exercise"),n.a.createElement(ir,null),n.a.createElement(sr,null),n.a.createElement(Ja,null),n.a.createElement(ar,null),n.a.createElement(lr,{containsErrors:r,saveExercise:c})):"loading"===t?s=n.a.createElement(Jt.a,{animation:"border",variant:"primary"}):"failed"===t&&(s=n.a.createElement(Rt.a,{variant:"danger"},a)),s})),mr=["isLoggedIn","isAdmin","component","location"];var pr=Object(o.c)((function(e){return{isLoggedIn:e.user.isLoggedIn,isAdmin:e.user.isAdmin}}))((function(e){var t=e.isLoggedIn,a=e.isAdmin,r=e.component,i=e.location,c=Object(Qt.a)(e,mr);return n.a.createElement(Kt.b,Object.assign({},c,{render:function(e){return t?a?n.a.createElement(r,e):n.a.createElement(Kt.a,{to:{pathname:"/",state:{from:i}}}):n.a.createElement(Kt.a,{to:{pathname:"/login",state:{from:i}}})}}))})),fr=function(){var e=Ct(void 0,{refetchOnMountOrArgChange:!0}),t=e.data,a=e.isLoading,r=e.isSuccess,i=e.isError,c=e.error,o=null;if(a)o=n.a.createElement(Jt.a,{animation:"border",variant:"primary"});else if(r){var s=t.map((function(e){return n.a.createElement("tr",{key:e.exercise_id},n.a.createElement("td",null,n.a.createElement(Mt.b,{to:"/progress/".concat(e.exercise_id),key:e.exercise_id},e.title)),n.a.createElement("td",null,e.attempted))}));o=n.a.createElement(ia.a,{striped:!0,bordered:!0,hover:!0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Exercise"),n.a.createElement("th",null,"Students attempted"))),n.a.createElement("tbody",null,s))}else i&&(o=n.a.createElement(aa,{error:c}));return n.a.createElement("div",null,n.a.createElement("h2",{className:"mb-4"},"Student progress"),o)},Er=function(e){var t=e.exercise_id,a=e.proposition_id,r=e.feedback;return n.a.createElement("a",{href:"/bad_formalizations/".concat(t,"/").concat(a)},r.slice(0,25))};var br={fetchUsersSolutions:Te},vr=Object(o.c)((function(e){return{solutions:Pe(e),status:qe(e),error:Be(e),name:Ue(e),title:Le(e)}}),br)((function(e){var t=e.solutions,a=e.status,i=e.error,c=e.title,o=e.match.params,s=o.exercise_id,l=o.user_name,u=e.fetchUsersSolutions;Object(r.useEffect)((function(){u({exercise_id:s,user_name:l})}),[s,l]);var d=null;if("loading"===a)d=n.a.createElement(Jt.a,{animation:"border",variant:"primary"});else if("succeeded"===a){for(var m=[],p=[],f=null,E=!1,b=function(e){var a=t[e],r=new Date(a.date).toLocaleString("sk-SK"),i=a.feedbacks.map((function(e,t){return t>0?n.a.createElement("p",{className:"d-inline"},", ",n.a.createElement(Er,{exercise_id:a.exercise_id,proposition_id:a.proposition_id,feedback_id:e.feedback_id,feedback:e.feedback})):n.a.createElement(Er,{exercise_id:a.exercise_id,proposition_id:a.proposition_id,feedback_id:e.feedback_id,feedback:e.feedback})}));null===f?(f=a.proposition,E=!0):f!==a.proposition&&E&&(m.push(n.a.createElement("h5",{key:f}," ",f)),m.push(n.a.createElement(ia.a,{striped:!0,bordered:!0,hover:!0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Date"),n.a.createElement("th",null,"Solution"),n.a.createElement("th",null,"Correct"),n.a.createElement("th",null,"Feedbacks"))),n.a.createElement("tbody",null,p))),p=[],f=a.proposition),a.is_correct?p.push(n.a.createElement("tr",{key:a.solution_id},n.a.createElement("td",null,r),n.a.createElement("td",null,a.solution),n.a.createElement("td",null,"  \u2713"),n.a.createElement("td",null))):p.push(n.a.createElement("tr",{key:a.solution_id},n.a.createElement("td",null,r),n.a.createElement("td",null,a.solution),n.a.createElement("td",null,"  \u2715"),n.a.createElement("td",null,i)))},v=0;v<t.length;v++)b(v);m.push(n.a.createElement("h5",{key:f}," ",f)),m.push(n.a.createElement(ia.a,{striped:!0,bordered:!0,hover:!0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Date"),n.a.createElement("th",null,"Solution"),n.a.createElement("th",null,"Correct"),n.a.createElement("th",null,"Feedbacks"))),n.a.createElement("tbody",null,p))),d=n.a.createElement("div",{key:m},m)}else"failed"===a&&(d=n.a.createElement(Rt.a,{variant:"danger"},i));return n.a.createElement("div",null,n.a.createElement("h2",{className:"mb-4",style:{display:"inline-block"}},c),n.a.createElement("h4",{className:"mb-4",style:{display:"inline-block",padding:"0ex 1ex"}},"by"),n.a.createElement("h2",{className:"mb-4",style:{display:"inline-block"}},l),d)}));var hr={fetchAllUsersToExercise:Fe},gr=Object(o.c)((function(e){return{users:Ie(e),status:qe(e),error:Be(e),title:Le(e)}}),hr)((function(e){var t=e.users,a=e.status,i=e.error,c=e.title,o=e.match.params.exercise_id,s=e.fetchAllUsersToExercise;Object(r.useEffect)((function(){s(o)}),[o,s]);var l=null;if("loading"===a)l=n.a.createElement(Jt.a,{animation:"border",variant:"primary"});else if("succeeded"===a){for(var u=[],d=0;d<t.length;d++){var m=new Date(t[d].last_attempt_date).toLocaleString("sk-SK");t[d].last_attempt_correct?u.push(n.a.createElement("tr",{key:t[d].user_name},n.a.createElement("td",null,n.a.createElement(Mt.b,{to:"/progress/".concat(t[d].exercise_id,"/").concat(t[d].user_name),key:t[d].user_name},t[d].user_name)),n.a.createElement("td",null,t[d].solved," "),n.a.createElement("td",null,t[d].attempted," "),n.a.createElement("td",null,t[d].successful_attempts),n.a.createElement("td",null,t[d].attempts),n.a.createElement("td",null,m," \u2713"))):u.push(n.a.createElement("tr",{key:t[d].user_name},n.a.createElement("td",null,n.a.createElement(Mt.b,{to:"/progress/".concat(t[d].exercise_id,"/").concat(t[d].user_name),key:t[d].user_name},t[d].user_name)),n.a.createElement("td",null,t[d].solved," "),n.a.createElement("td",null,t[d].attempted," "),n.a.createElement("td",null,t[d].successful_attempts),n.a.createElement("td",null,t[d].attempts),n.a.createElement("td",null,m," \u2715")))}l=n.a.createElement(ia.a,{striped:!0,bordered:!0,hover:!0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null," "),n.a.createElement("th",{colSpan:2},"Propositions "),n.a.createElement("th",{colSpan:2},"Attempt"),n.a.createElement("th",null," ")),n.a.createElement("tr",null,n.a.createElement("th",null,"Student"),n.a.createElement("th",null,"Solved"),n.a.createElement("th",null,"Attempted"),n.a.createElement("th",null,"Successful"),n.a.createElement("th",null,"Total"),n.a.createElement("th",null,"Last attempt"))),n.a.createElement("tbody",null,u))}else"failed"===a&&(l=n.a.createElement(Rt.a,{variant:"danger"},i));return n.a.createElement("div",null,n.a.createElement("h2",{className:"mb-4"}," ",c," "),l)}));var xr={fetchAllExercisesToUser:Ce,fetchUsersSolutions:Te},yr=Object(o.c)((function(e){return{exercises:Ve(e),status:qe(e),error:Be(e)}}),xr)((function(e){var t=e.exercises,a=e.status,i=e.error,c=e.fetchAllExercisesToUser,o=e.fetchUsersSolutions;Object(r.useEffect)((function(){c()}),[c]);var s=null;if("loading"===a)s=n.a.createElement(Jt.a,{animation:"border",variant:"primary"});else if("succeeded"===a){for(var l=[],u=function(e){var a=new Date(t[e].last_attempt_date).toLocaleString("sk-SK");t[e].last_attempt_correct?l.push(n.a.createElement("tr",{key:t[e].user_name},n.a.createElement("td",null,n.a.createElement(Mt.b,{to:"/progress/".concat(t[e].exercise_id,"/").concat(t[e].user_name),key:t[e].title,onClick:function(){return o({exercise_id:t[e].exercise_id,user_name:t[e].user_name})}},t[e].title)),n.a.createElement("td",null,t[e].solved," "),n.a.createElement("td",null,t[e].attempted," "),n.a.createElement("td",null,t[e].successful_attempts),n.a.createElement("td",null,t[e].attempts),n.a.createElement("td",null,a," \u2713"))):l.push(n.a.createElement("tr",{key:t[e].user_name},n.a.createElement("td",null,n.a.createElement(Mt.b,{to:"/progress/".concat(t[e].exercise_id,"/").concat(t[e].user_name),key:t[e].title,onClick:function(){return o({exercise_id:t[e].exercise_id,user_name:t[e].user_name})}},t[e].title)),n.a.createElement("td",null,t[e].solved," "),n.a.createElement("td",null,t[e].attempted," "),n.a.createElement("td",null,t[e].successful_attempts),n.a.createElement("td",null,t[e].attempts),n.a.createElement("td",null,a," \u2715")))},d=0;d<t.length;d++)u(d);s=n.a.createElement(ia.a,{striped:!0,bordered:!0,hover:!0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null," "),n.a.createElement("th",{colSpan:2},"Propositions "),n.a.createElement("th",{colSpan:2},"Attempt"),n.a.createElement("th",null," ")),n.a.createElement("tr",null,n.a.createElement("th",null,"Exercise"),n.a.createElement("th",null,"Solved"),n.a.createElement("th",null,"Attempted"),n.a.createElement("th",null,"Successful"),n.a.createElement("th",null,"Total"),n.a.createElement("th",null,"Last attempt"))),n.a.createElement("tbody",null,l))}else"failed"===a&&(s=n.a.createElement(Rt.a,{variant:"danger"},i));return n.a.createElement("div",null,n.a.createElement("h2",{className:"mb-4"},"Your progress"),s)}));var jr={fetchAllUsers:gt,addChanged:wt,saveAdmins:xt},kr=Object(o.c)((function(e){return{users:jt(e),status:kt(e),error:Ot(e),changedAdmins:_t(e),user_name:mt(e)}}),jr)((function(e){var t=e.users,a=e.user_name,i=e.status,c=e.error,o=e.fetchAllUsers,s=e.addChanged,l=e.changedAdmins,u=e.saveAdmins;Object(r.useEffect)((function(){"idle"===i&&o(a)}),[i,o]);var d=null;if("loading"===i)d=n.a.createElement(Jt.a,{animation:"border",variant:"primary"});else if("succeeded"===i){var m=t.map((function(e){return n.a.createElement("tr",{key:e.user_name},n.a.createElement("td",null,e.user_name),n.a.createElement("td",null," ",n.a.createElement("input",{type:"checkbox",defaultChecked:e.is_admin,id:e.user_name,onChange:function(e){s(e.target.id)}})," "))}));d=n.a.createElement($t.a,null,n.a.createElement(ia.a,{striped:!0,bordered:!0,hover:!0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Username"),n.a.createElement("th",null,"Is admin"))),n.a.createElement("tbody",null,m)))}else"failed"===i&&(d=n.a.createElement(Rt.a,{variant:"danger"},c));return n.a.createElement("div",null,n.a.createElement("h2",{className:"mb-4"},"Users"),d,n.a.createElement(Bt.a,{onClick:function(e){u(l)}},"Save admins"))}));var Or={saveExercise:M,removeExercise:K},_r=Object(o.c)((function(e){return{status:e.addExercise.status,error:e.addExercise.error,containsErrors:Se(e),title:be(e).value}}),Or)((function(e){var t=e.status,a=e.error,r=e.title,i=e.containsErrors,c=e.removeExercise,o=e.saveExercise,s=null;return"idle"===t?s=n.a.createElement($t.a,null,n.a.createElement("h1",null,"Editing ",n.a.createElement("i",null,r)),n.a.createElement(ir,null),n.a.createElement(sr,null),n.a.createElement(Ja,null),n.a.createElement(ar,null),n.a.createElement(oa.a,{className:"justify-content-end"},n.a.createElement(sa.a,{xs:12,md:{order:2,span:4}},n.a.createElement(lr,{containsErrors:i,saveExercise:o})),n.a.createElement(sa.a,{xs:12,md:{order:1,span:4,offset:4},className:"text-center"},n.a.createElement(Bt.a,{variant:"outline-danger",size:"lg",onClick:c},"Remove exercise")))):"loading"===t?s=n.a.createElement(Jt.a,{animation:"border",variant:"primary"}):"succeeded"===t?s=n.a.createElement(Rt.a,{variant:"success"},"Exercise was successfully changed in the database."):"removed"===t?s=n.a.createElement(Rt.a,{variant:"success"},"Exercise  was successfully removed from database."):"failed"===t&&(s=n.a.createElement(Rt.a,{variant:"danger"},a)),s}));var wr={fetchSavedExercise:Q},zr=Object(o.c)(null,wr)((function(e){var t=e.fetchSavedExercise,a=Ct(void 0,{refetchOnMountOrArgChange:!0}),r=a.data,i=a.isLoading,c=a.isSuccess,o=a.isError,s=a.error,l=null;if(i)l=n.a.createElement(Jt.a,{animation:"border",variant:"primary"});else if(c){var u=r.map((function(e){return n.a.createElement(ta.a.Item,{as:Mt.b,to:"/edit/".concat(e.exercise_id),key:e.exercise_id,action:!0,onClick:function(){return t(e.exercise_id)}},e.title)}));l=n.a.createElement(ta.a,null,u)}else o&&(l=n.a.createElement(aa,{error:s}));return n.a.createElement("div",null,n.a.createElement("h1",{className:"mb-4"},"Edit exercises"),l)})),Sr=function(){var e,t=Tt(void 0,{refetchOnMountOrArgChange:!0}),a=t.data,r=t.isLoading,i=t.isSuccess,c=t.isError,o=t.error;if(r)e=n.a.createElement(Jt.a,{animation:"border",variant:"primary"});else if(i){var s=a.map((function(e){return n.a.createElement("tr",{key:e.exercise_id},n.a.createElement("td",null,n.a.createElement(Mt.b,{to:"/bad_formalizations/".concat(e.exercise_id),key:e.exercise_id},e.title)),n.a.createElement("td",null,e.bad_formalizations),n.a.createElement("td",null,e.students))}));e=n.a.createElement(ia.a,{striped:!0,bordered:!0,hover:!0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Exercise"),n.a.createElement("th",null,"Bad formalizations"),n.a.createElement("th",null,"Students"))),n.a.createElement("tbody",null,s))}else c&&(e=n.a.createElement(aa,{error:o}));return n.a.createElement("div",null,n.a.createElement("h2",{className:"mb-4"},"Bad formalizations"),e)},Nr=function(e){var t,a,r,i=e.match.params.exercise_id,c=At(i),o=c.data,s=c.isFetching,l=c.isSuccess,u=c.isError,d=c.error;if(s)t=n.a.createElement(Jt.a,{animation:"border",variant:"primary"});else if(l){a=o.propositions,r=o.title1;var m=a.map((function(e){return n.a.createElement("tr",{key:e.proposition},n.a.createElement("td",null,n.a.createElement(Mt.b,{to:"/bad_formalizations/".concat(i,"/").concat(e.proposition_id),key:e.proposition_id},e.proposition)),n.a.createElement("td",null,e.bad_formalizations),n.a.createElement("td",null,e.students))}));t=n.a.createElement(ia.a,{striped:!0,bordered:!0,hover:!0},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"Proposition"),n.a.createElement("th",null,"Bad formalizations"),n.a.createElement("th",null,"Students"))),n.a.createElement("tbody",null,m))}else u&&(t=n.a.createElement(aa,{error:d}));return n.a.createElement("div",null,n.a.createElement("h2",{className:"mb-4"},r),t)},Fr=a(118),Cr=function(e){var t=e.bad_formalization_id,a=Object(r.useState)(""),i=Object(v.a)(a,2),c=i[0],o=i[1],s=Ut(),l=Object(v.a)(s,1)[0],u=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(""),e.next=3,l({feedback:c,bad_formalization_id:t}).unwrap();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return n.a.createElement("div",{className:"clearfix mt-2"},n.a.createElement("h6",{className:"my-2 px-4"},"Add feedback"),n.a.createElement($t.a.Group,{className:"clearfix px-4 pb-1"},n.a.createElement($t.a.Control,{className:"mr-2",type:"text",as:"textarea",rows:2,placeholder:"Enter exercise title",value:c,onChange:function(e){return o(e.target.value)}}),n.a.createElement(Bt.a,{className:"mt-2 float-right",variant:"primary",size:"sm",onClick:u},"Add")))},Tr=function(e){var t=e.value,a=e.id,i=qt(),c=Object(v.a)(i,1)[0],o=Object(r.useState)(t),s=Object(v.a)(o,2),l=s[0],u=s[1];Object(r.useEffect)(Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===l){e.next=3;break}return e.next=3,c({id:a,isActive:l});case 3:case"end":return e.stop()}}),e)}))),[l]);return n.a.createElement($t.a.Check,{inline:!0,type:"checkbox",label:"Active",name:a,checked:l,onChange:function(){u(!l)}})},Ar=function(e){var t,a=e.i,r=e.bad_formalization_id,i=Pt({bad_formalization_id:r},{refetchOnMountOrArgChange:!0}),c=i.data,o=i.isFetching,s=i.isSuccess,l=i.isError,u=i.error;return o?t=n.a.createElement(Jt.a,{animation:"border",variant:"primary"}):s?t=c.map((function(e){return n.a.createElement(ta.a.Item,{as:"li"},n.a.createElement("div",{className:"d-flex justify-content-between"},e.author,n.a.createElement(Tr,{id:e.feedback_id,value:e.active})),n.a.createElement("div",null,e.feedback),n.a.createElement("div",null,"shown: ",e.shown,", rating: ",n.a.createElement(da.a,null),e.likes,", ",n.a.createElement(ma.a,null),e.dislikes))})):l&&(t=n.a.createElement(aa,{as:ta.a.Item,error:u})),n.a.createElement("div",{className:"clearfix"},n.a.createElement("h5",{className:"mt-2 px-4"},"Feedback"),n.a.createElement(ta.a,{as:"ol",className:"list-group-flush border-top border-bottom"},t),n.a.createElement(Cr,{key:a,bad_formalization_id:r}))},Ir=function(e){var t,a=e.i,r=e.bad_formalization_id,i=e.exercise_id,c=e.students,o=Lt({exercise_id:i,bad_formalization_id:r}),s=o.data,l=o.isFetching,u=o.isSuccess,d=o.isError,m=o.error;if(l)t=n.a.createElement(Jt.a,{animation:"border",variant:"primary"});else if(u){var p,f=c.map((function(e){return n.a.createElement("a",{className:"my-0 pl-4 text-muted d-block",href:"/progress/".concat(i,"/").concat(e.user_name)},e.user_name)}));if(null!==s.bad_solutions){var E=s.bad_solutions.map((function(e){return n.a.createElement(Fr.a.Text,{className:"my-1 pl-4 text-muted"},e.solution)}));p=n.a.createElement("details",null,n.a.createElement("summary",{className:"mt-2"},s.bad_solutions.length," equivalent bad formalization(s)"),E)}t=n.a.createElement("div",null,n.a.createElement(Fr.a.Body,{className:"pt-4 pb-0 px-4"},n.a.createElement("h5",{className:"card-title"},s.bad_formalization),n.a.createElement("details",null,n.a.createElement("summary",{className:"mt-2"},"students: ",c.length),f),p),n.a.createElement(Ar,{key:a,i:a,bad_formalization_id:r}))}else d&&(t=n.a.createElement(aa,{error:m}));return n.a.createElement(Fr.a,null,t)},Lr=function(e){var t,a,r,i=e.match.params,c=i.exercise_id,o=i.proposition_id,s=It({exercise_id:c,proposition_id:o}),l=s.data,u=s.isFetching,d=s.isSuccess,m=s.isError,p=s.error,f=null;if(u)t=n.a.createElement(Jt.a,{animation:"border",variant:"primary"});else if(d){a=l.title1,r=l.title2;var E=l.formalizations,b=l.bad_formalizations;f=E.map((function(e){return n.a.createElement("h5",{className:"mb-1"},e.formalization)})),t=b.map((function(e,t){return n.a.createElement("div",{className:"m-2 mb-3"},n.a.createElement(Ir,{key:t,i:t,bad_formalization_id:e.bad_formalization_id,exercise_id:c,students:e.students}))}))}else m&&(t=n.a.createElement(aa,{error:p}));return n.a.createElement("div",null,n.a.createElement("h2",{className:"mb-3"},a),n.a.createElement("h3",{className:"mb-2"},r),n.a.createElement("div",{className:"mb-4"},n.a.createElement("p",{className:"mb-0"},"correct formalization(s) "),f),t)};var Vr={logOut:bt,changeStatus:ue},Pr=Object(o.c)((function(e){return{isLoggedIn:e.user.isLoggedIn,isAdmin:e.user.isAdmin,user:e.user.user}}),Vr)((function(e){var t=e.isLoggedIn,a=e.user,r=e.logOut,i=(e.changeStatus,e.isAdmin),c=null;return c=t?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"px-4 my-auto text-info"},"You are logged in as ",n.a.createElement("b",null,a.username)),n.a.createElement(Bt.a,{as:Mt.b,to:"/",onClick:function(){return r()}},"Log out")):n.a.createElement(Bt.a,{as:Mt.b,to:"/login"},"Log in"),i?n.a.createElement(Mt.a,{basename:Xt.BASE_NAME},n.a.createElement("div",{className:"App"},n.a.createElement(Gt.a,{bg:"dark",variant:"dark",sticky:"top"},n.a.createElement(Wt.a,{className:"mr-auto"},n.a.createElement(Wt.a.Link,{className:"px-4",as:Mt.b,to:"/"},"Home"),n.a.createElement(Wt.a.Link,{className:"px-4",as:Mt.b,to:"/add"},"Add"),n.a.createElement(Wt.a.Link,{className:"px-4",as:Mt.b,to:"/edit"},"Edit"),n.a.createElement(Wt.a.Link,{className:"px-4",as:Mt.b,to:"/progress"},"Student progress"),n.a.createElement(Wt.a.Link,{className:"px-4",as:Mt.b,to:"/bad_formalizations"},"Bad formalizations"),n.a.createElement(Wt.a.Link,{className:"px-4",as:Mt.b,to:"/admins"},"Admin")),n.a.createElement(Wt.a,null,c)),n.a.createElement(Dt.a,{className:"my-3"},n.a.createElement(Kt.d,null,n.a.createElement(Ht,{exact:!0,path:"/",component:na}),n.a.createElement(pr,{exact:!0,path:"/admins",component:kr}),n.a.createElement(pr,{exact:!0,path:"/progress",component:fr}),n.a.createElement(pr,{exact:!0,path:"/progress/:exercise_id",component:gr}),n.a.createElement(pr,{exact:!0,path:"/progress/:exercise_id/:user_name",component:vr}),n.a.createElement(Kt.b,{exact:!0,path:"/login",component:ea}),n.a.createElement(Ht,{path:"/solve/:id",component:Ia}),n.a.createElement(pr,{exact:!0,path:"/add",component:dr}),n.a.createElement(pr,{exact:!0,path:"/edit",component:zr}),n.a.createElement(pr,{exact:!0,path:"/edit/:id",component:_r}),n.a.createElement(pr,{exact:!0,path:"/bad_formalizations",component:Sr}),n.a.createElement(pr,{exact:!0,path:"/bad_formalizations/:exercise_id",component:Nr}),n.a.createElement(pr,{exact:!0,path:"/bad_formalizations/:exercise_id/:proposition_id",component:Lr}),n.a.createElement(Kt.b,{path:"*",component:function(){return n.a.createElement(Rt.a,{variant:"danger"},"404 Not Found")}}))))):n.a.createElement(Mt.a,{basename:Xt.BASE_NAME},n.a.createElement("div",{className:"App"},n.a.createElement(Gt.a,{bg:"dark",variant:"dark",sticky:"top"},n.a.createElement(Wt.a,{className:"mr-auto"},n.a.createElement(Wt.a.Link,{className:"px-4",as:Mt.b,to:"/"},"Home"),n.a.createElement(Wt.a.Link,{className:"px-4",as:Mt.b,to:"/progress"},"Your progress")),n.a.createElement(Wt.a,null,c)),n.a.createElement(Dt.a,{className:"my-3"},n.a.createElement(Kt.d,null,n.a.createElement(Ht,{exact:!0,path:"/",component:na}),n.a.createElement(Kt.b,{exact:!0,path:"/login",component:ea}),n.a.createElement(Ht,{path:"/solve/:id",component:Ia}),n.a.createElement(Ht,{exact:!0,path:"/progress",component:yr}),n.a.createElement(Ht,{exact:!0,path:"/progress/:exercise_id/:user_name",component:vr}),n.a.createElement(Kt.b,{path:"*",component:function(){return n.a.createElement(Rt.a,{variant:"danger"},"404 Not Found")}})))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ur=function(e){var t,a;return Object(l.a)({reducer:(t={addExercise:Ne,propositions:Ge,allUsers:zt,solveExercise:at,user:ht,backend:(a=e,Object(l.d)({name:"backend",initialState:{url:a}}).reducer)},Object(s.a)(t,Ft.reducerPath,Ft.reducer),Object(s.a)(t,Vt.reducerPath,Vt.reducer),t),middleware:function(e){return e().concat(Ft.middleware,Vt.middleware)}})}(Xt.BACKEND_URL);c.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(o.a,{store:Ur},n.a.createElement(Pr,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},31:function(e,t,a){a(97).config(),e.exports={BACKEND_URL:"https://student.dai.fmph.uniba.sk/services/formalization-checker",CLIENT_ID:"440fde1ff83dc0bb86f6",REDIRECT:"https://fmfi-uk-1-ain-412.github.io/formalization-checker/login",BASE_NAME:"/formalization-checker"}},69:function(e,t,a){e.exports=a(101)},79:function(e,t,a){},93:function(e,t,a){}},[[69,1,2]]]);
//# sourceMappingURL=main.0b0cfb84.chunk.js.map